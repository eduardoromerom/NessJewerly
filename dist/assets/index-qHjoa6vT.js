(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function jg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var yh={exports:{}},na={},_h={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function nE(){if(lm)return Ie;lm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.iterator;function U(D){return D===null||typeof D!="object"?null:(D=P&&D[P]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,X={};function K(D,H,Ee){this.props=D,this.context=H,this.refs=X,this.updater=Ee||q}K.prototype.isReactComponent={},K.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},K.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ge(){}ge.prototype=K.prototype;function ve(D,H,Ee){this.props=D,this.context=H,this.refs=X,this.updater=Ee||q}var Te=ve.prototype=new ge;Te.constructor=ve,ee(Te,K.prototype),Te.isPureReactComponent=!0;var xe=Array.isArray,je=Object.prototype.hasOwnProperty,B={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function w(D,H,Ee){var we,Se={},Ae=null,Fe=null;if(H!=null)for(we in H.ref!==void 0&&(Fe=H.ref),H.key!==void 0&&(Ae=""+H.key),H)je.call(H,we)&&!C.hasOwnProperty(we)&&(Se[we]=H[we]);var Ve=arguments.length-2;if(Ve===1)Se.children=Ee;else if(1<Ve){for(var ze=Array(Ve),Ft=0;Ft<Ve;Ft++)ze[Ft]=arguments[Ft+2];Se.children=ze}if(D&&D.defaultProps)for(we in Ve=D.defaultProps,Ve)Se[we]===void 0&&(Se[we]=Ve[we]);return{$$typeof:i,type:D,key:Ae,ref:Fe,props:Se,_owner:B.current}}function A(D,H){return{$$typeof:i,type:D.type,key:H,ref:D.ref,props:D.props,_owner:D._owner}}function V(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function k(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ee){return H[Ee]})}var x=/\/+/g;function S(D,H){return typeof D=="object"&&D!==null&&D.key!=null?k(""+D.key):H.toString(36)}function $e(D,H,Ee,we,Se){var Ae=typeof D;(Ae==="undefined"||Ae==="boolean")&&(D=null);var Fe=!1;if(D===null)Fe=!0;else switch(Ae){case"string":case"number":Fe=!0;break;case"object":switch(D.$$typeof){case i:case e:Fe=!0}}if(Fe)return Fe=D,Se=Se(Fe),D=we===""?"."+S(Fe,0):we,xe(Se)?(Ee="",D!=null&&(Ee=D.replace(x,"$&/")+"/"),$e(Se,H,Ee,"",function(Ft){return Ft})):Se!=null&&(V(Se)&&(Se=A(Se,Ee+(!Se.key||Fe&&Fe.key===Se.key?"":(""+Se.key).replace(x,"$&/")+"/")+D)),H.push(Se)),1;if(Fe=0,we=we===""?".":we+":",xe(D))for(var Ve=0;Ve<D.length;Ve++){Ae=D[Ve];var ze=we+S(Ae,Ve);Fe+=$e(Ae,H,Ee,ze,Se)}else if(ze=U(D),typeof ze=="function")for(D=ze.call(D),Ve=0;!(Ae=D.next()).done;)Ae=Ae.value,ze=we+S(Ae,Ve++),Fe+=$e(Ae,H,Ee,ze,Se);else if(Ae==="object")throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Fe}function yt(D,H,Ee){if(D==null)return D;var we=[],Se=0;return $e(D,we,"","",function(Ae){return H.call(Ee,Ae,Se++)}),we}function kt(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(Ee){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ee)},function(Ee){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ee)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var Xe={current:null},Z={transition:null},ce={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:B};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:yt,forEach:function(D,H,Ee){yt(D,function(){H.apply(this,arguments)},Ee)},count:function(D){var H=0;return yt(D,function(){H++}),H},toArray:function(D){return yt(D,function(H){return H})||[]},only:function(D){if(!V(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ie.Component=K,Ie.Fragment=t,Ie.Profiler=a,Ie.PureComponent=ve,Ie.StrictMode=s,Ie.Suspense=y,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Ie.act=ie,Ie.cloneElement=function(D,H,Ee){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var we=ee({},D.props),Se=D.key,Ae=D.ref,Fe=D._owner;if(H!=null){if(H.ref!==void 0&&(Ae=H.ref,Fe=B.current),H.key!==void 0&&(Se=""+H.key),D.type&&D.type.defaultProps)var Ve=D.type.defaultProps;for(ze in H)je.call(H,ze)&&!C.hasOwnProperty(ze)&&(we[ze]=H[ze]===void 0&&Ve!==void 0?Ve[ze]:H[ze])}var ze=arguments.length-2;if(ze===1)we.children=Ee;else if(1<ze){Ve=Array(ze);for(var Ft=0;Ft<ze;Ft++)Ve[Ft]=arguments[Ft+2];we.children=Ve}return{$$typeof:i,type:D.type,key:Se,ref:Ae,props:we,_owner:Fe}},Ie.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:c,_context:D},D.Consumer=D},Ie.createElement=w,Ie.createFactory=function(D){var H=w.bind(null,D);return H.type=D,H},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(D){return{$$typeof:g,render:D}},Ie.isValidElement=V,Ie.lazy=function(D){return{$$typeof:I,_payload:{_status:-1,_result:D},_init:kt}},Ie.memo=function(D,H){return{$$typeof:v,type:D,compare:H===void 0?null:H}},Ie.startTransition=function(D){var H=Z.transition;Z.transition={};try{D()}finally{Z.transition=H}},Ie.unstable_act=ie,Ie.useCallback=function(D,H){return Xe.current.useCallback(D,H)},Ie.useContext=function(D){return Xe.current.useContext(D)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(D){return Xe.current.useDeferredValue(D)},Ie.useEffect=function(D,H){return Xe.current.useEffect(D,H)},Ie.useId=function(){return Xe.current.useId()},Ie.useImperativeHandle=function(D,H,Ee){return Xe.current.useImperativeHandle(D,H,Ee)},Ie.useInsertionEffect=function(D,H){return Xe.current.useInsertionEffect(D,H)},Ie.useLayoutEffect=function(D,H){return Xe.current.useLayoutEffect(D,H)},Ie.useMemo=function(D,H){return Xe.current.useMemo(D,H)},Ie.useReducer=function(D,H,Ee){return Xe.current.useReducer(D,H,Ee)},Ie.useRef=function(D){return Xe.current.useRef(D)},Ie.useState=function(D){return Xe.current.useState(D)},Ie.useSyncExternalStore=function(D,H,Ee){return Xe.current.useSyncExternalStore(D,H,Ee)},Ie.useTransition=function(){return Xe.current.useTransition()},Ie.version="18.3.1",Ie}var um;function lf(){return um||(um=1,_h.exports=nE()),_h.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm;function rE(){if(cm)return na;cm=1;var i=lf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(g,y,v){var I,P={},U=null,q=null;v!==void 0&&(U=""+v),y.key!==void 0&&(U=""+y.key),y.ref!==void 0&&(q=y.ref);for(I in y)s.call(y,I)&&!c.hasOwnProperty(I)&&(P[I]=y[I]);if(g&&g.defaultProps)for(I in y=g.defaultProps,y)P[I]===void 0&&(P[I]=y[I]);return{$$typeof:e,type:g,key:U,ref:q,props:P,_owner:a.current}}return na.Fragment=t,na.jsx=h,na.jsxs=h,na}var hm;function iE(){return hm||(hm=1,yh.exports=rE()),yh.exports}var j=iE();const sE=()=>{};var fm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},oE=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const a=i[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[t++],h=i[t++],g=i[t++],y=((a&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[t++],h=i[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return e.join("")},Bg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],h=a+1<i.length,g=h?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,I=c>>2,P=(c&3)<<4|g>>4;let U=(g&15)<<2|v>>6,q=v&63;y||(q=64,h||(U=64)),s.push(t[I],t[P],t[U],t[q])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(zg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):oE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=t[i.charAt(a++)],g=a<i.length?t[i.charAt(a)]:0;++a;const v=a<i.length?t[i.charAt(a)]:64;++a;const P=a<i.length?t[i.charAt(a)]:64;if(++a,c==null||g==null||v==null||P==null)throw new aE;const U=c<<2|g>>4;if(s.push(U),v!==64){const q=g<<4&240|v>>2;if(s.push(q),P!==64){const ee=v<<6&192|P;s.push(ee)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class aE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lE=function(i){const e=zg(i);return Bg.encodeByteArray(e,!0)},$g=function(i){return lE(i).replace(/\./g,"")},qg=function(i){try{return Bg.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=()=>uE().__FIREBASE_DEFAULTS__,hE=()=>{if(typeof process>"u"||typeof fm>"u")return;const i=fm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},fE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&qg(i[1]);return e&&JSON.parse(e)},uf=()=>{try{return sE()||cE()||hE()||fE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},dE=()=>uf()?.config,pE=i=>uf()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function _E(){const i=uf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EE(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function wE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TE(){const i=Gt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function IE(){return!_E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SE(){try{return typeof indexedDB=="object"}catch{return!1}}function AE(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="FirebaseError";class hi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=CE,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ra.prototype.create)}}class Ra{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],h=c?RE(c,s):"Error",g=`${this.serviceName}: ${h} (${a}).`;return new hi(a,g,s)}}function RE(i,e){return i.replace(PE,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const PE=/\{\$([^}]+)}/g;function ma(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=i[a],h=e[a];if(dm(c)&&dm(h)){if(!ma(c,h))return!1}else if(c!==h)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function dm(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function kE(i,e){const t=new NE(i,e);return t.subscribe.bind(t)}class NE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");VE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=vh),a.error===void 0&&(a.error=vh),a.complete===void 0&&(a.complete=vh);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VE(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(i){return i&&i._delegate?i._delegate:i}class Wi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new mE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OE(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&h.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xE(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xE(i){return i===ji?void 0:i}function OE(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ce||(Ce={}));const ME={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},FE=Ce.INFO,bE={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},UE=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=bE[e];if(a)console[a](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cf{constructor(e){this.name=e,this._logLevel=FE,this._logHandler=UE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ME[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const jE=(i,e)=>e.some(t=>i instanceof t);let pm,mm;function zE(){return pm||(pm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BE(){return mm||(mm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wg=new WeakMap,Fh=new WeakMap,Kg=new WeakMap,Eh=new WeakMap,hf=new WeakMap;function $E(i){const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{t(ti(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Wg.set(t,i)}).catch(()=>{}),hf.set(e,i),e}function qE(i){if(Fh.has(i))return;const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{t(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Fh.set(i,e)}let bh={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Fh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Kg.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ti(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function HE(i){bh=i(bh)}function WE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(wh(this),e,...t);return Kg.set(s,e.sort?e.sort():[e]),ti(s)}:BE().includes(i)?function(...e){return i.apply(wh(this),e),ti(Wg.get(this))}:function(...e){return ti(i.apply(wh(this),e))}}function KE(i){return typeof i=="function"?WE(i):(i instanceof IDBTransaction&&qE(i),jE(i,zE())?new Proxy(i,bh):i)}function ti(i){if(i instanceof IDBRequest)return $E(i);if(Eh.has(i))return Eh.get(i);const e=KE(i);return e!==i&&(Eh.set(i,e),hf.set(e,i)),e}const wh=i=>hf.get(i);function GE(i,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const h=indexedDB.open(i,e),g=ti(h);return s&&h.addEventListener("upgradeneeded",y=>{s(ti(h.result),y.oldVersion,y.newVersion,ti(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const QE=["get","getKey","getAll","getAllKeys","count"],XE=["put","add","delete","clear"],Th=new Map;function gm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=XE.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||QE.includes(t)))return;const c=async function(h,...g){const y=this.transaction(h,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[t](...g),a&&y.done]))[0]};return Th.set(e,c),c}HE(i=>({...i,get:(e,t,s)=>gm(e,t)||i.get(e,t,s),has:(e,t)=>!!gm(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JE(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function JE(i){return i.getComponent()?.type==="VERSION"}const Uh="@firebase/app",ym="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new cf("@firebase/app"),ZE="@firebase/app-compat",ew="@firebase/analytics-compat",tw="@firebase/analytics",nw="@firebase/app-check-compat",rw="@firebase/app-check",iw="@firebase/auth",sw="@firebase/auth-compat",ow="@firebase/database",aw="@firebase/data-connect",lw="@firebase/database-compat",uw="@firebase/functions",cw="@firebase/functions-compat",hw="@firebase/installations",fw="@firebase/installations-compat",dw="@firebase/messaging",pw="@firebase/messaging-compat",mw="@firebase/performance",gw="@firebase/performance-compat",yw="@firebase/remote-config",_w="@firebase/remote-config-compat",vw="@firebase/storage",Ew="@firebase/storage-compat",ww="@firebase/firestore",Tw="@firebase/ai",Iw="@firebase/firestore-compat",Sw="firebase",Aw="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="[DEFAULT]",Rw={[Uh]:"fire-core",[ZE]:"fire-core-compat",[tw]:"fire-analytics",[ew]:"fire-analytics-compat",[rw]:"fire-app-check",[nw]:"fire-app-check-compat",[iw]:"fire-auth",[sw]:"fire-auth-compat",[ow]:"fire-rtdb",[aw]:"fire-data-connect",[lw]:"fire-rtdb-compat",[uw]:"fire-fn",[cw]:"fire-fn-compat",[hw]:"fire-iid",[fw]:"fire-iid-compat",[dw]:"fire-fcm",[pw]:"fire-fcm-compat",[mw]:"fire-perf",[gw]:"fire-perf-compat",[yw]:"fire-rc",[_w]:"fire-rc-compat",[vw]:"fire-gcs",[Ew]:"fire-gcs-compat",[ww]:"fire-fst",[Iw]:"fire-fst-compat",[Tw]:"fire-vertex","fire-js":"fire-js",[Sw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,Pw=new Map,zh=new Map;function _m(i,e){try{i.container.addComponent(e)}catch(t){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Xs(i){const e=i.name;if(zh.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;zh.set(e,i);for(const t of jh.values())_m(t,i);for(const t of Pw.values())_m(t,i);return!0}function Gg(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Zr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Ra("app","Firebase",kw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=Aw;function Vw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Cw,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw $i.create("bad-app-name",{appName:String(a)});if(t||(t=dE()),!t)throw $i.create("no-options");const c=jh.get(a);if(c){if(ma(t,c.options)&&ma(s,c.config))return c;throw $i.create("duplicate-app",{appName:a})}const h=new LE(a);for(const y of zh.values())h.addComponent(y);const g=new Nw(t,s,h);return jh.set(a,g),g}function ni(i,e,t){let s=Rw[i]??i;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(h.join(" "));return}Xs(new Wi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebase-heartbeat-database",xw=1,ga="firebase-heartbeat-store";let Ih=null;function Qg(){return Ih||(Ih=GE(Dw,xw,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ga)}catch(t){console.warn(t)}}}}).catch(i=>{throw $i.create("idb-open",{originalErrorMessage:i.message})})),Ih}async function Ow(i){try{const t=(await Qg()).transaction(ga),s=await t.objectStore(ga).get(Xg(i));return await t.done,s}catch(e){if(e instanceof hi)vr.warn(e.message);else{const t=$i.create("idb-get",{originalErrorMessage:e?.message});vr.warn(t.message)}}}async function vm(i,e){try{const s=(await Qg()).transaction(ga,"readwrite");await s.objectStore(ga).put(e,Xg(i)),await s.done}catch(t){if(t instanceof hi)vr.warn(t.message);else{const s=$i.create("idb-set",{originalErrorMessage:t?.message});vr.warn(s.message)}}}function Xg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=1024,Mw=30;class Fw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Uw(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Em();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>Mw){const a=jw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Em(),{heartbeatsToSend:t,unsentEntries:s}=bw(this._heartbeatsCache.heartbeats),a=$g(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return vr.warn(e),""}}}function Em(){return new Date().toISOString().substring(0,10)}function bw(i,e=Lw){const t=[];let s=i.slice();for(const a of i){const c=t.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),wm(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),wm(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Uw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SE()?AE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ow(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return vm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return vm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wm(i){return $g(JSON.stringify({version:2,heartbeats:i})).length}function jw(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(i){Xs(new Wi("platform-logger",e=>new YE(e),"PRIVATE")),Xs(new Wi("heartbeat",e=>new Fw(e),"PRIVATE")),ni(Uh,ym,i),ni(Uh,ym,"esm2020"),ni("fire-js","")}zw("");var Bw="firebase",$w="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(Bw,$w,"app");var Tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,Yg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,w){function A(){}A.prototype=w.prototype,C.F=w.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(V,k,x){for(var S=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)S[$e-2]=arguments[$e];return w.prototype[k].apply(V,S)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,w,A){A||(A=0);const V=Array(16);if(typeof w=="string")for(var k=0;k<16;++k)V[k]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(k=0;k<16;++k)V[k]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=C.g[0],A=C.g[1],k=C.g[2];let x=C.g[3],S;S=w+(x^A&(k^x))+V[0]+3614090360&4294967295,w=A+(S<<7&4294967295|S>>>25),S=x+(k^w&(A^k))+V[1]+3905402710&4294967295,x=w+(S<<12&4294967295|S>>>20),S=k+(A^x&(w^A))+V[2]+606105819&4294967295,k=x+(S<<17&4294967295|S>>>15),S=A+(w^k&(x^w))+V[3]+3250441966&4294967295,A=k+(S<<22&4294967295|S>>>10),S=w+(x^A&(k^x))+V[4]+4118548399&4294967295,w=A+(S<<7&4294967295|S>>>25),S=x+(k^w&(A^k))+V[5]+1200080426&4294967295,x=w+(S<<12&4294967295|S>>>20),S=k+(A^x&(w^A))+V[6]+2821735955&4294967295,k=x+(S<<17&4294967295|S>>>15),S=A+(w^k&(x^w))+V[7]+4249261313&4294967295,A=k+(S<<22&4294967295|S>>>10),S=w+(x^A&(k^x))+V[8]+1770035416&4294967295,w=A+(S<<7&4294967295|S>>>25),S=x+(k^w&(A^k))+V[9]+2336552879&4294967295,x=w+(S<<12&4294967295|S>>>20),S=k+(A^x&(w^A))+V[10]+4294925233&4294967295,k=x+(S<<17&4294967295|S>>>15),S=A+(w^k&(x^w))+V[11]+2304563134&4294967295,A=k+(S<<22&4294967295|S>>>10),S=w+(x^A&(k^x))+V[12]+1804603682&4294967295,w=A+(S<<7&4294967295|S>>>25),S=x+(k^w&(A^k))+V[13]+4254626195&4294967295,x=w+(S<<12&4294967295|S>>>20),S=k+(A^x&(w^A))+V[14]+2792965006&4294967295,k=x+(S<<17&4294967295|S>>>15),S=A+(w^k&(x^w))+V[15]+1236535329&4294967295,A=k+(S<<22&4294967295|S>>>10),S=w+(k^x&(A^k))+V[1]+4129170786&4294967295,w=A+(S<<5&4294967295|S>>>27),S=x+(A^k&(w^A))+V[6]+3225465664&4294967295,x=w+(S<<9&4294967295|S>>>23),S=k+(w^A&(x^w))+V[11]+643717713&4294967295,k=x+(S<<14&4294967295|S>>>18),S=A+(x^w&(k^x))+V[0]+3921069994&4294967295,A=k+(S<<20&4294967295|S>>>12),S=w+(k^x&(A^k))+V[5]+3593408605&4294967295,w=A+(S<<5&4294967295|S>>>27),S=x+(A^k&(w^A))+V[10]+38016083&4294967295,x=w+(S<<9&4294967295|S>>>23),S=k+(w^A&(x^w))+V[15]+3634488961&4294967295,k=x+(S<<14&4294967295|S>>>18),S=A+(x^w&(k^x))+V[4]+3889429448&4294967295,A=k+(S<<20&4294967295|S>>>12),S=w+(k^x&(A^k))+V[9]+568446438&4294967295,w=A+(S<<5&4294967295|S>>>27),S=x+(A^k&(w^A))+V[14]+3275163606&4294967295,x=w+(S<<9&4294967295|S>>>23),S=k+(w^A&(x^w))+V[3]+4107603335&4294967295,k=x+(S<<14&4294967295|S>>>18),S=A+(x^w&(k^x))+V[8]+1163531501&4294967295,A=k+(S<<20&4294967295|S>>>12),S=w+(k^x&(A^k))+V[13]+2850285829&4294967295,w=A+(S<<5&4294967295|S>>>27),S=x+(A^k&(w^A))+V[2]+4243563512&4294967295,x=w+(S<<9&4294967295|S>>>23),S=k+(w^A&(x^w))+V[7]+1735328473&4294967295,k=x+(S<<14&4294967295|S>>>18),S=A+(x^w&(k^x))+V[12]+2368359562&4294967295,A=k+(S<<20&4294967295|S>>>12),S=w+(A^k^x)+V[5]+4294588738&4294967295,w=A+(S<<4&4294967295|S>>>28),S=x+(w^A^k)+V[8]+2272392833&4294967295,x=w+(S<<11&4294967295|S>>>21),S=k+(x^w^A)+V[11]+1839030562&4294967295,k=x+(S<<16&4294967295|S>>>16),S=A+(k^x^w)+V[14]+4259657740&4294967295,A=k+(S<<23&4294967295|S>>>9),S=w+(A^k^x)+V[1]+2763975236&4294967295,w=A+(S<<4&4294967295|S>>>28),S=x+(w^A^k)+V[4]+1272893353&4294967295,x=w+(S<<11&4294967295|S>>>21),S=k+(x^w^A)+V[7]+4139469664&4294967295,k=x+(S<<16&4294967295|S>>>16),S=A+(k^x^w)+V[10]+3200236656&4294967295,A=k+(S<<23&4294967295|S>>>9),S=w+(A^k^x)+V[13]+681279174&4294967295,w=A+(S<<4&4294967295|S>>>28),S=x+(w^A^k)+V[0]+3936430074&4294967295,x=w+(S<<11&4294967295|S>>>21),S=k+(x^w^A)+V[3]+3572445317&4294967295,k=x+(S<<16&4294967295|S>>>16),S=A+(k^x^w)+V[6]+76029189&4294967295,A=k+(S<<23&4294967295|S>>>9),S=w+(A^k^x)+V[9]+3654602809&4294967295,w=A+(S<<4&4294967295|S>>>28),S=x+(w^A^k)+V[12]+3873151461&4294967295,x=w+(S<<11&4294967295|S>>>21),S=k+(x^w^A)+V[15]+530742520&4294967295,k=x+(S<<16&4294967295|S>>>16),S=A+(k^x^w)+V[2]+3299628645&4294967295,A=k+(S<<23&4294967295|S>>>9),S=w+(k^(A|~x))+V[0]+4096336452&4294967295,w=A+(S<<6&4294967295|S>>>26),S=x+(A^(w|~k))+V[7]+1126891415&4294967295,x=w+(S<<10&4294967295|S>>>22),S=k+(w^(x|~A))+V[14]+2878612391&4294967295,k=x+(S<<15&4294967295|S>>>17),S=A+(x^(k|~w))+V[5]+4237533241&4294967295,A=k+(S<<21&4294967295|S>>>11),S=w+(k^(A|~x))+V[12]+1700485571&4294967295,w=A+(S<<6&4294967295|S>>>26),S=x+(A^(w|~k))+V[3]+2399980690&4294967295,x=w+(S<<10&4294967295|S>>>22),S=k+(w^(x|~A))+V[10]+4293915773&4294967295,k=x+(S<<15&4294967295|S>>>17),S=A+(x^(k|~w))+V[1]+2240044497&4294967295,A=k+(S<<21&4294967295|S>>>11),S=w+(k^(A|~x))+V[8]+1873313359&4294967295,w=A+(S<<6&4294967295|S>>>26),S=x+(A^(w|~k))+V[15]+4264355552&4294967295,x=w+(S<<10&4294967295|S>>>22),S=k+(w^(x|~A))+V[6]+2734768916&4294967295,k=x+(S<<15&4294967295|S>>>17),S=A+(x^(k|~w))+V[13]+1309151649&4294967295,A=k+(S<<21&4294967295|S>>>11),S=w+(k^(A|~x))+V[4]+4149444226&4294967295,w=A+(S<<6&4294967295|S>>>26),S=x+(A^(w|~k))+V[11]+3174756917&4294967295,x=w+(S<<10&4294967295|S>>>22),S=k+(w^(x|~A))+V[2]+718787259&4294967295,k=x+(S<<15&4294967295|S>>>17),S=A+(x^(k|~w))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+x&4294967295}s.prototype.v=function(C,w){w===void 0&&(w=C.length);const A=w-this.blockSize,V=this.C;let k=this.h,x=0;for(;x<w;){if(k==0)for(;x<=A;)a(this,C,x),x+=this.blockSize;if(typeof C=="string"){for(;x<w;)if(V[k++]=C.charCodeAt(x++),k==this.blockSize){a(this,V),k=0;break}}else for(;x<w;)if(V[k++]=C[x++],k==this.blockSize){a(this,V),k=0;break}}this.h=k,this.o+=w},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;w=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=w&255,w/=256;for(this.v(C),C=Array(16),w=0,A=0;A<4;++A)for(let V=0;V<32;V+=8)C[w++]=this.g[A]>>>V&255;return C};function c(C,w){var A=g;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=w(C)}function h(C,w){this.h=w;const A=[];let V=!0;for(let k=C.length-1;k>=0;k--){const x=C[k]|0;V&&x==w||(A[k]=x,V=!1)}this.g=A}var g={};function y(C){return-128<=C&&C<128?c(C,function(w){return new h([w|0],w<0?-1:0)}):new h([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return P;if(C<0)return K(v(-C));const w=[];let A=1;for(let V=0;C>=A;V++)w[V]=C/A|0,A*=4294967296;return new h(w,0)}function I(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return K(I(C.substring(1),w));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(w,8));let V=P;for(let x=0;x<C.length;x+=8){var k=Math.min(8,C.length-x);const S=parseInt(C.substring(x,x+k),w);k<8?(k=v(Math.pow(w,k)),V=V.j(k).add(v(S))):(V=V.j(A),V=V.add(v(S)))}return V}var P=y(0),U=y(1),q=y(16777216);i=h.prototype,i.m=function(){if(X(this))return-K(this).m();let C=0,w=1;for(let A=0;A<this.g.length;A++){const V=this.i(A);C+=(V>=0?V:4294967296+V)*w,w*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(ee(this))return"0";if(X(this))return"-"+K(this).toString(C);const w=v(Math.pow(C,6));var A=this;let V="";for(;;){const k=xe(A,w).g;A=ge(A,k.j(w));let x=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=k,ee(A))return x+V;for(;x.length<6;)x="0"+x;V=x+V}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function ee(C){if(C.h!=0)return!1;for(let w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function X(C){return C.h==-1}i.l=function(C){return C=ge(this,C),X(C)?-1:ee(C)?0:1};function K(C){const w=C.g.length,A=[];for(let V=0;V<w;V++)A[V]=~C.g[V];return new h(A,~C.h).add(U)}i.abs=function(){return X(this)?K(this):this},i.add=function(C){const w=Math.max(this.g.length,C.g.length),A=[];let V=0;for(let k=0;k<=w;k++){let x=V+(this.i(k)&65535)+(C.i(k)&65535),S=(x>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);V=S>>>16,x&=65535,S&=65535,A[k]=S<<16|x}return new h(A,A[A.length-1]&-2147483648?-1:0)};function ge(C,w){return C.add(K(w))}i.j=function(C){if(ee(this)||ee(C))return P;if(X(this))return X(C)?K(this).j(K(C)):K(K(this).j(C));if(X(C))return K(this.j(K(C)));if(this.l(q)<0&&C.l(q)<0)return v(this.m()*C.m());const w=this.g.length+C.g.length,A=[];for(var V=0;V<2*w;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<C.g.length;k++){const x=this.i(V)>>>16,S=this.i(V)&65535,$e=C.i(k)>>>16,yt=C.i(k)&65535;A[2*V+2*k]+=S*yt,ve(A,2*V+2*k),A[2*V+2*k+1]+=x*yt,ve(A,2*V+2*k+1),A[2*V+2*k+1]+=S*$e,ve(A,2*V+2*k+1),A[2*V+2*k+2]+=x*$e,ve(A,2*V+2*k+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new h(A,0)};function ve(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function Te(C,w){this.g=C,this.h=w}function xe(C,w){if(ee(w))throw Error("division by zero");if(ee(C))return new Te(P,P);if(X(C))return w=xe(K(C),w),new Te(K(w.g),K(w.h));if(X(w))return w=xe(C,K(w)),new Te(K(w.g),w.h);if(C.g.length>30){if(X(C)||X(w))throw Error("slowDivide_ only works with positive integers.");for(var A=U,V=w;V.l(C)<=0;)A=je(A),V=je(V);var k=B(A,1),x=B(V,1);for(V=B(V,2),A=B(A,2);!ee(V);){var S=x.add(V);S.l(C)<=0&&(k=k.add(A),x=S),V=B(V,1),A=B(A,1)}return w=ge(C,k.j(w)),new Te(k,w)}for(k=P;C.l(w)>=0;){for(A=Math.max(1,Math.floor(C.m()/w.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),x=v(A),S=x.j(w);X(S)||S.l(C)>0;)A-=V,x=v(A),S=x.j(w);ee(x)&&(x=U),k=k.add(x),C=ge(C,S)}return new Te(k,C)}i.B=function(C){return xe(this,C).h},i.and=function(C){const w=Math.max(this.g.length,C.g.length),A=[];for(let V=0;V<w;V++)A[V]=this.i(V)&C.i(V);return new h(A,this.h&C.h)},i.or=function(C){const w=Math.max(this.g.length,C.g.length),A=[];for(let V=0;V<w;V++)A[V]=this.i(V)|C.i(V);return new h(A,this.h|C.h)},i.xor=function(C){const w=Math.max(this.g.length,C.g.length),A=[];for(let V=0;V<w;V++)A[V]=this.i(V)^C.i(V);return new h(A,this.h^C.h)};function je(C){const w=C.g.length+1,A=[];for(let V=0;V<w;V++)A[V]=C.i(V)<<1|C.i(V-1)>>>31;return new h(A,C.h)}function B(C,w){const A=w>>5;w%=32;const V=C.g.length-A,k=[];for(let x=0;x<V;x++)k[x]=w>0?C.i(x+A)>>>w|C.i(x+A+1)<<32-w:C.i(x+A);return new h(k,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Yg=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=I,ri=h}).apply(typeof Tm<"u"?Tm:typeof self<"u"?self:typeof window<"u"?window:{});var Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jg,ra,Zg,iu,Bh,ey,ty,ny;(function(){var i,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yl=="object"&&Yl];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=t(this);function a(l,p){if(p)e:{var m=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in m))break e;m=m[L]}l=l[l.length-1],E=m[l],p=p(E),p!=E&&p!=null&&e(m,l,{configurable:!0,writable:!0,value:p})}}a("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(l){return l||function(p){var m=[],E;for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&m.push([E,p[E]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function g(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function y(l,p,m){return l.call.apply(l.bind,arguments)}function v(l,p,m){return v=y,v.apply(null,arguments)}function I(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function P(l,p){function m(){}m.prototype=p.prototype,l.Z=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(E,L,b){for(var J=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)J[ye-2]=arguments[ye];return p.prototype[L].apply(E,J)}}var U=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function q(l){const p=l.length;if(p>0){const m=Array(p);for(let E=0;E<p;E++)m[E]=l[E];return m}return[]}function ee(l,p){for(let E=1;E<arguments.length;E++){const L=arguments[E];var m=typeof L;if(m=m!="object"?m:L?Array.isArray(L)?"array":m:"null",m=="array"||m=="object"&&typeof L.length=="number"){m=l.length||0;const b=L.length||0;l.length=m+b;for(let J=0;J<b;J++)l[m+J]=L[J]}else l.push(L)}}class X{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function K(l){h.setTimeout(()=>{throw l},0)}function ge(){var l=C;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ve{constructor(){this.h=this.g=null}add(p,m){const E=Te.get();E.set(p,m),this.h?this.h.next=E:this.g=E,this.h=E}}var Te=new X(()=>new xe,l=>l.reset());class xe{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let je,B=!1,C=new ve,w=()=>{const l=Promise.resolve(void 0);je=()=>{l.then(A)}};function A(){for(var l;l=ge();){try{l.h.call(l.g)}catch(m){K(m)}var p=Te;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}B=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};h.addEventListener("test",m,p),h.removeEventListener("test",m,p)}catch{}return l})();function S(l){return/^[\s\xa0]*$/.test(l)}function $e(l,p){k.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}P($e,k),$e.prototype.init=function(l,p){const m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(m=="mouseover"?p=l.fromElement:m=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),kt=0;function Xe(l,p,m,E,L){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!E,this.ha=L,this.key=++kt,this.da=this.fa=!1}function Z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ce(l,p,m){for(const E in l)p.call(m,l[E],E,l)}function ie(l,p){for(const m in l)p.call(void 0,l[m],m,l)}function D(l){const p={};for(const m in l)p[m]=l[m];return p}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(l,p){let m,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(m in E)l[m]=E[m];for(let b=0;b<H.length;b++)m=H[b],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function we(l){this.src=l,this.g={},this.h=0}we.prototype.add=function(l,p,m,E,L){const b=l.toString();l=this.g[b],l||(l=this.g[b]=[],this.h++);const J=Ae(l,p,E,L);return J>-1?(p=l[J],m||(p.fa=!1)):(p=new Xe(p,this.src,b,!!E,L),p.fa=m,l.push(p)),p};function Se(l,p){const m=p.type;if(m in l.g){var E=l.g[m],L=Array.prototype.indexOf.call(E,p,void 0),b;(b=L>=0)&&Array.prototype.splice.call(E,L,1),b&&(Z(p),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Ae(l,p,m,E){for(let L=0;L<l.length;++L){const b=l[L];if(!b.da&&b.listener==p&&b.capture==!!m&&b.ha==E)return L}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ve={};function ze(l,p,m,E,L){if(Array.isArray(p)){for(let b=0;b<p.length;b++)ze(l,p[b],m,E,L);return null}return m=lo(m),l&&l[yt]?l.J(p,m,g(E)?!!E.capture:!1,L):Ft(l,p,m,!1,E,L)}function Ft(l,p,m,E,L,b){if(!p)throw Error("Invalid event type");const J=g(L)?!!L.capture:!!L;let ye=ts(l);if(ye||(l[Fe]=ye=new we(l)),m=ye.add(p,m,E,J,b),m.proxy)return m;if(E=Zi(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)x||(L=J),L===void 0&&(L=!1),l.addEventListener(p.toString(),E,L);else if(l.attachEvent)l.attachEvent(es(p.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Zi(){function l(m){return p.call(l.src,l.listener,m)}const p=Ma;return l}function ao(l,p,m,E,L){if(Array.isArray(p))for(var b=0;b<p.length;b++)ao(l,p[b],m,E,L);else E=g(E)?!!E.capture:!!E,m=lo(m),l&&l[yt]?(l=l.i,b=String(p).toString(),b in l.g&&(p=l.g[b],m=Ae(p,m,E,L),m>-1&&(Z(p[m]),Array.prototype.splice.call(p,m,1),p.length==0&&(delete l.g[b],l.h--)))):l&&(l=ts(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ae(p,m,E,L)),(m=l>-1?p[l]:null)&&Tr(m))}function Tr(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[yt])Se(p.i,l);else{var m=l.type,E=l.proxy;p.removeEventListener?p.removeEventListener(m,E,l.capture):p.detachEvent?p.detachEvent(es(m),E):p.addListener&&p.removeListener&&p.removeListener(E),(m=ts(p))?(Se(m,l),m.h==0&&(m.src=null,p[Fe]=null)):Z(l)}}}function es(l){return l in Ve?Ve[l]:Ve[l]="on"+l}function Ma(l,p){if(l.da)l=!0;else{p=new $e(p,this);const m=l.listener,E=l.ha||l.src;l.fa&&Tr(l),l=m.call(E,p)}return l}function ts(l){return l=l[Fe],l instanceof we?l:null}var di="__closure_events_fn_"+(Math.random()*1e9>>>0);function lo(l){return typeof l=="function"?l:(l[di]||(l[di]=function(p){return l.handleEvent(p)}),l[di])}function at(){V.call(this),this.i=new we(this),this.M=this,this.G=null}P(at,V),at.prototype[yt]=!0,at.prototype.removeEventListener=function(l,p,m,E){ao(this,l,p,m,E)};function rt(l,p){var m,E=l.G;if(E)for(m=[];E;E=E.G)m.push(E);if(l=l.M,E=p.type||p,typeof p=="string")p=new k(p,l);else if(p instanceof k)p.target=p.target||l;else{var L=p;p=new k(E,l),Ee(p,L)}L=!0;let b,J;if(m)for(J=m.length-1;J>=0;J--)b=p.g=m[J],L=gn(b,E,!0,p)&&L;if(b=p.g=l,L=gn(b,E,!0,p)&&L,L=gn(b,E,!1,p)&&L,m)for(J=0;J<m.length;J++)b=p.g=m[J],L=gn(b,E,!1,p)&&L}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const m=l.g[p];for(let E=0;E<m.length;E++)Z(m[E]);delete l.g[p],l.h--}}this.G=null},at.prototype.J=function(l,p,m,E){return this.i.add(String(l),p,!1,m,E)},at.prototype.K=function(l,p,m,E){return this.i.add(String(l),p,!0,m,E)};function gn(l,p,m,E){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let b=0;b<p.length;++b){const J=p[b];if(J&&!J.da&&J.capture==m){const ye=J.listener,it=J.ha||J.src;J.fa&&Se(l.i,J),L=ye.call(it,E)!==!1&&L}}return L&&!E.defaultPrevented}function uo(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(l,p||0)}function co(l){l.g=uo(()=>{l.g=null,l.i&&(l.i=!1,co(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Fa extends V{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:co(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(l){V.call(this),this.h=l,this.g={}}P(Ir,V);var ho=[];function ns(l){ce(l.g,function(p,m){this.g.hasOwnProperty(m)&&Tr(p)},l),l.g={}}Ir.prototype.N=function(){Ir.Z.N.call(this),ns(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=h.JSON.stringify,ba=h.JSON.parse,pi=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function Ar(){}function Ua(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rs(){k.call(this,"d")}P(rs,k);function fo(){k.call(this,"c")}P(fo,k);var yn={},is=null;function Rr(){return is=is||new at}yn.Ia="serverreachability";function ss(l){k.call(this,yn.Ia,l)}P(ss,k);function er(l){const p=Rr();rt(p,new ss(p))}yn.STAT_EVENT="statevent";function tr(l,p){k.call(this,yn.STAT_EVENT,l),this.stat=p}P(tr,k);function tt(l){const p=Rr();rt(p,new tr(p,l))}yn.Ja="timingevent";function po(l,p){k.call(this,yn.Ja,l),this.size=p}P(po,k);function Pr(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},p)}function kr(){this.g=!0}kr.prototype.ua=function(){this.g=!1};function ja(l,p,m,E,L,b){l.info(function(){if(l.g)if(b){var J="",ye=b.split("&");for(let Ue=0;Ue<ye.length;Ue++){var it=ye[Ue].split("=");if(it.length>1){const lt=it[0];it=it[1];const en=lt.split("_");J=en.length>=2&&en[1]=="type"?J+(lt+"="+it+"&"):J+(lt+"=redacted&")}}}else J=null;else J=b;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+p+`
`+m+`
`+J})}function za(l,p,m,E,L,b,J){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+p+`
`+m+`
`+b+" "+J})}function Nn(l,p,m,E){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+mi(l,m)+(E?" "+E:"")})}function Ba(l,p){l.info(function(){return"TIMEOUT: "+p})}kr.prototype.info=function(){};function mi(l,p){if(!l.g)return p;if(!p)return null;try{const b=JSON.parse(p);if(b){for(l=0;l<b.length;l++)if(Array.isArray(b[l])){var m=b[l];if(!(m.length<2)){var E=m[1];if(Array.isArray(E)&&!(E.length<1)){var L=E[0];if(L!="noop"&&L!="stop"&&L!="close")for(let J=1;J<E.length;J++)E[J]=""}}}}return Sr(b)}catch{return p}}var Nr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$a;function nr(){}P(nr,Ar),nr.prototype.g=function(){return new XMLHttpRequest},$a=new nr;function Vn(l){return encodeURIComponent(String(l))}function os(l){var p=1;l=l.split(":");const m=[];for(;p>0&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function sn(l,p,m,E){this.j=l,this.i=p,this.l=m,this.S=E||1,this.V=new Ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qa}function qa(){this.i=null,this.g="",this.h=!1}var Ha={},mo={};function _n(l,p,m){l.M=1,l.A=ir(on(p)),l.u=m,l.R=!0,go(l,null)}function go(l,p){l.F=Date.now(),gi(l),l.B=on(l.A);var m=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),Co(m.i,"t",E),l.C=0,m=l.j.L,l.h=new qa,l.g=tl(l.j,m?p:null,!l.u),l.P>0&&(l.O=new Fa(v(l.Y,l,l.g),l.P)),p=l.V,m=l.g,E=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(ho[0]=L.toString()),L=ho);for(let b=0;b<L.length;b++){const J=ze(m,L[b],E||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=l.J?D(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),er(),ja(l.i,l.v,l.B,l.l,l.S,l.u)}sn.prototype.ba=function(l){l=l.target;const p=this.O;p&&bn(l)==3?p.j():this.Y(l)},sn.prototype.Y=function(l){try{if(l==this.g)e:{const ye=bn(this.g),it=this.g.ya(),Ue=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Za(this.g)))){this.K||ye!=4||it==7||(it==8||Ue<=0?er(3):er(2)),as(this);var p=this.g.ca();this.X=p;var m=Wa(this);if(this.o=p==200,za(this.i,this.v,this.B,this.l,this.S,ye,p),this.o){if(this.U&&!this.L){t:{if(this.g){var E,L=this.g;if((E=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(E)){var b=E;break t}}b=null}if(l=b)Nn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,l);else{this.o=!1,this.m=3,tt(12),rr(this),yi(this);break e}}if(this.R){l=!0;let lt;for(;!this.K&&this.C<m.length;)if(lt=Ga(this,m),lt==mo){ye==4&&(this.m=4,tt(14),l=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==Ha){this.m=4,tt(15),Nn(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else Nn(this.i,this.l,lt,null),We(this,lt);if(Ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||m.length!=0||this.h.h||(this.m=1,tt(16),l=!1),this.o=this.o&&l,!l)Nn(this.i,this.l,m,"[Invalid Chunked Response]"),rr(this),yi(this);else if(m.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Ci(J),J.P=!0,tt(11))}}else Nn(this.i,this.l,m,null),We(this,m);ye==4&&rr(this),this.o&&!this.K&&(ye==4?ys(this.j,this):(this.o=!1,gi(this)))}else Po(this.g),p==400&&m.indexOf("Unknown SID")>0?(this.m=3,tt(12)):(this.m=0,tt(13)),rr(this),yi(this)}}}catch{}finally{}};function Wa(l){if(!Ka(l))return l.g.la();const p=Za(l.g);if(p==="")return"";let m="";const E=p.length,L=bn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return rr(l),yi(l),"";l.h.i=new h.TextDecoder}for(let b=0;b<E;b++)l.h.h=!0,m+=l.h.i.decode(p[b],{stream:!(L&&b==E-1)});return p.length=0,l.h.g+=m,l.C=0,l.h.g}function Ka(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Ga(l,p){var m=l.C,E=p.indexOf(`
`,m);return E==-1?mo:(m=Number(p.substring(m,E)),isNaN(m)?Ha:(E+=1,E+m>p.length?mo:(p=p.slice(E,E+m),l.C=E+m,p)))}sn.prototype.cancel=function(){this.K=!0,rr(this)};function gi(l){l.T=Date.now()+l.H,yo(l,l.H)}function yo(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Pr(v(l.aa,l),p)}function as(l){l.D&&(h.clearTimeout(l.D),l.D=null)}sn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(Ba(this.i,this.B),this.M!=2&&(er(),tt(17)),rr(this),this.m=2,yi(this)):yo(this,this.T-l)};function yi(l){l.j.I==0||l.K||ys(l.j,l)}function rr(l){as(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,ns(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function We(l,p){try{var m=l.j;if(m.I!=0&&(m.g==l||vo(m.h,l))){if(!l.L&&vo(m.h,l)&&m.I==3){try{var E=m.Ba.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)gs(m),Jt(m);else break e;zn(m),tt(18)}}else m.xa=L[1],0<m.xa-m.K&&L[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Pr(v(m.Va,m),6e3));_i(m.h)<=1&&m.ta&&(m.ta=void 0)}else Zt(m,11)}else if((l.L||m.g==l)&&gs(m),!S(p))for(L=m.Ba.g.parse(p),p=0;p<L.length;p++){let Ue=L[p];const lt=Ue[0];if(!(lt<=m.K))if(m.K=lt,Ue=Ue[1],m.I==2)if(Ue[0]=="c"){m.M=Ue[1],m.ba=Ue[2];const en=Ue[3];en!=null&&(m.ka=en,m.j.info("VER="+m.ka));const ur=Ue[4];ur!=null&&(m.za=ur,m.j.info("SVER="+m.za));const Bn=Ue[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(E=1.5*Bn,m.O=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const $n=l.g;if($n){const Es=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var b=E.h;b.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(us(b,b.h),b.h=null))}if(E.G){const Vo=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(E.wa=Vo,Le(E.J,E.G,Vo))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),E=m;var J=l;if(E.na=No(E,E.L?E.ba:null,E.W),J.L){vi(E.h,J);var ye=J,it=E.O;it&&(ye.H=it),ye.D&&(as(ye),gi(ye)),E.g=J}else Nt(E);m.i.length>0&&lr(m)}else Ue[0]!="stop"&&Ue[0]!="close"||Zt(m,7);else m.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Zt(m,7):ps(m):Ue[0]!="noop"&&m.l&&m.l.qa(Ue),m.A=0)}}er(4)}catch{}}var Gu=class{constructor(l,p){this.g=l,this.map=p}};function ls(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _o(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _i(l){return l.h?1:l.g?l.g.size:0}function vo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function us(l,p){l.g?l.g.add(p):l.h=p}function vi(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}ls.prototype.cancel=function(){if(this.i=Qt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Qt(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const m of l.g.values())p=p.concat(m.G);return p}return q(l.i)}var Qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(l,p){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const E=l[m].indexOf("=");let L,b=null;E>=0?(L=l[m].substring(0,E),b=l[m].substring(E+1)):L=l[m],p(L,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Dn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Dn?(this.l=l.l,Ei(this,l.j),this.o=l.o,this.g=l.g,xn(this,l.u),this.h=l.h,Dr(this,Ro(l.i)),this.m=l.m):l&&(p=String(l).match(Qa))?(this.l=!1,Ei(this,p[1]||"",!0),this.o=wi(p[2]||""),this.g=wi(p[3]||"",!0),xn(this,p[4]),this.h=wi(p[5]||"",!0),Dr(this,p[6]||"",!0),this.m=wi(p[7]||"")):(this.l=!1,this.i=new ke(null,this.l))}Dn.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(Ti(p,wo,!0),":");var m=this.g;return(m||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Ti(p,wo,!0),"@"),l.push(Vn(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Ti(m,m.charAt(0)=="/"?Ii:To,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Ti(m,Io)),l.join("")},Dn.prototype.resolve=function(l){const p=on(this);let m=!!l.j;m?Ei(p,l.j):m=!!l.o,m?p.o=l.o:m=!!l.g,m?p.g=l.g:m=l.u!=null;var E=l.h;if(m)xn(p,l.u);else if(m=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var L=p.h.lastIndexOf("/");L!=-1&&(E=p.h.slice(0,L+1)+E)}if(L=E,L==".."||L==".")E="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){E=L.lastIndexOf("/",0)==0,L=L.split("/");const b=[];for(let J=0;J<L.length;){const ye=L[J++];ye=="."?E&&J==L.length&&b.push(""):ye==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),E&&J==L.length&&b.push("")):(b.push(ye),E=!0)}E=b.join("/")}else E=L}return m?p.h=E:m=l.i.toString()!=="",m?Dr(p,Ro(l.i)):m=!!l.m,m&&(p.m=l.m),p};function on(l){return new Dn(l)}function Ei(l,p,m){l.j=m?wi(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function xn(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Dr(l,p,m){p instanceof ke?(l.i=p,hs(l.i,l.l)):(m||(p=Ti(p,Qu)),l.i=new ke(p,l.l))}function Le(l,p,m){l.i.set(p,m)}function ir(l){return Le(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function wi(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ti(l,p,m){return typeof l=="string"?(l=encodeURI(l).replace(p,Eo),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Eo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var wo=/[#\/\?@]/g,To=/[#\?:]/g,Ii=/[#\?]/g,Qu=/[#\?@]/g,Io=/#/g;function ke(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function On(l){l.g||(l.g=new Map,l.h=0,l.i&&Xt(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}i=ke.prototype,i.add=function(l,p){On(this),this.i=null,l=Ln(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this};function So(l,p){On(l),p=Ln(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function cs(l,p){return On(l),p=Ln(l,p),l.g.has(p)}i.forEach=function(l,p){On(this),this.g.forEach(function(m,E){m.forEach(function(L){l.call(p,L,E,this)},this)},this)};function Ao(l,p){On(l);let m=[];if(typeof p=="string")cs(l,p)&&(m=m.concat(l.g.get(Ln(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)m=m.concat(l[p]);return m}i.set=function(l,p){return On(this),this.i=null,l=Ln(this,l),cs(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},i.get=function(l,p){return l?(l=Ao(this,l),l.length>0?String(l[0]):p):p};function Co(l,p,m){So(l,p),m.length>0&&(l.i=null,l.g.set(Ln(l,p),q(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let E=0;E<p.length;E++){var m=p[E];const L=Vn(m);m=Ao(this,m);for(let b=0;b<m.length;b++){let J=L;m[b]!==""&&(J+="="+Vn(m[b])),l.push(J)}}return this.i=l.join("&")};function Ro(l){const p=new ke;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function Ln(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function hs(l,p){p&&!l.j&&(On(l),l.i=null,l.g.forEach(function(m,E){const L=E.toLowerCase();E!=L&&(So(this,E),Co(this,L,m))},l)),l.j=p}function Mn(l,p){const m=new kr;if(h.Image){const E=new Image;E.onload=I(Tt,m,"TestLoadImage: loaded",!0,p,E),E.onerror=I(Tt,m,"TestLoadImage: error",!1,p,E),E.onabort=I(Tt,m,"TestLoadImage: abort",!1,p,E),E.ontimeout=I(Tt,m,"TestLoadImage: timeout",!1,p,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else p(!1)}function Fn(l,p){const m=new kr,E=new AbortController,L=setTimeout(()=>{E.abort(),Tt(m,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:E.signal}).then(b=>{clearTimeout(L),b.ok?Tt(m,"TestPingServer: ok",!0,p):Tt(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Tt(m,"TestPingServer: error",!1,p)})}function Tt(l,p,m,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(m)}catch{}}function Si(){this.g=new pi}function sr(l){this.i=l.Sb||null,this.h=l.ab||!1}P(sr,Ar),sr.prototype.g=function(){return new Yt(this.i,this.h)};function Yt(l,p){at.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}P(Yt,at),i=Yt.prototype,i.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,vn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},i.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,vn(this)),this.g&&(this.readyState=3,vn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xa(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xa(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}i.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?xr(this):vn(this),this.readyState==3&&Xa(this)}},i.Oa=function(l){this.g&&(this.response=this.responseText=l,xr(this))},i.Na=function(l){this.g&&(this.response=l,xr(this))},i.ga=function(){this.g&&xr(this)};function xr(l){l.readyState=4,l.l=null,l.j=null,l.B=null,vn(l)}i.setRequestHeader=function(l,p){this.A.append(l,p)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=p.next();return l.join(`\r
`)};function vn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Yt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ya(l){let p="";return ce(l,function(m,E){p+=E,p+=":",p+=m,p+=`\r
`}),p}function fs(l,p,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Ya(m),typeof l=="string"?m!=null&&Vn(m):Le(l,p,m))}function Be(l){at.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}P(Be,at);var Ja=/^https?$/i,Xu=["POST","PUT"];i=Be.prototype,i.Fa=function(l){this.H=l},i.ea=function(l,p,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$a.g(),this.g.onreadystatechange=U(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(b){Or(this,b);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)m.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const b of E.keys())m.set(b,E.get(b));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(b=>b.toLowerCase()=="content-type"),L=h.FormData&&l instanceof h.FormData,!(Array.prototype.indexOf.call(Xu,p,void 0)>=0)||E||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,J]of m)this.g.setRequestHeader(b,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(b){Or(this,b)}};function Or(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Lr(l),ar(l)}function Lr(l){l.A||(l.A=!0,rt(l,"complete"),rt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,rt(this,"complete"),rt(this,"abort"),ar(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),Be.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?or(this):this.Xa())},i.Xa=function(){or(this)};function or(l){if(l.h&&typeof c<"u"){if(l.v&&bn(l)==4)setTimeout(l.Ca.bind(l),0);else if(rt(l,"readystatechange"),bn(l)==4){l.h=!1;try{const b=l.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var E;if(E=b===0){let J=String(l.D).match(Qa)[1]||null;!J&&h.self&&h.self.location&&(J=h.self.location.protocol.slice(0,-1)),E=!Ja.test(J?J.toLowerCase():"")}m=E}if(m)rt(l,"complete"),rt(l,"success");else{l.o=6;try{var L=bn(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",Lr(l)}}finally{ar(l)}}}}function ar(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,p||rt(l,"ready");try{m.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function bn(l){return l.g?l.g.readyState:0}i.ca=function(){try{return bn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),ba(p)}};function Za(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Po(l){const p={};l=(l.g&&bn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(S(l[E]))continue;var m=os(l[E]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const b=p[L]||[];p[L]=b,b.push(m)}ie(p,function(E){return E.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function ds(l){this.za=0,this.i=[],this.j=new kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Un("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Un("baseRetryDelayMs",5e3,l),this.Za=Un("retryDelaySeedMs",1e4,l),this.Ta=Un("forwardChannelMaxRetries",2,l),this.va=Un("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new ls(l&&l.concurrentRequestLimit),this.Ba=new Si,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ds.prototype,i.ka=8,i.I=1,i.connect=function(l,p,m,E){tt(0),this.W=l,this.H=p||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.J=No(this,null,this.W),lr(this)};function ps(l){if(ms(l),l.I==3){var p=l.V++,m=on(l.J);if(Le(m,"SID",l.M),Le(m,"RID",p),Le(m,"TYPE","terminate"),jn(l,m),p=new sn(l,l.j,p),p.M=2,p.A=ir(on(m)),m=!1,h.navigator&&h.navigator.sendBeacon)try{m=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!m&&h.Image&&(new Image().src=p.A,m=!0),m||(p.g=tl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),gi(p)}Ri(l)}function Jt(l){l.g&&(Ci(l),l.g.cancel(),l.g=null)}function ms(l){Jt(l),l.v&&(h.clearTimeout(l.v),l.v=null),gs(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&h.clearTimeout(l.m),l.m=null)}function lr(l){if(!_o(l.h)&&!l.m){l.m=!0;var p=l.Ea;je||w(),B||(je(),B=!0),C.add(p,l),l.D=0}}function el(l,p){return _i(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Pr(v(l.Ea,l,p),_s(l,l.D)),l.D++,!0)}i.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new sn(this,this.j,l);let b=this.o;if(this.U&&(b?(b=D(b),Ee(b,this.U)):b=this.U),this.u!==null||this.R||(L.J=b,b=null),this.S)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,p>4096){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=ko(this,L,p),m=on(this.J),Le(m,"RID",l),Le(m,"CVER",22),this.G&&Le(m,"X-HTTP-Session-Id",this.G),jn(this,m),b&&(this.R?p="headers="+Vn(Ya(b))+"&"+p:this.u&&fs(m,this.u,b)),us(this.h,L),this.Ra&&Le(m,"TYPE","init"),this.S?(Le(m,"$req",p),Le(m,"SID","null"),L.U=!0,_n(L,m,null)):_n(L,m,p),this.I=2}}else this.I==3&&(l?Ai(this,l):this.i.length==0||_o(this.h)||Ai(this))};function Ai(l,p){var m;p?m=p.l:m=l.V++;const E=on(l.J);Le(E,"SID",l.M),Le(E,"RID",m),Le(E,"AID",l.K),jn(l,E),l.u&&l.o&&fs(E,l.u,l.o),m=new sn(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),p&&(l.i=p.G.concat(l.i)),p=ko(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),us(l.h,m),_n(m,E,p)}function jn(l,p){l.H&&ce(l.H,function(m,E){Le(p,E,m)}),l.l&&ce({},function(m,E){Le(p,E,m)})}function ko(l,p,m){m=Math.min(l.i.length,m);const E=l.l?v(l.l.Ka,l.l,l):null;e:{var L=l.i;let ye=-1;for(;;){const it=["count="+m];ye==-1?m>0?(ye=L[0].g,it.push("ofs="+ye)):ye=0:it.push("ofs="+ye);let Ue=!0;for(let lt=0;lt<m;lt++){var b=L[lt].g;const en=L[lt].map;if(b-=ye,b<0)ye=Math.max(0,L[lt].g-100),Ue=!1;else try{b="req"+b+"_"||"";try{var J=en instanceof Map?en:Object.entries(en);for(const[ur,Bn]of J){let $n=Bn;g(Bn)&&($n=Sr(Bn)),it.push(b+ur+"="+encodeURIComponent($n))}}catch(ur){throw it.push(b+"type="+encodeURIComponent("_badmap")),ur}}catch{E&&E(en)}}if(Ue){J=it.join("&");break e}}J=void 0}return l=l.i.splice(0,m),p.G=l,J}function Nt(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;je||w(),B||(je(),B=!0),C.add(p,l),l.A=0}}function zn(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Pr(v(l.Da,l),_s(l,l.A)),l.A++,!0)}i.Da=function(){if(this.v=null,Mr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Pr(v(this.Wa,this),l)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tt(10),Jt(this),Mr(this))};function Ci(l){l.B!=null&&(h.clearTimeout(l.B),l.B=null)}function Mr(l){l.g=new sn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=on(l.na);Le(p,"RID","rpc"),Le(p,"SID",l.M),Le(p,"AID",l.K),Le(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Le(p,"TO",l.ia),Le(p,"TYPE","xmlhttp"),jn(l,p),l.u&&l.o&&fs(p,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=ir(on(p)),m.u=null,m.R=!0,go(m,l)}i.Va=function(){this.C!=null&&(this.C=null,Jt(this),zn(this),tt(19))};function gs(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function ys(l,p){var m=null;if(l.g==p){gs(l),Ci(l),l.g=null;var E=2}else if(vo(l.h,p))m=p.G,vi(l.h,p),E=1;else return;if(l.I!=0){if(p.o)if(E==1){m=p.u?p.u.length:0,p=Date.now()-p.F;var L=l.D;E=Rr(),rt(E,new po(E,m)),lr(l)}else Nt(l);else if(L=p.m,L==3||L==0&&p.X>0||!(E==1&&el(l,p)||E==2&&zn(l)))switch(m&&m.length>0&&(p=l.h,p.i=p.i.concat(m)),L){case 1:Zt(l,5);break;case 4:Zt(l,10);break;case 3:Zt(l,6);break;default:Zt(l,2)}}}function _s(l,p){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*p}function Zt(l,p){if(l.j.info("Error code "+p),p==2){var m=v(l.bb,l),E=l.Ua;const L=!E;E=new Dn(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ei(E,"https"),ir(E),L?Mn(E.toString(),m):Fn(E.toString(),m)}else tt(2);l.I=0,l.l&&l.l.pa(p),Ri(l),ms(l)}i.bb=function(l){l?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Ri(l){if(l.I=0,l.ja=[],l.l){const p=Qt(l.h);(p.length!=0||l.i.length!=0)&&(ee(l.ja,p),ee(l.ja,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.oa()}}function No(l,p,m){var E=m instanceof Dn?on(m):new Dn(m);if(E.g!="")p&&(E.g=p+"."+E.g),xn(E,E.u);else{var L=h.location;E=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const b=new Dn(null);E&&Ei(b,E),p&&(b.g=p),L&&xn(b,L),m&&(b.h=m),E=b}return m=l.G,p=l.wa,m&&p&&Le(E,m,p),Le(E,"VER",l.ka),jn(l,E),E}function tl(l,p,m){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new Be(new sr({ab:m})):new Be(l.ma),p.Fa(l.L),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function nl(){}i=nl.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function vs(){}vs.prototype.g=function(l,p){return new It(l,p)};function It(l,p){at.call(this),this.g=new ds(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!S(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Fr(this)}P(It,at),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){ps(this.g)},It.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=Sr(l),l=m);p.i.push(new Gu(p.Ya++,l)),p.I==3&&lr(p)},It.prototype.N=function(){this.g.l=null,delete this.j,ps(this.g),delete this.g,It.Z.N.call(this)};function rl(l){rs.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}P(rl,rs);function il(){fo.call(this),this.status=1}P(il,fo);function Fr(l){this.g=l}P(Fr,nl),Fr.prototype.ra=function(){rt(this.g,"a")},Fr.prototype.qa=function(l){rt(this.g,new rl(l))},Fr.prototype.pa=function(l){rt(this.g,new il)},Fr.prototype.oa=function(){rt(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,ny=function(){return new vs},ty=function(){return Rr()},ey=yn,Bh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,iu=Nr,Vr.COMPLETE="complete",Zg=Vr,Ua.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",at.prototype.listen=at.prototype.J,ra=Ua,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,Jg=Be}).apply(typeof Yl<"u"?Yl:typeof self<"u"?self:typeof window<"u"?window:{});const Im="@firebase/firestore",Sm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new cf("@firebase/firestore");function zs(){return Ki.logLevel}function re(i,...e){if(Ki.logLevel<=Ce.DEBUG){const t=e.map(ff);Ki.debug(`Firestore (${no}): ${i}`,...t)}}function Er(i,...e){if(Ki.logLevel<=Ce.ERROR){const t=e.map(ff);Ki.error(`Firestore (${no}): ${i}`,...t)}}function ya(i,...e){if(Ki.logLevel<=Ce.WARN){const t=e.map(ff);Ki.warn(`Firestore (${no}): ${i}`,...t)}}function ff(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,ry(i,s,t)}function ry(i,e,t){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Er(s),new Error(s)}function be(i,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,i||ry(e,a,s)}function _e(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class Ww{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let s=this.i;const a=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let c=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qi,e.enqueueRetryable((()=>a(this.currentUser)))};const h=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},g=y=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(be(typeof s.accessToken=="string",31837,{l:s}),new qw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class Kw{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Gw{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Kw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Am{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);const s=c=>{c.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Am(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Am(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=Xw(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function Re(i,e){return i<e?-1:i>e?1:0}function $h(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const a=i.charAt(s),c=e.charAt(s);if(a!==c)return Sh(a)===Sh(c)?Re(a,c):Sh(a)?1:-1}return Re(i.length,e.length)}const Yw=55296,Jw=57343;function Sh(i){const e=i.charCodeAt(0);return e>=Yw&&e<=Jw}function Ys(i,e,t){return i.length===e.length&&i.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="__name__";class Gn{constructor(e,t,s){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&de(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Gn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=Gn.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Re(e.length,t.length)}static compareSegments(e,t){const s=Gn.isNumericId(e),a=Gn.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Gn.extractNumericId(e).compare(Gn.extractNumericId(t)):$h(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ri.fromString(e.substring(4,e.length-2))}}class He extends Gn{construct(e,t,s){return new He(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const Zw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Gn{construct(e,t,s){return new Rt(e,t,s)}static isValidIdentifier(e){return Zw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cm}static keyField(){return new Rt([Cm])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else g==="`"?(h=!h,a++):g!=="."||h?(s+=g,a++):(c(),a++)}if(c(),h)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(He.fromString(e))}static fromName(e){return new ue(He.fromString(e).popFirst(5))}static empty(){return new ue(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(i,e,t){if(!t)throw new te(z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function eT(i,e,t,s){if(e===!0&&s===!0)throw new te(z.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Rm(i){if(!ue.isDocumentKey(i))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Pm(i){if(ue.isDocumentKey(i))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sy(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ou(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":de(12329,{type:typeof i})}function aa(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ou(i);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(i,e){const t={typeString:i};return e&&(t.value=e),t}function Pa(i,e){if(!sy(i))throw new te(z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const h=i[s];if(a&&typeof h!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new te(z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=-62135596800,Nm=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Nm);return new Qe(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<km)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nm}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pa(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-km;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:ft("string",Qe._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Qe(0,0))}static max(){return new me(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=-1;function tT(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=me.fromTimestamp(s===1e9?new Qe(t+1,0):new Qe(t,s));return new si(a,ue.empty(),e)}function nT(i){return new si(i.readTime,i.key,_a)}class si{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new si(me.min(),ue.empty(),_a)}static max(){return new si(me.max(),ue.empty(),_a)}}function rT(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(i.documentKey,e.documentKey),t!==0?t:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(i){if(i.code!==z.FAILED_PRECONDITION||i.message!==iT)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,s)=>{t(e)}))}static reject(e){return new $(((t,s)=>{s(e)}))}static waitFor(e){return new $(((t,s)=>{let a=0,c=0,h=!1;e.forEach((g=>{++a,g.next((()=>{++c,h&&c===a&&t()}),(y=>s(y)))})),h=!0,c===a&&t()}))}static or(e){let t=$.resolve(!1);for(const s of e)t=t.next((a=>a?$.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new $(((s,a)=>{const c=e.length,h=new Array(c);let g=0;for(let y=0;y<c;y++){const v=y;t(e[v]).next((I=>{h[v]=I,++g,g===c&&s(h)}),(I=>a(I)))}}))}static doWhile(e,t){return new $(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function oT(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function io(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=-1;function Mu(i){return i==null}function hu(i){return i===0&&1/i==-1/0}function aT(i){return typeof i=="number"&&Number.isInteger(i)&&!hu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="";function lT(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Vm(e)),e=uT(i.get(t),e);return Vm(e)}function uT(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="";break;case oy:t+="";break;default:t+=c}}return t}function Vm(i){return i+oy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Qi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ay(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||Ct.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jl(this.root,e,this.comparator,!0)}}class Jl{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??Ct.RED,this.left=a??Ct.EMPTY,this.right=c??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new Ct(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Ct.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new Ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xm(this.data.getIterator())}getIteratorFrom(e){return new xm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class xm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new gt(Rt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ly("Invalid base64 string: "+c):c}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const cT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(i){if(be(!!i,39018),typeof i=="string"){let e=0;const t=cT.exec(i);if(be(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ot(i.seconds),nanos:ot(i.nanos)}}function ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ai(i){return typeof i=="string"?Pt.fromBase64String(i):Pt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="server_timestamp",cy="__type__",hy="__previous_value__",fy="__local_write_time__";function mf(i){return(i?.mapValue?.fields||{})[cy]?.stringValue===uy}function Fu(i){const e=i.mapValue.fields[hy];return mf(e)?Fu(e):e}function va(i){const e=oi(i.mapValue.fields[fy].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t,s,a,c,h,g,y,v,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=I}}const fu="(default)";class Ea{constructor(e,t){this.projectId=e,this.database=t||fu}static empty(){return new Ea("","")}get isDefaultDatabase(){return this.database===fu}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="__type__",fT="__max__",Zl={mapValue:{}},py="__vector__",du="value";function li(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?mf(i)?4:pT(i)?9007199254740991:dT(i)?10:11:de(28295,{value:i})}function Zn(i,e){if(i===e)return!0;const t=li(i);if(t!==li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return va(i).isEqual(va(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=oi(a.timestampValue),g=oi(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return ai(a.bytesValue).isEqual(ai(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return ot(a.geoPointValue.latitude)===ot(c.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return ot(a.integerValue)===ot(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=ot(a.doubleValue),g=ot(c.doubleValue);return h===g?hu(h)===hu(g):isNaN(h)&&isNaN(g)}return!1})(i,e);case 9:return Ys(i.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return(function(a,c){const h=a.mapValue.fields||{},g=c.mapValue.fields||{};if(Dm(h)!==Dm(g))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(g[y]===void 0||!Zn(h[y],g[y])))return!1;return!0})(i,e);default:return de(52216,{left:i})}}function wa(i,e){return(i.values||[]).find((t=>Zn(t,e)))!==void 0}function Js(i,e){if(i===e)return 0;const t=li(i),s=li(e);if(t!==s)return Re(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return(function(c,h){const g=ot(c.integerValue||c.doubleValue),y=ot(h.integerValue||h.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(i,e);case 3:return Om(i.timestampValue,e.timestampValue);case 4:return Om(va(i),va(e));case 5:return $h(i.stringValue,e.stringValue);case 6:return(function(c,h){const g=ai(c),y=ai(h);return g.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,h){const g=c.split("/"),y=h.split("/");for(let v=0;v<g.length&&v<y.length;v++){const I=Re(g[v],y[v]);if(I!==0)return I}return Re(g.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,h){const g=Re(ot(c.latitude),ot(h.latitude));return g!==0?g:Re(ot(c.longitude),ot(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Lm(i.arrayValue,e.arrayValue);case 10:return(function(c,h){const g=c.fields||{},y=h.fields||{},v=g[du]?.arrayValue,I=y[du]?.arrayValue,P=Re(v?.values?.length||0,I?.values?.length||0);return P!==0?P:Lm(v,I)})(i.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Zl.mapValue&&h===Zl.mapValue)return 0;if(c===Zl.mapValue)return 1;if(h===Zl.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),v=h.fields||{},I=Object.keys(v);y.sort(),I.sort();for(let P=0;P<y.length&&P<I.length;++P){const U=$h(y[P],I[P]);if(U!==0)return U;const q=Js(g[y[P]],v[I[P]]);if(q!==0)return q}return Re(y.length,I.length)})(i.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function Om(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const t=oi(i),s=oi(e),a=Re(t.seconds,s.seconds);return a!==0?a:Re(t.nanos,s.nanos)}function Lm(i,e){const t=i.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Js(t[a],s[a]);if(c)return c}return Re(t.length,s.length)}function Zs(i){return qh(i)}function qh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=oi(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return ai(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ue.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=qh(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const h of s)c?c=!1:a+=",",a+=`${h}:${qh(t.fields[h])}`;return a+"}"})(i.mapValue):de(61005,{value:i})}function su(i){switch(li(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fu(i);return e?16+su(e):16;case 5:return 2*i.stringValue.length;case 6:return ai(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+su(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return Qi(s.fields,((c,h)=>{a+=c.length+su(h)})),a})(i.mapValue);default:throw de(13486,{value:i})}}function Mm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Hh(i){return!!i&&"integerValue"in i}function gf(i){return!!i&&"arrayValue"in i}function Fm(i){return!!i&&"nullValue"in i}function bm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ou(i){return!!i&&"mapValue"in i}function dT(i){return(i?.mapValue?.fields||{})[dy]?.stringValue===py}function la(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Qi(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=la(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=la(i.arrayValue.values[t]);return e}return{...i}}function pT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===fT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(t)}setAll(e){let t=Rt.emptyPath(),s={},a=[];e.forEach(((h,g)=>{if(!t.isImmediateParentOf(g)){const y=this.getFieldsMap(t);this.applyChanges(y,s,a),s={},a=[],t=g.popLast()}h?s[g.lastSegment()]=la(h):a.push(g.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ou(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Qi(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new dn(la(this.value))}}function my(i){const e=[];return Qi(i.fields,((t,s)=>{const a=new Rt([t]);if(ou(s)){const c=my(s.mapValue).fields;if(c.length===0)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t,s,a,c,h,g){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Mt(e,0,me.min(),me.min(),me.min(),dn.empty(),0)}static newFoundDocument(e,t,s,a){return new Mt(e,1,t,me.min(),s,a,0)}static newNoDocument(e,t){return new Mt(e,2,t,me.min(),me.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Mt(e,3,t,me.min(),me.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.position=e,this.inclusive=t}}function Um(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],h=i.position[a];if(c.field.isKeyField()?s=ue.comparator(ue.fromName(h.referenceValue),t.key):s=Js(h,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function jm(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Zn(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t="asc"){this.field=e,this.dir=t}}function mT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{}class ht extends gy{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new yT(e,t,s):t==="array-contains"?new ET(e,s):t==="in"?new wT(e,s):t==="not-in"?new TT(e,s):t==="array-contains-any"?new IT(e,s):new ht(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new _T(e,s):new vT(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Js(t,this.value)):t!==null&&li(this.value)===li(t)&&this.matchesComparison(Js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends gy{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new kn(e,t)}matches(e){return yy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yy(i){return i.op==="and"}function _y(i){return gT(i)&&yy(i)}function gT(i){for(const e of i.filters)if(e instanceof kn)return!1;return!0}function Wh(i){if(i instanceof ht)return i.field.canonicalString()+i.op.toString()+Zs(i.value);if(_y(i))return i.filters.map((e=>Wh(e))).join(",");{const e=i.filters.map((t=>Wh(t))).join(",");return`${i.op}(${e})`}}function vy(i,e){return i instanceof ht?(function(s,a){return a instanceof ht&&s.op===a.op&&s.field.isEqual(a.field)&&Zn(s.value,a.value)})(i,e):i instanceof kn?(function(s,a){return a instanceof kn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,h,g)=>c&&vy(h,a.filters[g])),!0):!1})(i,e):void de(19439)}function Ey(i){return i instanceof ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zs(t.value)}`})(i):i instanceof kn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ey).join(" ,")+"}"})(i):"Filter"}class yT extends ht{constructor(e,t,s){super(e,t,s),this.key=ue.fromName(s.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class _T extends ht{constructor(e,t){super(e,"in",t),this.keys=wy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vT extends ht{constructor(e,t){super(e,"not-in",t),this.keys=wy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wy(i,e){return(e.arrayValue?.values||[]).map((t=>ue.fromName(t.referenceValue)))}class ET extends ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gf(t)&&wa(t.arrayValue,this.value)}}class wT extends ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wa(this.value.arrayValue,t)}}class TT extends ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wa(this.value.arrayValue,t)}}class IT extends ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>wa(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t=null,s=[],a=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=h,this.endAt=g,this.Te=null}}function zm(i,e=null,t=[],s=[],a=null,c=null,h=null){return new ST(i,e,t,s,a,c,h)}function yf(i){const e=_e(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Wh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Mu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Zs(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Zs(s))).join(",")),e.Te=t}return e.Te}function _f(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!mT(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!vy(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!jm(i.startAt,e.startAt)&&jm(i.endAt,e.endAt)}function Kh(i){return ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t=null,s=[],a=[],c=null,h="F",g=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AT(i,e,t,s,a,c,h,g){return new so(i,e,t,s,a,c,h,g)}function vf(i){return new so(i)}function Bm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Ty(i){return i.collectionGroup!==null}function ua(i){const e=_e(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new gt(Rt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ta(c,s))})),t.has(Rt.keyField().canonicalString())||e.Ie.push(new Ta(Rt.keyField(),s))}return e.Ie}function Qn(i){const e=_e(i);return e.Ee||(e.Ee=CT(e,ua(i))),e.Ee}function CT(i,e){if(i.limitType==="F")return zm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Ta(a.field,c)}));const t=i.endAt?new pu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new pu(i.startAt.position,i.startAt.inclusive):null;return zm(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Gh(i,e){const t=i.filters.concat([e]);return new so(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function mu(i,e,t){return new so(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function bu(i,e){return _f(Qn(i),Qn(e))&&i.limitType===e.limitType}function Iy(i){return`${yf(Qn(i))}|lt:${i.limitType}`}function Bs(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>Ey(a))).join(", ")}]`),Mu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Zs(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Zs(a))).join(",")),`Target(${s})`})(Qn(i))}; limitType=${i.limitType})`}function Uu(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ue.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of ua(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(h,g,y){const v=Um(h,g,y);return h.inclusive?v<=0:v<0})(s.startAt,ua(s),a)||s.endAt&&!(function(h,g,y){const v=Um(h,g,y);return h.inclusive?v>=0:v>0})(s.endAt,ua(s),a))})(i,e)}function RT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Sy(i){return(e,t)=>{let s=!1;for(const a of ua(i)){const c=PT(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function PT(i,e,t){const s=i.field.isKeyField()?ue.comparator(e.key,t.key):(function(c,h,g){const y=h.data.field(c),v=g.data.field(c);return y!==null&&v!==null?Js(y,v):de(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return de(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return ay(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new et(ue.comparator);function wr(){return kT}const Ay=new et(ue.comparator);function ia(...i){let e=Ay;for(const t of i)e=e.insert(t.key,t);return e}function Cy(i){let e=Ay;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function zi(){return ca()}function Ry(){return ca()}function ca(){return new Xi((i=>i.toString()),((i,e)=>i.isEqual(e)))}const NT=new et(ue.comparator),VT=new gt(ue.comparator);function Pe(...i){let e=VT;for(const t of i)e=e.add(t);return e}const DT=new gt(Re);function xT(){return DT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function Py(i){return{integerValue:""+i}}function OT(i,e){return aT(e)?Py(e):Ef(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this._=void 0}}function LT(i,e,t){return i instanceof Ia?(function(a,c){const h={fields:{[cy]:{stringValue:uy},[fy]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&mf(c)&&(c=Fu(c)),c&&(h.fields[hy]=c),{mapValue:h}})(t,e):i instanceof Sa?Ny(i,e):i instanceof Aa?Vy(i,e):(function(a,c){const h=ky(a,c),g=$m(h)+$m(a.Ae);return Hh(h)&&Hh(a.Ae)?Py(g):Ef(a.serializer,g)})(i,e)}function MT(i,e,t){return i instanceof Sa?Ny(i,e):i instanceof Aa?Vy(i,e):t}function ky(i,e){return i instanceof gu?(function(s){return Hh(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Ia extends ju{}class Sa extends ju{constructor(e){super(),this.elements=e}}function Ny(i,e){const t=Dy(e);for(const s of i.elements)t.some((a=>Zn(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Aa extends ju{constructor(e){super(),this.elements=e}}function Vy(i,e){let t=Dy(e);for(const s of i.elements)t=t.filter((a=>!Zn(a,s)));return{arrayValue:{values:t}}}class gu extends ju{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $m(i){return ot(i.integerValue||i.doubleValue)}function Dy(i){return gf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.field=e,this.transform=t}}function bT(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof Sa&&a instanceof Sa||s instanceof Aa&&a instanceof Aa?Ys(s.elements,a.elements,Zn):s instanceof gu&&a instanceof gu?Zn(s.Ae,a.Ae):s instanceof Ia&&a instanceof Ia})(i.transform,e.transform)}class UT{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class zu{}function xy(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ly(i.key,_r.none()):new ka(i.key,i.data,_r.none());{const t=i.data,s=dn.empty();let a=new gt(Rt.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?s.delete(c):s.set(c,h),a=a.add(c)}return new Yi(i.key,s,new Rn(a.toArray()),_r.none())}}function jT(i,e,t){i instanceof ka?(function(a,c,h){const g=a.value.clone(),y=Hm(a.fieldTransforms,c,h.transformResults);g.setAll(y),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,t):i instanceof Yi?(function(a,c,h){if(!au(a.precondition,c))return void c.convertToUnknownDocument(h.version);const g=Hm(a.fieldTransforms,c,h.transformResults),y=c.data;y.setAll(Oy(a)),y.setAll(g),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(i,e,t):(function(a,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ha(i,e,t,s){return i instanceof ka?(function(c,h,g,y){if(!au(c.precondition,h))return g;const v=c.value.clone(),I=Wm(c.fieldTransforms,y,h);return v.setAll(I),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(i,e,t,s):i instanceof Yi?(function(c,h,g,y){if(!au(c.precondition,h))return g;const v=Wm(c.fieldTransforms,y,h),I=h.data;return I.setAll(Oy(c)),I.setAll(v),h.convertToFoundDocument(h.version,I).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((P=>P.field)))})(i,e,t,s):(function(c,h,g){return au(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(i,e,t)}function zT(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=ky(s.transform,a||null);c!=null&&(t===null&&(t=dn.empty()),t.set(s.field,c))}return t||null}function qm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ys(s,a,((c,h)=>bT(c,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ka extends zu{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Yi extends zu{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Oy(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function Hm(i,e,t){const s=new Map;be(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const c=i[a],h=c.transform,g=e.data.field(c.field);s.set(c.field,MT(h,g,t[a]))}return s}function Wm(i,e,t){const s=new Map;for(const a of i){const c=a.transform,h=t.data.field(a.field);s.set(a.field,LT(c,h,e))}return s}class Ly extends zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BT extends zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&jT(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ha(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ha(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ry();return this.mutations.forEach((a=>{const c=e.get(a.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=t.has(a.key)?null:g;const y=xy(h,g);y!==null&&s.set(a.key,y),h.isValidDocument()||h.convertToNoDocument(me.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,((t,s)=>qm(t,s)))&&Ys(this.baseMutations,e.baseMutations,((t,s)=>qm(t,s)))}}class wf{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){be(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return NT})();const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,s[h].version);return new wf(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ne;function WT(i){switch(i){case z.OK:return de(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return de(15467,{code:i})}}function My(i){if(i===void 0)return Er("GRPC error has no .code"),z.UNKNOWN;switch(i){case ct.OK:return z.OK;case ct.CANCELLED:return z.CANCELLED;case ct.UNKNOWN:return z.UNKNOWN;case ct.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ct.INTERNAL:return z.INTERNAL;case ct.UNAVAILABLE:return z.UNAVAILABLE;case ct.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ct.NOT_FOUND:return z.NOT_FOUND;case ct.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ct.ABORTED:return z.ABORTED;case ct.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ct.DATA_LOSS:return z.DATA_LOSS;default:return de(39323,{code:i})}}(Ne=ct||(ct={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=new ri([4294967295,4294967295],0);function Km(i){const e=KT().encode(i),t=new Yg;return t.update(e),new Uint8Array(t.digest())}function Gm(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ri([t,s],0),new ri([a,c],0)]}class Tf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new sa(`Invalid padding: ${t}`);if(s<0)throw new sa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new sa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new sa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ri.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(ri.fromNumber(s)));return a.compare(GT)===1&&(a=new ri([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Km(e),[s,a]=Gm(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,a,c);if(!this.we(h))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Tf(c,a,t);return s.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const t=Km(e),[s,a]=Gm(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,a,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class sa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Na.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Bu(me.min(),a,new et(Re),wr(),Pe())}}class Na{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Na(s,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Fy{constructor(e,t){this.targetId=e,this.Ce=t}}class by{constructor(e,t,s=Pt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Qm{constructor(){this.ve=0,this.Fe=Xm(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),s=Pe();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:de(38017,{changeType:c})}})),new Na(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Xm()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QT{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=eu(),this.He=eu(),this.Ye=new et(Re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Kh(c))if(s===0){const h=new ue(c.path);this.et(t,h,Mt.newNoDocument(h,me.min()))}else be(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const g=this.ut(e),y=g?this.ct(g,e,h):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let h,g;try{h=ai(s).toUint8Array()}catch(y){if(y instanceof ly)return ya("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Tf(h,a,c)}catch(y){return ya(y instanceof sa?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,h)=>{const g=this.ot(h);if(g){if(c.current&&Kh(g.target)){const y=new ue(g.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,Mt.newNoDocument(y,e))}c.Be&&(t.set(h,c.ke()),c.qe())}}));let s=Pe();this.He.forEach(((c,h)=>{let g=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const a=new Bu(e,t,this.Ye,this.je,s);return this.je=wr(),this.Je=eu(),this.He=eu(),this.Ye=new et(Re),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Qm,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gt(Re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gt(Re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qm),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eu(){return new et(ue.comparator)}function Xm(){return new et(ue.comparator)}const XT={asc:"ASCENDING",desc:"DESCENDING"},YT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JT={and:"AND",or:"OR"};class ZT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qh(i,e){return i.useProto3Json||Mu(e)?e:{value:e}}function yu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function eI(i,e){return yu(i,e.toTimestamp())}function Xn(i){return be(!!i,49232),me.fromTimestamp((function(t){const s=oi(t);return new Qe(s.seconds,s.nanos)})(i))}function If(i,e){return Xh(i,e).canonicalString()}function Xh(i,e){const t=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function jy(i){const e=He.fromString(i);return be(Hy(e),10190,{key:e.toString()}),e}function Yh(i,e){return If(i.databaseId,e.path)}function Ah(i,e){const t=jy(e);if(t.get(1)!==i.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ue(By(t))}function zy(i,e){return If(i.databaseId,e)}function tI(i){const e=jy(i);return e.length===4?He.emptyPath():By(e)}function Jh(i){return new He(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function By(i){return be(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Ym(i,e,t){return{name:Yh(i,e),fields:t.value.mapValue.fields}}function nI(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:de(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(v,I){return v.useProto3Json?(be(I===void 0||typeof I=="string",58123),Pt.fromBase64String(I||"")):(be(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),Pt.fromUint8Array(I||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(v){const I=v.code===void 0?z.UNKNOWN:My(v.code);return new te(I,v.message||"")})(h);t=new by(s,a,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Ah(i,s.document.name),c=Xn(s.document.updateTime),h=s.document.createTime?Xn(s.document.createTime):me.min(),g=new dn({mapValue:{fields:s.document.fields}}),y=Mt.newFoundDocument(a,c,h,g),v=s.targetIds||[],I=s.removedTargetIds||[];t=new lu(v,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Ah(i,s.document),c=s.readTime?Xn(s.readTime):me.min(),h=Mt.newNoDocument(a,c),g=s.removedTargetIds||[];t=new lu([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Ah(i,s.document),c=s.removedTargetIds||[];t=new lu([],c,a,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,h=new HT(a,c),g=s.targetId;t=new Fy(g,h)}}return t}function rI(i,e){let t;if(e instanceof ka)t={update:Ym(i,e.key,e.value)};else if(e instanceof Ly)t={delete:Yh(i,e.key)};else if(e instanceof Yi)t={update:Ym(i,e.key,e.data),updateMask:fI(e.fieldMask)};else{if(!(e instanceof BT))return de(16599,{Vt:e.type});t={verify:Yh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,h){const g=h.transform;if(g instanceof Ia)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Sa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Aa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof gu)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw de(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:eI(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:de(27497)})(i,e.precondition)),t}function iI(i,e){return i&&i.length>0?(be(e!==void 0,14353),i.map((t=>(function(a,c){let h=a.updateTime?Xn(a.updateTime):Xn(c);return h.isEqual(me.min())&&(h=Xn(c)),new UT(h,a.transformResults||[])})(t,e)))):[]}function sI(i,e){return{documents:[zy(i,e.path)]}}function oI(i,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=zy(i,a);const c=(function(v){if(v.length!==0)return qy(kn.create(v,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const h=(function(v){if(v.length!==0)return v.map((I=>(function(U){return{field:$s(U.field),direction:uI(U.dir)}})(I)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const g=Qh(i,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:a}}function aI(i){let e=tI(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){be(s===1,65062);const I=t.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];t.where&&(c=(function(P){const U=$y(P);return U instanceof kn&&_y(U)?U.getFilters():[U]})(t.where));let h=[];t.orderBy&&(h=(function(P){return P.map((U=>(function(ee){return new Ta(qs(ee.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(U)))})(t.orderBy));let g=null;t.limit&&(g=(function(P){let U;return U=typeof P=="object"?P.value:P,Mu(U)?null:U})(t.limit));let y=null;t.startAt&&(y=(function(P){const U=!!P.before,q=P.values||[];return new pu(q,U)})(t.startAt));let v=null;return t.endAt&&(v=(function(P){const U=!P.before,q=P.values||[];return new pu(q,U)})(t.endAt)),AT(e,a,h,c,g,"F",y,v)}function lI(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $y(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qs(t.unaryFilter.field);return ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=qs(t.unaryFilter.field);return ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=qs(t.unaryFilter.field);return ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=qs(t.unaryFilter.field);return ht.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(i):i.fieldFilter!==void 0?(function(t){return ht.create(qs(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return kn.create(t.compositeFilter.filters.map((s=>$y(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(i):de(30097,{filter:i})}function uI(i){return XT[i]}function cI(i){return YT[i]}function hI(i){return JT[i]}function $s(i){return{fieldPath:i.canonicalString()}}function qs(i){return Rt.fromServerFormat(i.fieldPath)}function qy(i){return i instanceof ht?(function(t){if(t.op==="=="){if(bm(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NAN"}};if(Fm(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bm(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NAN"}};if(Fm(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(t.field),op:cI(t.op),value:t.value}}})(i):i instanceof kn?(function(t){const s=t.getFilters().map((a=>qy(a)));return s.length===1?s[0]:{compositeFilter:{op:hI(t.op),filters:s}}})(i):de(54877,{filter:i})}function fI(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Hy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,s,a,c=me.min(),h=me.min(),g=Pt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.yt=e}}function pI(i){const e=aI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?mu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.Cn=new gI}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(si.min())}updateCollectionGroup(e,t,s){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class gI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new gt(He.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new gt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wy=41943040;class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(Wy,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LruGarbageCollector",Ky=1048576;function eg([i,e],[t,s]){const a=Re(i,t);return a===0?Re(e,s):a}class yI{constructor(e){this.Ir=e,this.buffer=new gt(eg),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();eg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _I{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(Zm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){io(t)?re(Zm,"Ignoring IndexedDB error during garbage collection: ",t):await ro(t)}await this.Vr(3e5)}))}}class vI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Lu.ce);const s=new yI(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Jm)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jm):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,c,h,g,y,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((P=>(P>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,h=Date.now(),this.nthSequenceNumber(e,a)))).next((P=>(s=P,g=Date.now(),this.removeTargets(e,s,t)))).next((P=>(c=P,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((P=>(v=Date.now(),zs()<=Ce.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-I}ms
	Determined least recently used ${a} in `+(g-h)+`ms
	Removed ${c} targets in `+(y-g)+`ms
	Removed ${P} documents in `+(v-y)+`ms
Total Duration: ${v-I}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:P}))))}}function EI(i,e){return new vI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.changes=new Xi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?$.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&ha(s.mutation,a,Rn.empty(),Qe.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Pe()){const a=zi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let h=ia();return c.forEach(((g,y)=>{h=h.insert(g,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=zi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Pe())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((h,g)=>{t.set(h,g)}))}))}computeViews(e,t,s,a){let c=wr();const h=ca(),g=(function(){return ca()})();return t.forEach(((y,v)=>{const I=s.get(v.key);a.has(v.key)&&(I===void 0||I.mutation instanceof Yi)?c=c.insert(v.key,v):I!==void 0?(h.set(v.key,I.mutation.getFieldMask()),ha(I.mutation,v,I.mutation.getFieldMask(),Qe.now())):h.set(v.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,I)=>h.set(v,I))),t.forEach(((v,I)=>g.set(v,new TI(I,h.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,t){const s=ca();let a=new et(((h,g)=>h-g)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const g of h)g.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let I=s.get(y)||Rn.empty();I=g.applyToLocalView(v,I),s.set(y,I);const P=(a.get(g.batchId)||Pe()).add(y);a=a.insert(g.batchId,P)}))})).next((()=>{const h=[],g=a.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,I=y.value,P=Ry();I.forEach((U=>{if(!c.has(U)){const q=xy(t.get(U),s.get(U));q!==null&&P.set(U,q),c=c.add(U)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,P))}return $.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(h){return ue.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ty(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):$.resolve(zi());let g=_a,y=c;return h.next((v=>$.forEach(v,((I,P)=>(g<P.largestBatchId&&(g=P.largestBatchId),c.get(I)?$.resolve():this.remoteDocumentCache.getEntry(e,I).next((U=>{y=y.insert(I,U)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,Pe()))).next((I=>({batchId:g,changes:Cy(I)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((s=>{let a=ia();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let h=ia();return this.indexManager.getCollectionParents(e,c).next((g=>$.forEach(g,(y=>{const v=(function(P,U){return new so(U,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(t,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next((I=>{I.forEach(((P,U)=>{h=h.insert(P,U)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((h=>{c.forEach(((y,v)=>{const I=v.getKey();h.get(I)===null&&(h=h.insert(I,Mt.newInvalidDocument(I)))}));let g=ia();return h.forEach(((y,v)=>{const I=c.get(y);I!==void 0&&ha(I.mutation,v,Rn.empty(),Qe.now()),Uu(t,v)&&(g=g.insert(y,v))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Xn(a.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:pI(a.bundledQuery),readTime:Xn(a.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.overlays=new et(ue.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const s=zi();return $.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.St(e,t,c)})),$.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,t,s){const a=zi(),c=t.length+1,h=new ue(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return $.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new et(((v,I)=>v-I));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let I=c.get(v.largestBatchId);I===null&&(I=zi(),c=c.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const g=zi(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,I)=>g.set(v,I))),!(g.size()>=a)););return $.resolve(g)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new qT(t,s));let c=this.qr.get(t);c===void 0&&(c=Pe(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this.Qr=new gt(wt.$r),this.Ur=new gt(wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new wt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new wt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ue(new He([])),s=new wt(t,e),a=new wt(t,e+1),c=[];return this.Ur.forEachInRange([s,a],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new He([])),s=new wt(t,e),a=new wt(t,e+1);let c=Pe();return this.Ur.forEachInRange([s,a],(h=>{c=c.add(h.key)})),c}containsKey(e){const t=new wt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class wt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||Re(e.Yr,t.Yr)}static Kr(e,t){return Re(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gt(wt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new $T(c,t,s,a);this.mutationQueue.push(h);for(const g of a)this.Zr=this.Zr.add(new wt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return $.resolve(h)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),c=a<0?0:a;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?pf:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new wt(t,0),a=new wt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,a],(h=>{const g=this.Xr(h.Yr);c.push(g)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(Re);return t.forEach((a=>{const c=new wt(a,0),h=new wt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(g=>{s=s.add(g.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;ue.isDocumentKey(c)||(c=c.child(""));const h=new wt(new ue(c),0);let g=new gt(Re);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(g=g.add(y.Yr)),!0)}),h),$.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(t.mutations,(a=>{const c=new wt(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new wt(t,0),a=this.Zr.firstAfterOrEqual(s);return $.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.ri=e,this.docs=(function(){return new et(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return $.resolve(s?s.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let s=wr();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Mt.newInvalidDocument(a))})),$.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=wr();const h=t.path,g=new ue(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:I}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||rT(nT(I),s)<=0||(a.has(I.key)||Uu(t,I))&&(c=c.insert(I.key,I.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,t,s,a){de(9500)}ii(e,t){return $.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new kI(this)}getSize(e){return $.resolve(this.size)}}class kI extends wI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.persistence=e,this.si=new Xi((t=>yf(t)),_f),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new Sf,this.targetCount=0,this.ai=eo.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new eo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=t&&s.get(g.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),$.waitFor(c).next((()=>a))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return $.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),$.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((h=>{c.push(a.markPotentiallyOrphaned(e,h))})),$.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return $.resolve(s)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lu(0),this.li=!1,this.li=!0,this.hi=new CI,this.referenceDelegate=e(this),this.Pi=new NI(this),this.indexManager=new mI,this.remoteDocumentCache=(function(a){return new PI(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new dI(t),this.Ii=new SI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new RI(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){re("MemoryPersistence","Starting transaction:",e);const a=new VI(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,t){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class VI extends sT{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new Sf,this.Vi=null}static mi(e){return new Af(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),$.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const a=ue.fromPath(s);return this.gi(e,a).next((c=>{c||t.removeEntry(a,me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _u{constructor(e,t){this.persistence=e,this.pi=new Xi((s=>lT(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=EI(this,t)}static mi(e,t){return new _u(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((s,a)=>this.br(e,s,a).next((c=>c?$.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(h=>this.br(e,h,t).next((g=>{g||(s++,c.removeEntry(h,me.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=su(e.data.value)),t}br(e,t,s){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return $.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Pe(),a=Pe();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Cf(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return IE()?8:oT(Gt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.ys(e,t).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,t,a,s).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new DI;return this.Ss(e,t,h).next((g=>{if(c.result=g,this.Vs)return this.bs(e,t,h,g.size)}))})).next((()=>c.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(zs()<=Ce.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(zs()<=Ce.DEBUG&&re("QueryEngine","Query:",Bs(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(zs()<=Ce.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):$.resolve())}ys(e,t){if(Bm(t))return $.resolve(null);let s=Qn(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=mu(t,null,"F"),s=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const h=Pe(...c);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,s).next((y=>{const v=this.Ds(t,g);return this.Cs(t,v,h,y.readTime)?this.ys(e,mu(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ws(e,t,s,a){return Bm(t)||a.isEqual(me.min())?$.resolve(null):this.ps.getDocuments(e,s).next((c=>{const h=this.Ds(t,c);return this.Cs(t,h,s,a)?$.resolve(null):(zs()<=Ce.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bs(t)),this.vs(e,h,t,tT(a,_a)).next((g=>g)))}))}Ds(e,t){let s=new gt(Sy(e));return t.forEach(((a,c)=>{Uu(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,t,s){return zs()<=Ce.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Bs(t)),this.ps.getDocumentsMatchingQuery(e,t,si.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="LocalStore",OI=3e8;class LI{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new et(Re),this.xs=new Xi((c=>yf(c)),_f),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new II(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function MI(i,e,t,s){return new LI(i,e,t,s)}async function Qy(i,e){const t=_e(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const h=[],g=[];let y=Pe();for(const v of a){h.push(v.batchId);for(const I of v.mutations)y=y.add(I.key)}for(const v of c){g.push(v.batchId);for(const I of v.mutations)y=y.add(I.key)}return t.localDocuments.getDocuments(s,y).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:g})))}))}))}function FI(i,e){const t=_e(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,v,I){const P=v.batch,U=P.keys();let q=$.resolve();return U.forEach((ee=>{q=q.next((()=>I.getEntry(y,ee))).next((X=>{const K=v.docVersions.get(ee);be(K!==null,48541),X.version.compareTo(K)<0&&(P.applyToRemoteDocument(X,v),X.isValidDocument()&&(X.setReadTime(v.commitVersion),I.addEntry(X)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(y,P)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let y=Pe();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Xy(i){const e=_e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function bI(i,e){const t=_e(i),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const g=[];e.targetChanges.forEach(((I,P)=>{const U=a.get(P);if(!U)return;g.push(t.Pi.removeMatchingKeys(c,I.removedDocuments,P).next((()=>t.Pi.addMatchingKeys(c,I.addedDocuments,P))));let q=U.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(P)!==null?q=q.withResumeToken(Pt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):I.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(I.resumeToken,s)),a=a.insert(P,q),(function(X,K,ge){return X.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=OI?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(U,q,I)&&g.push(t.Pi.updateTargetData(c,q))}));let y=wr(),v=Pe();if(e.documentUpdates.forEach((I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,I))})),g.push(UI(c,h,e.documentUpdates).next((I=>{y=I.ks,v=I.qs}))),!s.isEqual(me.min())){const I=t.Pi.getLastRemoteSnapshotVersion(c).next((P=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(I)}return $.waitFor(g).next((()=>h.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(t.Ms=a,c)))}function UI(i,e,t){let s=Pe(),a=Pe();return t.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let h=wr();return t.forEach(((g,y)=>{const v=c.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(g)),y.isNoDocument()&&y.version.isEqual(me.min())?(e.removeEntry(g,y.readTime),h=h.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(g,y)):re(Rf,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)})),{ks:h,qs:a}}))}function jI(i,e){const t=_e(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=pf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function zI(i,e){const t=_e(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((c=>c?(a=c,$.resolve(a)):t.Pi.allocateTargetId(s).next((h=>(a=new ei(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Zh(i,e,t){const s=_e(i),a=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(h=>s.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!io(h))throw h;re(Rf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function tg(i,e,t){const s=_e(i);let a=me.min(),c=Pe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,I){const P=_e(y),U=P.xs.get(I);return U!==void 0?$.resolve(P.Ms.get(U)):P.Pi.getTargetData(v,I)})(s,h,Qn(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,g.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?a:me.min(),t?c:Pe()))).next((g=>(BI(s,RT(e),g),{documents:g,Qs:c})))))}function BI(i,e,t){let s=i.Os.get(e)||me.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class ng{constructor(){this.activeTargetIds=xT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $I{constructor(){this.Mo=new ng,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ng,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="ConnectivityMonitor";class ig{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(rg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(rg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function ef(){return tu===null?tu=(function(){return 268435456+Math.round(2147483648*Math.random())})():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="RestConnection",HI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===fu?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,c){const h=ef(),g=this.zo(e,t.toUriEncodedString());re(Ch,`Sending RPC '${e}' ${h}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,a,c);const{host:v}=new URL(g),I=Du(v);return this.Jo(e,g,y,s,I).then((P=>(re(Ch,`Received RPC '${e}' ${h}: `,P),P)),(P=>{throw ya(Ch,`RPC '${e}' ${h} failed with error: `,P,"url: ",g,"request:",s),P}))}Ho(e,t,s,a,c,h){return this.Go(e,t,s,a,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+no})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}zo(e,t){const s=HI[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class GI extends WI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,c){const h=ef();return new Promise(((g,y)=>{const v=new Jg;v.setWithCredentials(!0),v.listenOnce(Zg.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case iu.NO_ERROR:const P=v.getResponseJson();re(Lt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(P)),g(P);break;case iu.TIMEOUT:re(Lt,`RPC '${e}' ${h} timed out`),y(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:const U=v.getStatus();if(re(Lt,`RPC '${e}' ${h} failed with status:`,U,"response text:",v.getResponseText()),U>0){let q=v.getResponseJson();Array.isArray(q)&&(q=q[0]);const ee=q?.error;if(ee&&ee.status&&ee.message){const X=(function(ge){const ve=ge.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(ve)>=0?ve:z.UNKNOWN})(ee.status);y(new te(X,ee.message))}else y(new te(z.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new te(z.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{re(Lt,`RPC '${e}' ${h} completed.`)}}));const I=JSON.stringify(a);re(Lt,`RPC '${e}' ${h} sending request:`,a),v.send(t,"POST",I,s,15)}))}T_(e,t,s){const a=ef(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=ny(),g=ty(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const I=c.join("");re(Lt,`Creating RPC '${e}' stream ${a}: ${I}`,y);const P=h.createWebChannel(I,y);this.I_(P);let U=!1,q=!1;const ee=new KI({Yo:K=>{q?re(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,K):(U||(re(Lt,`Opening RPC '${e}' stream ${a} transport.`),P.open(),U=!0),re(Lt,`RPC '${e}' stream ${a} sending:`,K),P.send(K))},Zo:()=>P.close()}),X=(K,ge,ve)=>{K.listen(ge,(Te=>{try{ve(Te)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return X(P,ra.EventType.OPEN,(()=>{q||(re(Lt,`RPC '${e}' stream ${a} transport opened.`),ee.o_())})),X(P,ra.EventType.CLOSE,(()=>{q||(q=!0,re(Lt,`RPC '${e}' stream ${a} transport closed`),ee.a_(),this.E_(P))})),X(P,ra.EventType.ERROR,(K=>{q||(q=!0,ya(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,K.name,"Message:",K.message),ee.a_(new te(z.UNAVAILABLE,"The operation could not be completed")))})),X(P,ra.EventType.MESSAGE,(K=>{if(!q){const ge=K.data[0];be(!!ge,16349);const ve=ge,Te=ve?.error||ve[0]?.error;if(Te){re(Lt,`RPC '${e}' stream ${a} received error:`,Te);const xe=Te.status;let je=(function(w){const A=ct[w];if(A!==void 0)return My(A)})(xe),B=Te.message;je===void 0&&(je=z.INTERNAL,B="Unknown error status: "+xe+" with message "+Te.message),q=!0,ee.a_(new te(je,B)),P.close()}else re(Lt,`RPC '${e}' stream ${a} received:`,ge),ee.u_(ge)}})),X(g,ey.STAT_EVENT,(K=>{K.stat===Bh.PROXY?re(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):K.stat===Bh.NOPROXY&&re(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(i){return new ZT(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="PersistentStream";class Jy{constructor(e,t,s,a,c,h,g,y){this.Mi=e,this.S_=s,this.b_=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new te(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(sg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(sg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QI extends Jy{constructor(e,t,s,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=nI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return me.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?me.min():h.readTime?Xn(h.readTime):me.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Jh(this.serializer),t.addTarget=(function(c,h){let g;const y=h.target;if(g=Kh(y)?{documents:sI(c,y)}:{query:oI(c,y).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=Uy(c,h.resumeToken);const v=Qh(c,h.expectedCount);v!==null&&(g.expectedCount=v)}else if(h.snapshotVersion.compareTo(me.min())>0){g.readTime=yu(c,h.snapshotVersion.toTimestamp());const v=Qh(c,h.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const s=lI(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Jh(this.serializer),t.removeTarget=e,this.q_(t)}}class XI extends Jy{constructor(e,t,s,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iI(e.writeResults,e.commitTime),s=Xn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Jh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>rI(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{}class JI extends YI{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Xh(t,s),a,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(z.UNKNOWN,c.toString())}))}Ho(e,t,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Xh(t,s),a,h,g,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new te(z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Er(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="RemoteStore";class e0{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Ji(this)&&(re(Gi,"Restarting streams for network reachability change."),await(async function(y){const v=_e(y);v.Ea.add(4),await Va(v),v.Ra.set("Unknown"),v.Ea.delete(4),await qu(v)})(this))}))})),this.Ra=new ZI(s,a)}}async function qu(i){if(Ji(i))for(const e of i.da)await e(!0)}async function Va(i){for(const e of i.da)await e(!1)}function Zy(i,e){const t=_e(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vf(t)?Nf(t):oo(t).O_()&&kf(t,e))}function Pf(i,e){const t=_e(i),s=oo(t);t.Ia.delete(e),s.O_()&&e_(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ji(t)&&t.Ra.set("Unknown"))}function kf(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oo(i).Y_(e)}function e_(i,e){i.Va.Ue(e),oo(i).Z_(e)}function Nf(i){i.Va=new QT({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),oo(i).start(),i.Ra.ua()}function Vf(i){return Ji(i)&&!oo(i).x_()&&i.Ia.size>0}function Ji(i){return _e(i).Ea.size===0}function t_(i){i.Va=void 0}async function t0(i){i.Ra.set("Online")}async function n0(i){i.Ia.forEach(((e,t)=>{kf(i,e)}))}async function r0(i,e){t_(i),Vf(i)?(i.Ra.ha(e),Nf(i)):i.Ra.set("Unknown")}async function i0(i,e,t){if(i.Ra.set("Online"),e instanceof by&&e.state===2&&e.cause)try{await(async function(a,c){const h=c.cause;for(const g of c.targetIds)a.Ia.has(g)&&(await a.remoteSyncer.rejectListen(g,h),a.Ia.delete(g),a.Va.removeTarget(g))})(i,e)}catch(s){re(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await vu(i,s)}else if(e instanceof lu?i.Va.Ze(e):e instanceof Fy?i.Va.st(e):i.Va.tt(e),!t.isEqual(me.min()))try{const s=await Xy(i.localStore);t.compareTo(s)>=0&&await(function(c,h){const g=c.Va.Tt(h);return g.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.Ia.get(v);I&&c.Ia.set(v,I.withResumeToken(y.resumeToken,h))}})),g.targetMismatches.forEach(((y,v)=>{const I=c.Ia.get(y);if(!I)return;c.Ia.set(y,I.withResumeToken(Pt.EMPTY_BYTE_STRING,I.snapshotVersion)),e_(c,y);const P=new ei(I.target,y,v,I.sequenceNumber);kf(c,P)})),c.remoteSyncer.applyRemoteEvent(g)})(i,t)}catch(s){re(Gi,"Failed to raise snapshot:",s),await vu(i,s)}}async function vu(i,e,t){if(!io(e))throw e;i.Ea.add(1),await Va(i),i.Ra.set("Offline"),t||(t=()=>Xy(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{re(Gi,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await qu(i)}))}function n_(i,e){return e().catch((t=>vu(i,t,e)))}async function Hu(i){const e=_e(i),t=ui(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pf;for(;s0(e);)try{const a=await jI(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,o0(e,a)}catch(a){await vu(e,a)}r_(e)&&i_(e)}function s0(i){return Ji(i)&&i.Ta.length<10}function o0(i,e){i.Ta.push(e);const t=ui(i);t.O_()&&t.X_&&t.ea(e.mutations)}function r_(i){return Ji(i)&&!ui(i).x_()&&i.Ta.length>0}function i_(i){ui(i).start()}async function a0(i){ui(i).ra()}async function l0(i){const e=ui(i);for(const t of i.Ta)e.ea(t.mutations)}async function u0(i,e,t){const s=i.Ta.shift(),a=wf.from(s,e,t);await n_(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Hu(i)}async function c0(i,e){e&&ui(i).X_&&await(async function(s,a){if((function(h){return WT(h)&&h!==z.ABORTED})(a.code)){const c=s.Ta.shift();ui(s).B_(),await n_(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Hu(s)}})(i,e),r_(i)&&i_(i)}async function og(i,e){const t=_e(i);t.asyncQueue.verifyOperationInProgress(),re(Gi,"RemoteStore received new credentials");const s=Ji(t);t.Ea.add(3),await Va(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qu(t)}async function h0(i,e){const t=_e(i);e?(t.Ea.delete(2),await qu(t)):e||(t.Ea.add(2),await Va(t),t.Ra.set("Unknown"))}function oo(i){return i.ma||(i.ma=(function(t,s,a){const c=_e(t);return c.sa(),new QI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Xo:t0.bind(null,i),t_:n0.bind(null,i),r_:r0.bind(null,i),H_:i0.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Vf(i)?Nf(i):i.Ra.set("Unknown")):(await i.ma.stop(),t_(i))}))),i.ma}function ui(i){return i.fa||(i.fa=(function(t,s,a){const c=_e(t);return c.sa(),new XI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:a0.bind(null,i),r_:c0.bind(null,i),ta:l0.bind(null,i),na:u0.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hu(i)):(await i.fa.stop(),i.Ta.length>0&&(re(Gi,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const h=Date.now()+s,g=new Df(e,t,h,a,c);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xf(i,e){if(Er("AsyncQueue",`${e}: ${i}`),io(i))return new te(z.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{static emptySet(e){return new Ws(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ue.comparator(t.key,s.key):(t,s)=>ue.comparator(t.key,s.key),this.keyedMap=ia(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ws;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.ga=new et(ue.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class to{constructor(e,t,s,a,c,h,g,y,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,a,c){const h=[];return t.forEach((g=>{h.push({type:0,doc:g})})),new to(e,t,Ws.emptySet(t),h,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d0{constructor(){this.queries=lg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=_e(t),c=a.queries;a.queries=lg(),c.forEach(((h,g)=>{for(const y of g.Sa)y.onError(s)}))})(this,new te(z.ABORTED,"Firestore shutting down"))}}function lg(){return new Xi((i=>Iy(i)),bu)}async function p0(i,e){const t=_e(i);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.ba()&&e.Da()&&(s=2):(c=new f0,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(h){const g=xf(h,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(g)}t.queries.set(a,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Of(t)}async function m0(i,e){const t=_e(i),s=e.query;let a=3;const c=t.queries.get(s);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function g0(i,e){const t=_e(i);let s=!1;for(const a of e){const c=a.query,h=t.queries.get(c);if(h){for(const g of h.Sa)g.Fa(a)&&(s=!0);h.wa=a}}s&&Of(t)}function y0(i,e,t){const s=_e(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(t);s.queries.delete(e)}function Of(i){i.Ca.forEach((e=>{e.next()}))}var tf,ug;(ug=tf||(tf={})).Ma="default",ug.Cache="cache";class _0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new to(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.key=e}}class o_{constructor(e){this.key=e}}class v0{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=Sy(e),this.tu=new Ws(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new ag,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,g=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((I,P)=>{const U=a.get(I),q=Uu(this.query,P)?P:null,ee=!!U&&this.mutatedKeys.has(U.key),X=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let K=!1;U&&q?U.data.isEqual(q.data)?ee!==X&&(s.track({type:3,doc:q}),K=!0):this.su(U,q)||(s.track({type:2,doc:q}),K=!0,(y&&this.eu(q,y)>0||v&&this.eu(q,v)<0)&&(g=!0)):!U&&q?(s.track({type:0,doc:q}),K=!0):U&&!q&&(s.track({type:1,doc:U}),K=!0,(y||v)&&(g=!0)),K&&(q?(h=h.add(q),c=X?c.add(I):c.delete(I)):(h=h.delete(I),c=c.delete(I)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const I=this.query.limitType==="F"?h.last():h.first();h=h.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{tu:h,iu:s,Cs:g,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((I,P)=>(function(q,ee){const X=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:K})}};return X(q)-X(ee)})(I.type,P.type)||this.eu(I.doc,P.doc))),this.ou(s),a=a??!1;const g=t&&!a?this._u():[],y=this.Xa.size===0&&this.current&&!a?1:0,v=y!==this.Za;return this.Za=y,h.length!==0||v?{snapshot:new to(this.query,e.tu,c,h,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ag,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new o_(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new s_(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lf="SyncEngine";class E0{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class w0{constructor(e){this.key=e,this.hu=!1}}class T0{constructor(e,t,s,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Xi((g=>Iy(g)),bu),this.Iu=new Map,this.Eu=new Set,this.du=new et(ue.comparator),this.Au=new Map,this.Ru=new Sf,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I0(i,e,t=!0){const s=f_(i);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await a_(s,e,t,!0),a}async function S0(i,e){const t=f_(i);await a_(t,e,!0,!1)}async function a_(i,e,t,s){const a=await zI(i.localStore,Qn(e)),c=a.targetId,h=i.sharedClientState.addLocalQueryTarget(c,t);let g;return s&&(g=await A0(i,e,c,h==="current",a.resumeToken)),i.isPrimaryClient&&t&&Zy(i.remoteStore,a),g}async function A0(i,e,t,s,a){i.pu=(P,U,q)=>(async function(X,K,ge,ve){let Te=K.view.ru(ge);Te.Cs&&(Te=await tg(X.localStore,K.query,!1).then((({documents:C})=>K.view.ru(C,Te))));const xe=ve&&ve.targetChanges.get(K.targetId),je=ve&&ve.targetMismatches.get(K.targetId)!=null,B=K.view.applyChanges(Te,X.isPrimaryClient,xe,je);return hg(X,K.targetId,B.au),B.snapshot})(i,P,U,q);const c=await tg(i.localStore,e,!0),h=new v0(e,c.Qs),g=h.ru(c.documents),y=Na.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",a),v=h.applyChanges(g,i.isPrimaryClient,y);hg(i,t,v.au);const I=new E0(e,t,h);return i.Tu.set(e,I),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),v.snapshot}async function C0(i,e,t){const s=_e(i),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((h=>!bu(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Zh(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Pf(s.remoteStore,a.targetId),nf(s,a.targetId)})).catch(ro)):(nf(s,a.targetId),await Zh(s.localStore,a.targetId,!0))}async function R0(i,e){const t=_e(i),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Pf(t.remoteStore,s.targetId))}async function P0(i,e,t){const s=L0(i);try{const a=await(function(h,g){const y=_e(h),v=Qe.now(),I=g.reduce(((q,ee)=>q.add(ee.key)),Pe());let P,U;return y.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let ee=wr(),X=Pe();return y.Ns.getEntries(q,I).next((K=>{ee=K,ee.forEach(((ge,ve)=>{ve.isValidDocument()||(X=X.add(ge))}))})).next((()=>y.localDocuments.getOverlayedDocuments(q,ee))).next((K=>{P=K;const ge=[];for(const ve of g){const Te=zT(ve,P.get(ve.key).overlayedDocument);Te!=null&&ge.push(new Yi(ve.key,Te,my(Te.value.mapValue),_r.exists(!0)))}return y.mutationQueue.addMutationBatch(q,v,ge,g)})).next((K=>{U=K;const ge=K.applyToLocalDocumentSet(P,X);return y.documentOverlayCache.saveOverlays(q,K.batchId,ge)}))})).then((()=>({batchId:U.batchId,changes:Cy(P)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(h,g,y){let v=h.Vu[h.currentUser.toKey()];v||(v=new et(Re)),v=v.insert(g,y),h.Vu[h.currentUser.toKey()]=v})(s,a.batchId,t),await Da(s,a.changes),await Hu(s.remoteStore)}catch(a){const c=xf(a,"Failed to persist write");t.reject(c)}}async function l_(i,e){const t=_e(i);try{const s=await bI(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const h=t.Au.get(c);h&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?h.hu=!0:a.modifiedDocuments.size>0?be(h.hu,14607):a.removedDocuments.size>0&&(be(h.hu,42227),h.hu=!1))})),await Da(t,s,e)}catch(s){await ro(s)}}function cg(i,e,t){const s=_e(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((c,h)=>{const g=h.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(h,g){const y=_e(h);y.onlineState=g;let v=!1;y.queries.forEach(((I,P)=>{for(const U of P.Sa)U.va(g)&&(v=!0)})),v&&Of(y)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function k0(i,e,t){const s=_e(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),c=a&&a.key;if(c){let h=new et(ue.comparator);h=h.insert(c,Mt.newNoDocument(c,me.min()));const g=Pe().add(c),y=new Bu(me.min(),new Map,new et(Re),h,g);await l_(s,y),s.du=s.du.remove(c),s.Au.delete(e),Mf(s)}else await Zh(s.localStore,e,!1).then((()=>nf(s,e,t))).catch(ro)}async function N0(i,e){const t=_e(i),s=e.batch.batchId;try{const a=await FI(t.localStore,e);c_(t,s,null),u_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Da(t,a)}catch(a){await ro(a)}}async function V0(i,e,t){const s=_e(i);try{const a=await(function(h,g){const y=_e(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let I;return y.mutationQueue.lookupMutationBatch(v,g).next((P=>(be(P!==null,37113),I=P.keys(),y.mutationQueue.removeMutationBatch(v,P)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,I,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I))).next((()=>y.localDocuments.getDocuments(v,I)))}))})(s.localStore,e);c_(s,e,t),u_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Da(s,a)}catch(a){await ro(a)}}function u_(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function c_(i,e,t){const s=_e(i);let a=s.Vu[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function nf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||h_(i,s)}))}function h_(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Pf(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Mf(i))}function hg(i,e,t){for(const s of t)s instanceof s_?(i.Ru.addReference(s.key,e),D0(i,s)):s instanceof o_?(re(Lf,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||h_(i,s.key)):de(19791,{wu:s})}function D0(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(re(Lf,"New document in limbo: "+t),i.Eu.add(s),Mf(i))}function Mf(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ue(He.fromString(e)),s=i.fu.next();i.Au.set(s,new w0(t)),i.du=i.du.insert(t,s),Zy(i.remoteStore,new ei(Qn(vf(t.path)),s,"TargetPurposeLimboResolution",Lu.ce))}}async function Da(i,e,t){const s=_e(i),a=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,y)=>{h.push(s.pu(y,e,t).then((v=>{if((v||t)&&s.isPrimaryClient){const I=v?!v.fromCache:t?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,I?"current":"not-current")}if(v){a.push(v);const I=Cf.As(y.targetId,v);c.push(I)}})))})),await Promise.all(h),s.Pu.H_(a),await(async function(y,v){const I=_e(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>$.forEach(v,(U=>$.forEach(U.Es,(q=>I.persistence.referenceDelegate.addReference(P,U.targetId,q))).next((()=>$.forEach(U.ds,(q=>I.persistence.referenceDelegate.removeReference(P,U.targetId,q)))))))))}catch(P){if(!io(P))throw P;re(Rf,"Failed to update sequence numbers: "+P)}for(const P of v){const U=P.targetId;if(!P.fromCache){const q=I.Ms.get(U),ee=q.snapshotVersion,X=q.withLastLimboFreeSnapshotVersion(ee);I.Ms=I.Ms.insert(U,X)}}})(s.localStore,c))}async function x0(i,e){const t=_e(i);if(!t.currentUser.isEqual(e)){re(Lf,"User change. New user:",e.toKey());const s=await Qy(t.localStore,e);t.currentUser=e,(function(c,h){c.mu.forEach((g=>{g.forEach((y=>{y.reject(new te(z.CANCELLED,h))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Da(t,s.Ls)}}function O0(i,e){const t=_e(i),s=t.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let a=Pe();const c=t.Iu.get(e);if(!c)return a;for(const h of c){const g=t.Tu.get(h);a=a.unionWith(g.view.nu)}return a}}function f_(i){const e=_e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=l_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k0.bind(null,e),e.Pu.H_=g0.bind(null,e.eventManager),e.Pu.yu=y0.bind(null,e.eventManager),e}function L0(i){const e=_e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V0.bind(null,e),e}class Eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return MI(this.persistence,new xI,e.initialUser,this.serializer)}Cu(e){return new Gy(Af.mi,this.serializer)}Du(e){return new $I}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eu.provider={build:()=>new Eu};class M0 extends Eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){be(this.persistence.referenceDelegate instanceof _u,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _I(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Gy((s=>_u.mi(s,t)),this.serializer)}}class rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=x0.bind(null,this.syncEngine),await h0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d0})()}createDatastore(e){const t=$u(e.databaseInfo.databaseId),s=(function(c){return new GI(c)})(e.databaseInfo);return(function(c,h,g,y){return new JI(c,h,g,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,h,g){return new e0(s,a,c,h,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>cg(this.syncEngine,t,0)),(function(){return ig.v()?new ig:new qI})())}createSyncEngine(e,t){return(function(a,c,h,g,y,v,I){const P=new T0(a,c,h,g,y,v);return I&&(P.gu=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=_e(t);re(Gi,"RemoteStore shutting down."),s.Ea.add(5),await Va(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rf.provider={build:()=>new rf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="FirestoreClient";class b0{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Wt.UNAUTHENTICATED,this.clientId=df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async h=>{re(ci,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(re(ci,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=xf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ph(i,e){i.asyncQueue.verifyOperationInProgress(),re(ci,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Qy(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function fg(i,e){i.asyncQueue.verifyOperationInProgress();const t=await U0(i);re(ci,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>og(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>og(e.remoteStore,a))),i._onlineComponents=e}async function U0(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(ci,"Using user provided OfflineComponentProvider");try{await Ph(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===z.FAILED_PRECONDITION||a.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),await Ph(i,new Eu)}}else re(ci,"Using default OfflineComponentProvider"),await Ph(i,new M0(void 0));return i._offlineComponents}async function d_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(ci,"Using user provided OnlineComponentProvider"),await fg(i,i._uninitializedComponentsProvider._online)):(re(ci,"Using default OnlineComponentProvider"),await fg(i,new rf))),i._onlineComponents}function j0(i){return d_(i).then((e=>e.syncEngine))}async function dg(i){const e=await d_(i),t=e.eventManager;return t.onListen=I0.bind(null,e.syncEngine),t.onUnlisten=C0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R0.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="firestore.googleapis.com",mg=!0;class gg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z0,this.ssl=mg}else this.host=e.host,this.ssl=e.ssl??mg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ky)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Hw;switch(s.type){case"firstParty":return new Gw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=pg.get(t);s&&(re("ComponentProvider","Removing Datastore"),pg.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Pa(t,dt._jsonSchema))return new dt(e,s||null,new ue(He.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:ft("string",dt._jsonSchemaVersion),referencePath:ft("string")};class ii extends fi{constructor(e,t,s){super(e,t,vf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ue(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function B0(i,e,...t){if(i=mn(i),iy("collection","path",e),i instanceof Ff){const s=He.fromString(e,...t);return Pm(s),new ii(i,null,s)}{if(!(i instanceof dt||i instanceof ii))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...t));return Pm(s),new ii(i.firestore,null,s)}}function bf(i,e,...t){if(i=mn(i),arguments.length===1&&(e=df.newId()),iy("doc","path",e),i instanceof Ff){const s=He.fromString(e,...t);return Rm(s),new dt(i,null,new ue(s))}{if(!(i instanceof dt||i instanceof ii))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...t));return Rm(s),new dt(i.firestore,i instanceof ii?i.converter:null,new ue(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="AsyncQueue";class _g{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yy(this,"async_queue_retry"),this._c=()=>{const s=Rh();s&&re(yg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Rh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!io(e))throw e;re(yg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Er("INTERNAL UNHANDLED ERROR: ",vg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Df.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&de(47125,{Pc:vg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vg(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}class wu extends Ff{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new _g,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _g(e),this._firestoreClient=void 0,await e}}}function $0(i,e,t){t||(t=fu);const s=Gg(i,"firestore");if(s.isInitialized(t)){const a=s.getImmediate({identifier:t}),c=s.getOptions(t);if(ma(c,e))return a;throw new te(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new te(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ky)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Du(e.host)&&gE(e.host),s.initialize({options:e,instanceIdentifier:t})}function m_(i){if(i._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||q0(i),i._firestoreClient}function q0(i){const e=i._freezeSettings(),t=(function(a,c,h,g){return new hT(a,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,p_(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new b0(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pn(Pt.fromBase64String(e))}catch(t){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pa(e,pn._jsonSchema))return pn.fromBase64String(e.bytes)}}pn._jsonSchemaVersion="firestore/bytes/1.0",pn._jsonSchema={type:ft("string",pn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yn._jsonSchemaVersion}}static fromJSON(e){if(Pa(e,Yn._jsonSchema))return new Yn(e.latitude,e.longitude)}}Yn._jsonSchemaVersion="firestore/geoPoint/1.0",Yn._jsonSchema={type:ft("string",Yn._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pa(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Jn(e.vectorValues);throw new te(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:ft("string",Jn._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=/^__.*__$/;class W0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ka(e,this.data,t,this.fieldTransforms)}}function g_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:i})}}class zf{constructor(e,t,s,a,c,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(g_(this.Ac)&&H0.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K0{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||$u(e)}Cc(e,t,s,a=!1){return new zf({Ac:e,methodName:t,Dc:s,path:Rt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function y_(i){const e=i._freezeSettings(),t=$u(i._databaseId);return new K0(i._databaseId,!!e.ignoreUndefinedProperties,t)}function G0(i,e,t,s,a,c={}){const h=i.Cc(c.merge||c.mergeFields?2:0,e,t,a);E_("Data must be an object, but it was:",h,s);const g=__(s,h);let y,v;if(c.merge)y=new Rn(h.fieldMask),v=h.fieldTransforms;else if(c.mergeFields){const I=[];for(const P of c.mergeFields){const U=X0(e,P,t);if(!h.contains(U))throw new te(z.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);J0(I,U)||I.push(U)}y=new Rn(I),v=h.fieldTransforms.filter((P=>y.covers(P.field)))}else y=null,v=h.fieldTransforms;return new W0(new dn(g),y,v)}class Bf extends jf{_toFieldTransform(e){return new FT(e.path,new Ia)}isEqual(e){return e instanceof Bf}}function Q0(i,e,t,s=!1){return $f(t,i.Cc(s?4:3,e))}function $f(i,e){if(v_(i=mn(i)))return E_("Unsupported field value:",e,i),__(i,e);if(i instanceof jf)return(function(s,a){if(!g_(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const c=[];let h=0;for(const g of s){let y=$f(g,a.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),h++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=mn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return OT(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Qe.fromDate(s);return{timestampValue:yu(a.serializer,c)}}if(s instanceof Qe){const c=new Qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yu(a.serializer,c)}}if(s instanceof Yn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof pn)return{bytesValue:Uy(a.serializer,s._byteString)};if(s instanceof dt){const c=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw a.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:If(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Jn)return(function(h,g){return{mapValue:{fields:{[dy]:{stringValue:py},[du]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return Ef(g.serializer,v)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Ou(s)}`)})(i,e)}function __(i,e){const t={};return ay(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(i,((s,a)=>{const c=$f(a,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function v_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qe||i instanceof Yn||i instanceof pn||i instanceof dt||i instanceof jf||i instanceof Jn)}function E_(i,e,t){if(!v_(t)||!sy(t)){const s=Ou(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function X0(i,e,t){if((e=mn(e))instanceof Uf)return e._internalPath;if(typeof e=="string")return w_(i,e);throw Tu("Field path arguments must be of type string or ",i,!1,void 0,t)}const Y0=new RegExp("[~\\*/\\[\\]]");function w_(i,e,t){if(e.search(Y0)>=0)throw Tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Uf(...e.split("."))._internalPath}catch{throw Tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Tu(i,e,t,s,a){const c=s&&!s.isEmpty(),h=a!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${s}`),h&&(y+=` in document ${a}`),y+=")"),new te(z.INVALID_ARGUMENT,g+i+y)}function J0(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Z0 extends T_{data(){return super.data()}}function qf(i,e){return typeof e=="string"?w_(i,e):e instanceof Uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hf{}class Wf extends Hf{}function tS(i,e,...t){let s=[];e instanceof Hf&&s.push(e),s=s.concat(t),(function(c){const h=c.filter((y=>y instanceof Gf)).length,g=c.filter((y=>y instanceof Kf)).length;if(h>1||h>0&&g>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class Kf extends Wf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Kf(e,t,s)}_apply(e){const t=this._parse(e);return I_(e._query,t),new fi(e.firestore,e.converter,Gh(e._query,t))}_parse(e){const t=y_(e.firestore);return(function(c,h,g,y,v,I,P){let U;if(v.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){Tg(P,I);const ee=[];for(const X of P)ee.push(wg(y,c,X));U={arrayValue:{values:ee}}}else U=wg(y,c,P)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||Tg(P,I),U=Q0(g,h,P,I==="in"||I==="not-in");return ht.create(v,I,U)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gf extends Hf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let h=a;const g=c.getFlattenedFilters();for(const y of g)I_(h,y),h=Gh(h,y)})(e._query,t),new fi(e.firestore,e.converter,Gh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qf extends Wf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qf(e,t)}_apply(e){const t=(function(a,c,h){if(a.startAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ta(c,h)})(e._query,this._field,this._direction);return new fi(e.firestore,e.converter,(function(a,c){const h=a.explicitOrderBy.concat([c]);return new so(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function nS(i,e="asc"){const t=e,s=qf("orderBy",i);return Qf._create(s,t)}class Xf extends Wf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Xf(e,t,s)}_apply(e){return new fi(e.firestore,e.converter,mu(e._query,this._limit,this._limitType))}}function rS(i){return Xf._create("limit",i,"F")}function wg(i,e,t){if(typeof(t=mn(t))=="string"){if(t==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ty(e)&&t.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(He.fromString(t));if(!ue.isDocumentKey(s))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Mm(i,new ue(s))}if(t instanceof dt)return Mm(i,t._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ou(t)}.`)}function Tg(i,e){if(!Array.isArray(i)||i.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I_(i,e){const t=(function(a,c){for(const h of a)for(const g of h.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class iS{convertValue(e,t="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Qi(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[du].arrayValue?.values?.map((s=>ot(s.doubleValue)));return new Jn(t)}convertGeoPoint(e){return new Yn(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Fu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(va(e));default:return null}}convertTimestamp(e){const t=oi(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=He.fromString(e);be(Hy(s),9688,{name:e});const a=new Ea(s.get(1),s.get(3)),c=new ue(s.popFirst(5));return a.isEqual(t)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class oa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hi extends T_{constructor(e,t,s,a,c,h){super(e,t,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(qf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hi._jsonSchema={type:ft("string",Hi._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class uu extends Hi{data(e={}){return super.data(e)}}class Ks{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new oa(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new uu(this._firestore,this._userDataWriter,s.key,s,new oa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map((g=>{const y=new uu(a._firestore,a._userDataWriter,g.doc.key,g.doc,new oa(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const y=new uu(a._firestore,a._userDataWriter,g.doc.key,g.doc,new oa(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,I=-1;return g.type!==0&&(v=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),I=h.indexOf(g.doc.key)),{type:oS(g.type),doc:y,oldIndex:v,newIndex:I}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=df.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oS(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:i})}}Ks._jsonSchemaVersion="firestore/querySnapshot/1.0",Ks._jsonSchema={type:ft("string",Ks._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class S_ extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new pn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function Yf(i,e,t){i=aa(i,dt);const s=aa(i.firestore,wu),a=sS(i.converter,e,t);return lS(s,[G0(y_(s),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,_r.none())])}function aS(i,...e){i=mn(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Eg(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Eg(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,h,g;if(i instanceof dt)h=aa(i.firestore,wu),g=vf(i._key.path),c={next:y=>{e[s]&&e[s](uS(h,i,y))},error:e[s+1],complete:e[s+2]};else{const y=aa(i,fi);h=aa(y.firestore,wu),g=y._query;const v=new S_(h);c={next:I=>{e[s]&&e[s](new Ks(h,v,y,I))},error:e[s+1],complete:e[s+2]},eS(i._query)}return(function(v,I,P,U){const q=new F0(U),ee=new _0(I,q,P);return v.asyncQueue.enqueueAndForget((async()=>p0(await dg(v),ee))),()=>{q.Nu(),v.asyncQueue.enqueueAndForget((async()=>m0(await dg(v),ee)))}})(m_(h),g,a,c)}function lS(i,e){return(function(s,a){const c=new qi;return s.asyncQueue.enqueueAndForget((async()=>P0(await j0(s),a,c))),c.promise})(m_(i),e)}function uS(i,e,t){const s=t.docs.get(e._key),a=new S_(i);return new Hi(i,a,e._key,s,new oa(t.hasPendingWrites,t.fromCache),e.converter)}function Iu(){return new Bf("serverTimestamp")}(function(e,t=!0){(function(a){no=a})(xu),Xs(new Wi("firestore",((s,{instanceIdentifier:a,options:c})=>{const h=s.getProvider("app").getImmediate(),g=new wu(new Ww(s.getProvider("auth-internal")),new Qw(h,s.getProvider("app-check-internal")),(function(v,I){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(v.options.projectId,I)})(h,a),h);return c={useFetchStreams:t,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),ni(Im,Sm,e),ni(Im,Sm,"esm2020")})();function A_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cS=A_,C_=new Ra("auth","Firebase",A_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new cf("@firebase/auth");function hS(i,...e){Su.logLevel<=Ce.WARN&&Su.warn(`Auth (${xu}): ${i}`,...e)}function cu(i,...e){Su.logLevel<=Ce.ERROR&&Su.error(`Auth (${xu}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(i,...e){throw Jf(i,...e)}function R_(i,...e){return Jf(i,...e)}function P_(i,e,t){const s={...cS(),[e]:t};return new Ra("auth","Firebase",s).create(e,{appName:i.name})}function fa(i){return P_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jf(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return C_.create(i,...e)}function Me(i,e,...t){if(!i)throw Jf(e,...t)}function da(i){const e="INTERNAL ASSERTION FAILED: "+i;throw cu(e),new Error(e)}function Cu(i,e){i||da(e)}function fS(){return Ig()==="http:"||Ig()==="https:"}function Ig(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fS()||EE()||"connection"in navigator)?navigator.onLine:!0}function pS(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cu(t>e,"Short delay should be less than long delay!"),this.isMobile=yE()||wE()}get(){return dS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(i,e){Cu(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_S=new xa(3e4,6e4);function Zf(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Oa(i,e,t,s,a={}){return N_(i,a,async()=>{let c={},h={};s&&(e==="GET"?h=s:c={body:JSON.stringify(s)});const g=Hg({key:i.config.apiKey,...h}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const v={method:e,headers:y,...c};return vE()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&Du(i.emulatorConfig.host)&&(v.credentials="include"),k_.fetch()(await V_(i,i.config.apiHost,t,g),v)})}async function N_(i,e,t){i._canInitEmulator=!1;const s={...gS,...e};try{const a=new ES(i),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw nu(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[y,v]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(i,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw nu(i,"email-already-in-use",h);if(y==="USER_DISABLED")throw nu(i,"user-disabled",h);const I=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw P_(i,I,v);Au(i,I)}}catch(a){if(a instanceof hi)throw a;Au(i,"network-request-failed",{message:String(a)})}}async function vS(i,e,t,s,a={}){const c=await Oa(i,e,t,s,a);return"mfaPendingCredential"in c&&Au(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function V_(i,e,t,s){const a=`${e}${t}?${s}`,c=i,h=c.config.emulator?mS(i.config,a):`${i.config.apiScheme}://${a}`;return yS.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class ES{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(R_(this.auth,"network-request-failed")),_S.get())})}}function nu(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=R_(i,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(i,e){return Oa(i,"POST","/v1/accounts:delete",e)}async function Ru(i,e){return Oa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TS(i,e=!1){const t=mn(i),s=await t.getIdToken(e),a=D_(s);Me(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,h=c?.sign_in_provider;return{claims:a,token:s,authTime:pa(kh(a.auth_time)),issuedAtTime:pa(kh(a.iat)),expirationTime:pa(kh(a.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function kh(i){return Number(i)*1e3}function D_(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return cu("JWT malformed, contained fewer than 3 sections"),null;try{const a=qg(t);return a?JSON.parse(a):(cu("Failed to decode base64 JWT payload"),null)}catch(a){return cu("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Sg(i){const e=D_(i);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof hi&&IS(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function IS({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pa(this.lastLoginAt),this.creationTime=pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(i){const e=i.auth,t=await i.getIdToken(),s=await sf(i,Ru(e,{idToken:t}));Me(s?.users.length,e,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const c=a.providerUserInfo?.length?x_(a.providerUserInfo):[],h=CS(i.providerData,c),g=i.isAnonymous,y=!(i.email&&a.passwordHash)&&!h?.length,v=g?y:!1,I={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new of(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(i,I)}async function AS(i){const e=mn(i);await Pu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CS(i,e){return[...i.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function x_(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(i,e){const t=await N_(i,{},async()=>{const s=Hg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=i.config,h=await V_(i,a,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return i.emulatorConfig&&Du(i.emulatorConfig.host)&&(y.credentials="include"),k_.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PS(i,e){return Oa(i,"POST","/v2/accounts:revokeToken",Zf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Sg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await RS(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,h=new Gs;return s&&(Me(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),a&&(Me(typeof a=="string","internal-error",{appName:e}),h.accessToken=a),c&&(Me(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(i,e){Me(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Pn{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new SS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new of(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await sf(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TS(this,e)}reload(){return AS(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Pu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zr(this.auth.app))return Promise.reject(fa(this.auth));const e=await this.getIdToken();return await sf(this,wS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,g=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,I=t.lastLoginAt??void 0,{uid:P,emailVerified:U,isAnonymous:q,providerData:ee,stsTokenManager:X}=t;Me(P&&X,e,"internal-error");const K=Gs.fromJSON(this.name,X);Me(typeof P=="string",e,"internal-error"),Jr(s,e.name),Jr(a,e.name),Me(typeof U=="boolean",e,"internal-error"),Me(typeof q=="boolean",e,"internal-error"),Jr(c,e.name),Jr(h,e.name),Jr(g,e.name),Jr(y,e.name),Jr(v,e.name),Jr(I,e.name);const ge=new Pn({uid:P,auth:e,email:a,emailVerified:U,displayName:s,isAnonymous:q,photoURL:h,phoneNumber:c,tenantId:g,stsTokenManager:K,createdAt:v,lastLoginAt:I});return ee&&Array.isArray(ee)&&(ge.providerData=ee.map(ve=>({...ve}))),y&&(ge._redirectEventId=y),ge}static async _fromIdTokenResponse(e,t,s=!1){const a=new Gs;a.updateFromServerResponse(t);const c=new Pn({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Pu(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Me(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?x_(a.providerUserInfo):[],h=!(a.email&&a.passwordHash)&&!c?.length,g=new Gs;g.updateFromIdToken(s);const y=new Pn({uid:a.localId,auth:e,stsTokenManager:g,isAnonymous:h}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new of(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!c?.length};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=new Map;function Bi(i){Cu(i instanceof Function,"Expected a class definition");let e=Ag.get(i);return e?(Cu(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Ag.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O_.type="NONE";const Cg=O_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(i,e,t){return`firebase:${i}:${e}:${t}`}class Qs{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=Nh(this.userKey,a.apiKey,c),this.fullPersistenceKey=Nh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ru(this.auth,{idToken:e}).catch(()=>{});return t?Pn._fromGetAccountInfoResponse(this.auth,t,e):null}return Pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Qs(Bi(Cg),e,s);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=a[0]||Bi(Cg);const h=Nh(s,e.config.apiKey,e.name);let g=null;for(const v of t)try{const I=await v._get(h);if(I){let P;if(typeof I=="string"){const U=await Ru(e,{idToken:I}).catch(()=>{});if(!U)break;P=await Pn._fromGetAccountInfoResponse(e,U,I)}else P=Pn._fromJSON(e,I);v!==c&&(g=P),c=v;break}}catch{}const y=a.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Qs(c,e,s):(c=y[0],g&&await c._set(h,g.toJSON()),await Promise.all(t.map(async v=>{if(v!==c)try{await v._remove(h)}catch{}})),new Qs(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F_(e))return"Blackberry";if(b_(e))return"Webos";if(NS(e))return"Safari";if((e.includes("chrome/")||VS(e))&&!e.includes("edge/"))return"Chrome";if(M_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function kS(i=Gt()){return/firefox\//i.test(i)}function NS(i=Gt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VS(i=Gt()){return/crios\//i.test(i)}function L_(i=Gt()){return/iemobile/i.test(i)}function M_(i=Gt()){return/android/i.test(i)}function F_(i=Gt()){return/blackberry/i.test(i)}function b_(i=Gt()){return/webos/i.test(i)}function DS(i=Gt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function xS(){return TE()&&document.documentMode===10}function OS(i=Gt()){return DS(i)||M_(i)||b_(i)||F_(i)||/windows phone/i.test(i)||L_(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(i,e=[]){let t;switch(i){case"Browser":t=Rg(Gt());break;case"Worker":t=`${Rg(Gt())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xu}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((h,g)=>{try{const y=e(c);h(y)}catch(y){g(y)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(i,e={}){return Oa(i,"GET","/v2/passwordPolicy",Zf(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=6;class bS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pg(this),this.idTokenSubscription=new Pg(this),this.beforeStateQueue=new LS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ru(this,{idToken:e}),s=await Pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===h)&&g?.user&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zr(this.app))return Promise.reject(fa(this));const t=e?mn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zr(this.app)?Promise.reject(fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zr(this.app)?Promise.reject(fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MS(this),t=new bS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ra("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await PS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bi(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[Bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,a);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function j_(i){return mn(i)}class Pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=kE(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(i,e){const t=Gg(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(ma(c,e??{}))return a;Au(a,"already-initialized")}return t.initialize({options:e})}function zS(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Bi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(i,e){return vS(i,"POST","/v1/accounts:signUp",Zf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await Pn._fromIdTokenResponse(e,s,a),h=kg(s);return new Ca({user:c,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=kg(s);return new Ca({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function kg(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(i){if(Zr(i.app))return Promise.reject(fa(i));const e=j_(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ca({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await BS(e,{returnSecureToken:!0}),s=await Ca._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}function z_(i,e,t,s){return mn(i).onAuthStateChanged(e,t,s)}const ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=1e3,HS=10;class $_ extends B_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,g,y)=>{this.notifyListeners(h,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},c=this.storage.getItem(s);xS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,HS):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},qS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$_.type="LOCAL";const WS=$_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS extends B_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KS.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Wu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,h=this.handlersMap[a];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const g=Array.from(h).map(async v=>v(t.origin,c)),y=await GS(g);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,h;return new Promise((g,y)=>{const v=QS("",20);a.port1.start();const I=setTimeout(()=>{y(new Error("unsupported_event"))},s);h={messageChannel:a,onMessage(P){const U=P;if(U.data.eventId===v)switch(U.data.status){case"ack":clearTimeout(I),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(U.data.response);break;default:clearTimeout(I),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(h),a.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){return typeof Ng().WorkerGlobalScope<"u"&&typeof Ng().importScripts=="function"}async function YS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JS(){return navigator?.serviceWorker?.controller||null}function ZS(){return q_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="firebaseLocalStorageDb",eA=1,Nu="firebaseLocalStorage",W_="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ku(i,e){return i.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function tA(){const i=indexedDB.deleteDatabase(H_);return new La(i).toPromise()}function af(){const i=indexedDB.open(H_,eA);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Nu,{keyPath:W_})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Nu)?e(s):(s.close(),await tA(),e(await af()))})})}async function Vg(i,e,t){const s=Ku(i,!0).put({[W_]:e,value:t});return new La(s).toPromise()}async function nA(i,e){const t=Ku(i,!1).get(e),s=await new La(t).toPromise();return s===void 0?null:s.value}function Dg(i,e){const t=Ku(i,!0).delete(e);return new La(t).toPromise()}const rA=800,iA=3;class K_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>iA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wu._getInstance(ZS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YS(),!this.activeServiceWorker)return;this.sender=new XS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await af();return await Vg(e,ku,"1"),await Dg(e,ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Vg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>nA(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Ku(a,!1).getAll();return new La(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}K_.type="LOCAL";const sA=K_;new xa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xa(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xa(5e3,15e3);var xg="@firebase/auth",Og="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lA(i){Xs(new Wi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=s.options;Me(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:h,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U_(i)},v=new US(s,a,c,y);return zS(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xs(new Wi("auth-internal",e=>{const t=j_(e.getProvider("auth").getImmediate());return(s=>new oA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(xg,Og,aA(i)),ni(xg,Og,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=300;pE("authIdTokenMaxAge");lA("Browser");const cA={apiKey:"",authDomain:"ness-e6877.firebaseapp.com",projectId:"ness-e6877",appId:"",storageBucket:"ness-e6877.appspot.com",messagingSenderId:"",measurementId:""},G_=Vw(cA),Hs=jS(G_,{persistence:[sA,WS]}),hA=new Promise(i=>{const e=z_(Hs,()=>{e(),i()})}),Vu=$0(G_,{useFetchStreams:!0,experimentalAutoDetectLongPolling:!0});async function Q_(i,e){return await Yf(bf(Vu,"items",i),{...e,updatedAt:Iu(),updatedBy:Hs.currentUser?.uid??"anon"},{merge:!0}),i}async function fA(i){const e=globalThis.crypto?.randomUUID?.()??`it_${Date.now()}`;return await Q_(e,i),e}typeof window<"u"&&(window.__addItem=fA,window.__upsertItem=Q_,console.log("[items-api] helpers disponibles: __addItem({...}), __upsertItem(id,{...})"));(async()=>{await hA;const i=tS(B0(Vu,"items"),nS("updatedAt","desc"),rS(20));aS(i,e=>{console.log("[LIVE items]",e.docs.map(t=>({id:t.id,...t.data()})))},e=>console.error("[LIVE items] error:",e)),globalThis.__pingItem=async()=>{await Yf(bf(Vu,"items","__ping"),{ts:Iu(),updatedAt:Iu(),host:typeof window<"u"?window.location.host:"ssr"},{merge:!0}),console.log("(__pingItem) escrito items/__ping")}})();console.log("[auth-init] cargado");new Promise((i,e)=>{const t=s=>{console.log("[AUTH OK]",s),i(s),(async()=>{try{await Yf(bf(Vu,"__diag","auth"),{ts:Iu(),uid:s,host:typeof window<"u"?window.location.host:"ssr",ua:typeof navigator<"u"?navigator.userAgent:"n/a"},{merge:!0}),console.log("[AUTH PING] escrito __diag/auth")}catch(a){console.error("[AUTH PING] fallo:",a)}})()};try{if(Hs.currentUser?.uid)return t(Hs.currentUser.uid);const s=z_(Hs,async a=>{try{if(a?.uid)return s(),t(a.uid);const c=await $S(Hs);return s(),t(c.user.uid)}catch(c){s(),console.error("[AUTH ERROR] signInAnonymously:",c),e(c)}})}catch(s){console.error("[AUTH ERROR] inesperado:",s),e(s)}});var Cn=lf();const dA=jg(Cn);var ru={},Vh={exports:{}},Ht={},Dh={exports:{}},xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function pA(){return Lg||(Lg=1,(function(i){function e(Z,ce){var ie=Z.length;Z.push(ce);e:for(;0<ie;){var D=ie-1>>>1,H=Z[D];if(0<a(H,ce))Z[D]=ce,Z[ie]=H,ie=D;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ce=Z[0],ie=Z.pop();if(ie!==ce){Z[0]=ie;e:for(var D=0,H=Z.length,Ee=H>>>1;D<Ee;){var we=2*(D+1)-1,Se=Z[we],Ae=we+1,Fe=Z[Ae];if(0>a(Se,ie))Ae<H&&0>a(Fe,Se)?(Z[D]=Fe,Z[Ae]=ie,D=Ae):(Z[D]=Se,Z[we]=ie,D=we);else if(Ae<H&&0>a(Fe,ie))Z[D]=Fe,Z[Ae]=ie,D=Ae;else break e}}return ce}function a(Z,ce){var ie=Z.sortIndex-ce.sortIndex;return ie!==0?ie:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var y=[],v=[],I=1,P=null,U=3,q=!1,ee=!1,X=!1,K=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Te(Z){for(var ce=t(v);ce!==null;){if(ce.callback===null)s(v);else if(ce.startTime<=Z)s(v),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=t(v)}}function xe(Z){if(X=!1,Te(Z),!ee)if(t(y)!==null)ee=!0,kt(je);else{var ce=t(v);ce!==null&&Xe(xe,ce.startTime-Z)}}function je(Z,ce){ee=!1,X&&(X=!1,ge(w),w=-1),q=!0;var ie=U;try{for(Te(ce),P=t(y);P!==null&&(!(P.expirationTime>ce)||Z&&!k());){var D=P.callback;if(typeof D=="function"){P.callback=null,U=P.priorityLevel;var H=D(P.expirationTime<=ce);ce=i.unstable_now(),typeof H=="function"?P.callback=H:P===t(y)&&s(y),Te(ce)}else s(y);P=t(y)}if(P!==null)var Ee=!0;else{var we=t(v);we!==null&&Xe(xe,we.startTime-ce),Ee=!1}return Ee}finally{P=null,U=ie,q=!1}}var B=!1,C=null,w=-1,A=5,V=-1;function k(){return!(i.unstable_now()-V<A)}function x(){if(C!==null){var Z=i.unstable_now();V=Z;var ce=!0;try{ce=C(!0,Z)}finally{ce?S():(B=!1,C=null)}}else B=!1}var S;if(typeof ve=="function")S=function(){ve(x)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,yt=$e.port2;$e.port1.onmessage=x,S=function(){yt.postMessage(null)}}else S=function(){K(x,0)};function kt(Z){C=Z,B||(B=!0,S())}function Xe(Z,ce){w=K(function(){Z(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){ee||q||(ee=!0,kt(je))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return U},i.unstable_getFirstCallbackNode=function(){return t(y)},i.unstable_next=function(Z){switch(U){case 1:case 2:case 3:var ce=3;break;default:ce=U}var ie=U;U=ce;try{return Z()}finally{U=ie}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ie=U;U=Z;try{return ce()}finally{U=ie}},i.unstable_scheduleCallback=function(Z,ce,ie){var D=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?D+ie:D):ie=D,Z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ie+H,Z={id:I++,callback:ce,priorityLevel:Z,startTime:ie,expirationTime:H,sortIndex:-1},ie>D?(Z.sortIndex=ie,e(v,Z),t(y)===null&&Z===t(v)&&(X?(ge(w),w=-1):X=!0,Xe(xe,ie-D))):(Z.sortIndex=H,e(y,Z),ee||q||(ee=!0,kt(je))),Z},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Z){var ce=U;return function(){var ie=U;U=ce;try{return Z.apply(this,arguments)}finally{U=ie}}}})(xh)),xh}var Mg;function mA(){return Mg||(Mg=1,Dh.exports=pA()),Dh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function gA(){if(Fg)return Ht;Fg=1;var i=lf(),e=mA();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(a[n]=r,n=0;n<r.length;n++)s.add(r[n])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},P={};function U(n){return y.call(P,n)?!0:y.call(I,n)?!1:v.test(n)?P[n]=!0:(I[n]=!0,!1)}function q(n,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ee(n,r,o,u){if(r===null||typeof r>"u"||q(n,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(n,r,o,u,f,d,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=o,this.propertyName=n,this.type=r,this.sanitizeURL=d,this.removeEmptyString=_}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){K[n]=new X(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];K[r]=new X(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){K[n]=new X(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){K[n]=new X(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){K[n]=new X(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){K[n]=new X(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){K[n]=new X(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){K[n]=new X(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){K[n]=new X(n,5,!1,n.toLowerCase(),null,!1,!1)});var ge=/[\-:]([a-z])/g;function ve(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(ge,ve);K[r]=new X(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(ge,ve);K[r]=new X(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(ge,ve);K[r]=new X(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){K[n]=new X(n,1,!1,n.toLowerCase(),null,!1,!1)}),K.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){K[n]=new X(n,1,!1,n.toLowerCase(),null,!0,!0)});function Te(n,r,o,u){var f=K.hasOwnProperty(r)?K[r]:null;(f!==null?f.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(ee(r,o,f,u)&&(o=null),u||f===null?U(r)&&(o===null?n.removeAttribute(r):n.setAttribute(r,""+o)):f.mustUseProperty?n[f.propertyName]=o===null?f.type===3?!1:"":o:(r=f.attributeName,u=f.attributeNamespace,o===null?n.removeAttribute(r):(f=f.type,o=f===3||f===4&&o===!0?"":""+o,u?n.setAttributeNS(u,r,o):n.setAttribute(r,o))))}var xe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,je=Symbol.for("react.element"),B=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),k=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),yt=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,D;function H(n){if(D===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+n}var Ee=!1;function we(n,r){if(!n||Ee)return"";Ee=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(n,[],r)}else{try{r.call()}catch(F){u=F}n.call(r.prototype)}else{try{throw Error()}catch(F){u=F}n()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),d=u.stack.split(`
`),_=f.length-1,T=d.length-1;1<=_&&0<=T&&f[_]!==d[T];)T--;for(;1<=_&&0<=T;_--,T--)if(f[_]!==d[T]){if(_!==1||T!==1)do if(_--,T--,0>T||f[_]!==d[T]){var R=`
`+f[_].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=_&&0<=T);break}}}finally{Ee=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?H(n):""}function Se(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case B:return"Portal";case A:return"Profiler";case w:return"StrictMode";case S:return"Suspense";case $e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case V:return(n._context.displayName||"Context")+".Provider";case x:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case yt:return r=n.displayName||null,r!==null?r:Ae(n.type)||"Memo";case kt:r=n._payload,n=n._init;try{return Ae(n(r))}catch{}}return null}function Fe(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ve(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ze(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ft(n){var r=ze(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,d=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){u=""+_,d.call(this,_)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Zi(n){n._valueTracker||(n._valueTracker=Ft(n))}function ao(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=ze(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Tr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function es(n,r){var o=r.checked;return ie({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function Ma(n,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Ve(r.value!=null?r.value:o),n._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ts(n,r){r=r.checked,r!=null&&Te(n,"checked",r,!1)}function di(n,r){ts(n,r);var o=Ve(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?at(n,r.type,o):r.hasOwnProperty("defaultValue")&&at(n,r.type,Ve(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function lo(n,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,o||r===n.value||(n.value=r),n.defaultValue=r}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function at(n,r,o){(r!=="number"||Tr(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var rt=Array.isArray;function gn(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ve(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function uo(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function co(n,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(t(92));if(rt(o)){if(1<o.length)throw Error(t(93));o=o[0]}r=o}r==null&&(r=""),o=r}n._wrapperState={initialValue:Ve(o)}}function Fa(n,r){var o=Ve(r.value),u=Ve(r.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),r.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),u!=null&&(n.defaultValue=""+u)}function Ir(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function ho(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ns(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?ho(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sr,ba=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,f){MSApp.execUnsafeLocalFunction(function(){return n(r,o,u,f)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Sr=Sr||document.createElement("div"),Sr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Sr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function pi(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ua=["Webkit","ms","Moz","O"];Object.keys(Ar).forEach(function(n){Ua.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Ar[r]=Ar[n]})});function Cr(n,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Ar.hasOwnProperty(n)&&Ar[n]?(""+r).trim():r+"px"}function rs(n,r){n=n.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,f=Cr(o,r[o],u);o==="float"&&(o="cssFloat"),u?n.setProperty(o,f):n[o]=f}}var fo=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yn(n,r){if(r){if(fo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function is(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rr=null;function ss(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var er=null,tr=null,tt=null;function po(n){if(n=zo(n)){if(typeof er!="function")throw Error(t(280));var r=n.stateNode;r&&(r=fl(r),er(n.stateNode,n.type,r))}}function Pr(n){tr?tt?tt.push(n):tt=[n]:tr=n}function kr(){if(tr){var n=tr,r=tt;if(tt=tr=null,po(n),r)for(n=0;n<r.length;n++)po(r[n])}}function ja(n,r){return n(r)}function za(){}var Nn=!1;function Ba(n,r,o){if(Nn)return n(r,o);Nn=!0;try{return ja(n,r,o)}finally{Nn=!1,(tr!==null||tt!==null)&&(za(),kr())}}function mi(n,r){var o=n.stateNode;if(o===null)return null;var u=fl(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,r,typeof o));return o}var Nr=!1;if(g)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Nr=!1}function $a(n,r,o,u,f,d,_,T,R){var F=Array.prototype.slice.call(arguments,3);try{r.apply(o,F)}catch(G){this.onError(G)}}var nr=!1,Vn=null,os=!1,sn=null,qa={onError:function(n){nr=!0,Vn=n}};function Ha(n,r,o,u,f,d,_,T,R){nr=!1,Vn=null,$a.apply(qa,arguments)}function mo(n,r,o,u,f,d,_,T,R){if(Ha.apply(this,arguments),nr){if(nr){var F=Vn;nr=!1,Vn=null}else throw Error(t(198));os||(os=!0,sn=F)}}function _n(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function go(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Wa(n){if(_n(n)!==n)throw Error(t(188))}function Ka(n){var r=n.alternate;if(!r){if(r=_n(n),r===null)throw Error(t(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var d=f.alternate;if(d===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===o)return Wa(f),n;if(d===u)return Wa(f),r;d=d.sibling}throw Error(t(188))}if(o.return!==u.return)o=f,u=d;else{for(var _=!1,T=f.child;T;){if(T===o){_=!0,o=f,u=d;break}if(T===u){_=!0,u=f,o=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===o){_=!0,o=d,u=f;break}if(T===u){_=!0,u=d,o=f;break}T=T.sibling}if(!_)throw Error(t(189))}}if(o.alternate!==u)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:r}function Ga(n){return n=Ka(n),n!==null?gi(n):null}function gi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=gi(n);if(r!==null)return r;n=n.sibling}return null}var yo=e.unstable_scheduleCallback,as=e.unstable_cancelCallback,yi=e.unstable_shouldYield,rr=e.unstable_requestPaint,We=e.unstable_now,Gu=e.unstable_getCurrentPriorityLevel,ls=e.unstable_ImmediatePriority,_o=e.unstable_UserBlockingPriority,_i=e.unstable_NormalPriority,vo=e.unstable_LowPriority,us=e.unstable_IdlePriority,vi=null,Qt=null;function Qa(n){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(vi,n,void 0,(n.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Ei,Dn=Math.log,on=Math.LN2;function Ei(n){return n>>>=0,n===0?32:31-(Dn(n)/on|0)|0}var xn=64,Dr=4194304;function Le(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ir(n,r){var o=n.pendingLanes;if(o===0)return 0;var u=0,f=n.suspendedLanes,d=n.pingedLanes,_=o&268435455;if(_!==0){var T=_&~f;T!==0?u=Le(T):(d&=_,d!==0&&(u=Le(d)))}else _=o&~f,_!==0?u=Le(_):d!==0&&(u=Le(d));if(u===0)return 0;if(r!==0&&r!==u&&(r&f)===0&&(f=u&-u,d=r&-r,f>=d||f===16&&(d&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=u;0<r;)o=31-Xt(r),f=1<<o,u|=n[o],r&=~f;return u}function wi(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes;0<d;){var _=31-Xt(d),T=1<<_,R=f[_];R===-1?((T&o)===0||(T&u)!==0)&&(f[_]=wi(T,r)):R<=r&&(n.expiredLanes|=T),d&=~T}}function Eo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function wo(){var n=xn;return xn<<=1,(xn&4194240)===0&&(xn=64),n}function To(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ii(n,r,o){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Xt(r),n[r]=o}function Qu(n,r){var o=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<o;){var f=31-Xt(o),d=1<<f;r[f]=0,u[f]=-1,n[f]=-1,o&=~d}}function Io(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-Xt(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}var ke=0;function On(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var So,cs,Ao,Co,Ro,Ln=!1,hs=[],Mn=null,Fn=null,Tt=null,Si=new Map,sr=new Map,Yt=[],Xa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xr(n,r){switch(n){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Si.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(r.pointerId)}}function vn(n,r,o,u,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:d,targetContainers:[f]},r!==null&&(r=zo(r),r!==null&&cs(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function Ya(n,r,o,u,f){switch(r){case"focusin":return Mn=vn(Mn,n,r,o,u,f),!0;case"dragenter":return Fn=vn(Fn,n,r,o,u,f),!0;case"mouseover":return Tt=vn(Tt,n,r,o,u,f),!0;case"pointerover":var d=f.pointerId;return Si.set(d,vn(Si.get(d)||null,n,r,o,u,f)),!0;case"gotpointercapture":return d=f.pointerId,sr.set(d,vn(sr.get(d)||null,n,r,o,u,f)),!0}return!1}function fs(n){var r=Pi(n.target);if(r!==null){var o=_n(r);if(o!==null){if(r=o.tag,r===13){if(r=go(o),r!==null){n.blockedOn=r,Ro(n.priority,function(){Ao(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Be(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=ds(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Rr=u,o.target.dispatchEvent(u),Rr=null}else return r=zo(o),r!==null&&cs(r),n.blockedOn=o,!1;r.shift()}return!0}function Ja(n,r,o){Be(n)&&o.delete(r)}function Xu(){Ln=!1,Mn!==null&&Be(Mn)&&(Mn=null),Fn!==null&&Be(Fn)&&(Fn=null),Tt!==null&&Be(Tt)&&(Tt=null),Si.forEach(Ja),sr.forEach(Ja)}function Or(n,r){n.blockedOn===r&&(n.blockedOn=null,Ln||(Ln=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xu)))}function Lr(n){function r(f){return Or(f,n)}if(0<hs.length){Or(hs[0],n);for(var o=1;o<hs.length;o++){var u=hs[o];u.blockedOn===n&&(u.blockedOn=null)}}for(Mn!==null&&Or(Mn,n),Fn!==null&&Or(Fn,n),Tt!==null&&Or(Tt,n),Si.forEach(r),sr.forEach(r),o=0;o<Yt.length;o++)u=Yt[o],u.blockedOn===n&&(u.blockedOn=null);for(;0<Yt.length&&(o=Yt[0],o.blockedOn===null);)fs(o),o.blockedOn===null&&Yt.shift()}var or=xe.ReactCurrentBatchConfig,ar=!0;function bn(n,r,o,u){var f=ke,d=or.transition;or.transition=null;try{ke=1,Po(n,r,o,u)}finally{ke=f,or.transition=d}}function Za(n,r,o,u){var f=ke,d=or.transition;or.transition=null;try{ke=4,Po(n,r,o,u)}finally{ke=f,or.transition=d}}function Po(n,r,o,u){if(ar){var f=ds(n,r,o,u);if(f===null)ac(n,r,u,Un,o),xr(n,u);else if(Ya(f,n,r,o,u))u.stopPropagation();else if(xr(n,u),r&4&&-1<Xa.indexOf(n)){for(;f!==null;){var d=zo(f);if(d!==null&&So(d),d=ds(n,r,o,u),d===null&&ac(n,r,u,Un,o),d===f)break;f=d}f!==null&&u.stopPropagation()}else ac(n,r,u,null,o)}}var Un=null;function ds(n,r,o,u){if(Un=null,n=ss(u),n=Pi(n),n!==null)if(r=_n(n),r===null)n=null;else if(o=r.tag,o===13){if(n=go(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Un=n,null}function ps(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gu()){case ls:return 1;case _o:return 4;case _i:case vo:return 16;case us:return 536870912;default:return 16}default:return 16}}var Jt=null,ms=null,lr=null;function el(){if(lr)return lr;var n,r=ms,o=r.length,u,f="value"in Jt?Jt.value:Jt.textContent,d=f.length;for(n=0;n<o&&r[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&r[o-u]===f[d-u];u++);return lr=f.slice(n,1<u?1-u:void 0)}function Ai(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function jn(){return!0}function ko(){return!1}function Nt(n){function r(o,u,f,d,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?jn:ko,this.isPropagationStopped=ko,this}return ie(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),r}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=Nt(zn),Mr=ie({},zn,{view:0,detail:0}),gs=Nt(Mr),ys,_s,Zt,Ri=ie({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ye,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Zt&&(Zt&&n.type==="mousemove"?(ys=n.screenX-Zt.screenX,_s=n.screenY-Zt.screenY):_s=ys=0,Zt=n),ys)},movementY:function(n){return"movementY"in n?n.movementY:_s}}),No=Nt(Ri),tl=ie({},Ri,{dataTransfer:0}),nl=Nt(tl),vs=ie({},Mr,{relatedTarget:0}),It=Nt(vs),rl=ie({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),il=Nt(rl),Fr=ie({},zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),l=Nt(Fr),p=ie({},zn,{data:0}),m=Nt(p),E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=b[n])?!!r[n]:!1}function ye(){return J}var it=ie({},Mr,{key:function(n){if(n.key){var r=E[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ai(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?L[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ye,charCode:function(n){return n.type==="keypress"?Ai(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ai(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ue=Nt(it),lt=ie({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),en=Nt(lt),ur=ie({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ye}),Bn=Nt(ur),$n=ie({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Es=Nt($n),Vo=ie({},Ri,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X_=Nt(Vo),Y_=[9,13,27,32],Yu=g&&"CompositionEvent"in window,Do=null;g&&"documentMode"in document&&(Do=document.documentMode);var J_=g&&"TextEvent"in window&&!Do,ed=g&&(!Yu||Do&&8<Do&&11>=Do),td=" ",nd=!1;function rd(n,r){switch(n){case"keyup":return Y_.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function id(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ws=!1;function Z_(n,r){switch(n){case"compositionend":return id(r);case"keypress":return r.which!==32?null:(nd=!0,td);case"textInput":return n=r.data,n===td&&nd?null:n;default:return null}}function ev(n,r){if(ws)return n==="compositionend"||!Yu&&rd(n,r)?(n=el(),lr=ms=Jt=null,ws=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ed&&r.locale!=="ko"?null:r.data;default:return null}}var tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!tv[n.type]:r==="textarea"}function od(n,r,o,u){Pr(u),r=ul(r,"onChange"),0<r.length&&(o=new Ci("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var xo=null,Oo=null;function nv(n){Sd(n,0)}function sl(n){var r=Cs(n);if(ao(r))return n}function rv(n,r){if(n==="change")return r}var ad=!1;if(g){var Ju;if(g){var Zu="oninput"in document;if(!Zu){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),Zu=typeof ld.oninput=="function"}Ju=Zu}else Ju=!1;ad=Ju&&(!document.documentMode||9<document.documentMode)}function ud(){xo&&(xo.detachEvent("onpropertychange",cd),Oo=xo=null)}function cd(n){if(n.propertyName==="value"&&sl(Oo)){var r=[];od(r,Oo,n,ss(n)),Ba(nv,r)}}function iv(n,r,o){n==="focusin"?(ud(),xo=r,Oo=o,xo.attachEvent("onpropertychange",cd)):n==="focusout"&&ud()}function sv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sl(Oo)}function ov(n,r){if(n==="click")return sl(r)}function av(n,r){if(n==="input"||n==="change")return sl(r)}function lv(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var En=typeof Object.is=="function"?Object.is:lv;function Lo(n,r){if(En(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!y.call(r,f)||!En(n[f],r[f]))return!1}return!0}function hd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function fd(n,r){var o=hd(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=hd(o)}}function dd(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?dd(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function pd(){for(var n=window,r=Tr();r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Tr(n.document)}return r}function ec(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function uv(n){var r=pd(),o=n.focusedElem,u=n.selectionRange;if(r!==o&&o&&o.ownerDocument&&dd(o.ownerDocument.documentElement,o)){if(u!==null&&ec(o)){if(r=u.start,n=u.end,n===void 0&&(n=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(n,o.value.length);else if(n=(r=o.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var f=o.textContent.length,d=Math.min(u.start,f);u=u.end===void 0?d:Math.min(u.end,f),!n.extend&&d>u&&(f=u,u=d,d=f),f=fd(o,d);var _=fd(o,u);f&&_&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),n.removeAllRanges(),d>u?(n.addRange(r),n.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),n.addRange(r)))}}for(r=[],n=o;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)n=r[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cv=g&&"documentMode"in document&&11>=document.documentMode,Ts=null,tc=null,Mo=null,nc=!1;function md(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;nc||Ts==null||Ts!==Tr(u)||(u=Ts,"selectionStart"in u&&ec(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Mo&&Lo(Mo,u)||(Mo=u,u=ul(tc,"onSelect"),0<u.length&&(r=new Ci("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Ts)))}function ol(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Is={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},rc={},gd={};g&&(gd=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function al(n){if(rc[n])return rc[n];if(!Is[n])return n;var r=Is[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in gd)return rc[n]=r[o];return n}var yd=al("animationend"),_d=al("animationiteration"),vd=al("animationstart"),Ed=al("transitionend"),wd=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(n,r){wd.set(n,r),c(r,[n])}for(var ic=0;ic<Td.length;ic++){var sc=Td[ic],hv=sc.toLowerCase(),fv=sc[0].toUpperCase()+sc.slice(1);br(hv,"on"+fv)}br(yd,"onAnimationEnd"),br(_d,"onAnimationIteration"),br(vd,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(Ed,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Id(n,r,o){var u=n.type||"unknown-event";n.currentTarget=o,mo(u,r,void 0,n),n.currentTarget=null}function Sd(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var d=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],R=T.instance,F=T.currentTarget;if(T=T.listener,R!==d&&f.isPropagationStopped())break e;Id(f,T,F),d=R}else for(_=0;_<u.length;_++){if(T=u[_],R=T.instance,F=T.currentTarget,T=T.listener,R!==d&&f.isPropagationStopped())break e;Id(f,T,F),d=R}}}if(os)throw n=sn,os=!1,sn=null,n}function Ke(n,r){var o=r[dc];o===void 0&&(o=r[dc]=new Set);var u=n+"__bubble";o.has(u)||(Ad(r,n,2,!1),o.add(u))}function oc(n,r,o){var u=0;r&&(u|=4),Ad(o,n,u,r)}var ll="_reactListening"+Math.random().toString(36).slice(2);function bo(n){if(!n[ll]){n[ll]=!0,s.forEach(function(o){o!=="selectionchange"&&(dv.has(o)||oc(o,!1,n),oc(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[ll]||(r[ll]=!0,oc("selectionchange",!1,r))}}function Ad(n,r,o,u){switch(ps(r)){case 1:var f=bn;break;case 4:f=Za;break;default:f=Po}o=f.bind(null,r,o,n),f=void 0,!Nr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function ac(n,r,o,u,f){var d=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(_===4)for(_=u.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;_=_.return}for(;T!==null;){if(_=Pi(T),_===null)return;if(R=_.tag,R===5||R===6){u=d=_;continue e}T=T.parentNode}}u=u.return}Ba(function(){var F=d,G=ss(o),Q=[];e:{var W=wd.get(n);if(W!==void 0){var ne=Ci,oe=n;switch(n){case"keypress":if(Ai(o)===0)break e;case"keydown":case"keyup":ne=Ue;break;case"focusin":oe="focus",ne=It;break;case"focusout":oe="blur",ne=It;break;case"beforeblur":case"afterblur":ne=It;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Bn;break;case yd:case _d:case vd:ne=il;break;case Ed:ne=Es;break;case"scroll":ne=gs;break;case"wheel":ne=X_;break;case"copy":case"cut":case"paste":ne=l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=en}var ae=(r&4)!==0,st=!ae&&n==="scroll",O=ae?W!==null?W+"Capture":null:W;ae=[];for(var N=F,M;N!==null;){M=N;var Y=M.stateNode;if(M.tag===5&&Y!==null&&(M=Y,O!==null&&(Y=mi(N,O),Y!=null&&ae.push(Uo(N,Y,M)))),st)break;N=N.return}0<ae.length&&(W=new ne(W,oe,null,o,G),Q.push({event:W,listeners:ae}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",W&&o!==Rr&&(oe=o.relatedTarget||o.fromElement)&&(Pi(oe)||oe[cr]))break e;if((ne||W)&&(W=G.window===G?G:(W=G.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(oe=o.relatedTarget||o.toElement,ne=F,oe=oe?Pi(oe):null,oe!==null&&(st=_n(oe),oe!==st||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=F),ne!==oe)){if(ae=No,Y="onMouseLeave",O="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(ae=en,Y="onPointerLeave",O="onPointerEnter",N="pointer"),st=ne==null?W:Cs(ne),M=oe==null?W:Cs(oe),W=new ae(Y,N+"leave",ne,o,G),W.target=st,W.relatedTarget=M,Y=null,Pi(G)===F&&(ae=new ae(O,N+"enter",oe,o,G),ae.target=M,ae.relatedTarget=st,Y=ae),st=Y,ne&&oe)t:{for(ae=ne,O=oe,N=0,M=ae;M;M=Ss(M))N++;for(M=0,Y=O;Y;Y=Ss(Y))M++;for(;0<N-M;)ae=Ss(ae),N--;for(;0<M-N;)O=Ss(O),M--;for(;N--;){if(ae===O||O!==null&&ae===O.alternate)break t;ae=Ss(ae),O=Ss(O)}ae=null}else ae=null;ne!==null&&Cd(Q,W,ne,ae,!1),oe!==null&&st!==null&&Cd(Q,st,oe,ae,!0)}}e:{if(W=F?Cs(F):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var le=rv;else if(sd(W))if(ad)le=av;else{le=sv;var he=iv}else(ne=W.nodeName)&&ne.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(le=ov);if(le&&(le=le(n,F))){od(Q,le,o,G);break e}he&&he(n,W,F),n==="focusout"&&(he=W._wrapperState)&&he.controlled&&W.type==="number"&&at(W,"number",W.value)}switch(he=F?Cs(F):window,n){case"focusin":(sd(he)||he.contentEditable==="true")&&(Ts=he,tc=F,Mo=null);break;case"focusout":Mo=tc=Ts=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,md(Q,o,G);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":md(Q,o,G)}var fe;if(Yu)e:{switch(n){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else ws?rd(n,o)&&(pe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(pe="onCompositionStart");pe&&(ed&&o.locale!=="ko"&&(ws||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&ws&&(fe=el()):(Jt=G,ms="value"in Jt?Jt.value:Jt.textContent,ws=!0)),he=ul(F,pe),0<he.length&&(pe=new m(pe,n,null,o,G),Q.push({event:pe,listeners:he}),fe?pe.data=fe:(fe=id(o),fe!==null&&(pe.data=fe)))),(fe=J_?Z_(n,o):ev(n,o))&&(F=ul(F,"onBeforeInput"),0<F.length&&(G=new m("onBeforeInput","beforeinput",null,o,G),Q.push({event:G,listeners:F}),G.data=fe))}Sd(Q,r)})}function Uo(n,r,o){return{instance:n,listener:r,currentTarget:o}}function ul(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,d=f.stateNode;f.tag===5&&d!==null&&(f=d,d=mi(n,o),d!=null&&u.unshift(Uo(n,d,f)),d=mi(n,r),d!=null&&u.push(Uo(n,d,f))),n=n.return}return u}function Ss(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Cd(n,r,o,u,f){for(var d=r._reactName,_=[];o!==null&&o!==u;){var T=o,R=T.alternate,F=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&F!==null&&(T=F,f?(R=mi(o,d),R!=null&&_.unshift(Uo(o,R,T))):f||(R=mi(o,d),R!=null&&_.push(Uo(o,R,T)))),o=o.return}_.length!==0&&n.push({event:r,listeners:_})}var pv=/\r\n?/g,mv=/\u0000|\uFFFD/g;function Rd(n){return(typeof n=="string"?n:""+n).replace(pv,`
`).replace(mv,"")}function cl(n,r,o){if(r=Rd(r),Rd(n)!==r&&o)throw Error(t(425))}function hl(){}var lc=null,uc=null;function cc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hc=typeof setTimeout=="function"?setTimeout:void 0,gv=typeof clearTimeout=="function"?clearTimeout:void 0,Pd=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof Pd<"u"?function(n){return Pd.resolve(null).then(n).catch(_v)}:hc;function _v(n){setTimeout(function(){throw n})}function fc(n,r){var o=r,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(u===0){n.removeChild(f),Lr(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=f}while(o);Lr(r)}function Ur(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function kd(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}var As=Math.random().toString(36).slice(2),qn="__reactFiber$"+As,jo="__reactProps$"+As,cr="__reactContainer$"+As,dc="__reactEvents$"+As,vv="__reactListeners$"+As,Ev="__reactHandles$"+As;function Pi(n){var r=n[qn];if(r)return r;for(var o=n.parentNode;o;){if(r=o[cr]||o[qn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=kd(n);n!==null;){if(o=n[qn])return o;n=kd(n)}return r}n=o,o=n.parentNode}return null}function zo(n){return n=n[qn]||n[cr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Cs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function fl(n){return n[jo]||null}var pc=[],Rs=-1;function jr(n){return{current:n}}function Ge(n){0>Rs||(n.current=pc[Rs],pc[Rs]=null,Rs--)}function qe(n,r){Rs++,pc[Rs]=n.current,n.current=r}var zr={},Vt=jr(zr),jt=jr(!1),ki=zr;function Ps(n,r){var o=n.type.contextTypes;if(!o)return zr;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var f={},d;for(d in o)f[d]=r[d];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=f),f}function zt(n){return n=n.childContextTypes,n!=null}function dl(){Ge(jt),Ge(Vt)}function Nd(n,r,o){if(Vt.current!==zr)throw Error(t(168));qe(Vt,r),qe(jt,o)}function Vd(n,r,o){var u=n.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var f in u)if(!(f in r))throw Error(t(108,Fe(n)||"Unknown",f));return ie({},o,u)}function pl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zr,ki=Vt.current,qe(Vt,n),qe(jt,jt.current),!0}function Dd(n,r,o){var u=n.stateNode;if(!u)throw Error(t(169));o?(n=Vd(n,r,ki),u.__reactInternalMemoizedMergedChildContext=n,Ge(jt),Ge(Vt),qe(Vt,n)):Ge(jt),qe(jt,o)}var hr=null,ml=!1,mc=!1;function xd(n){hr===null?hr=[n]:hr.push(n)}function wv(n){ml=!0,xd(n)}function Br(){if(!mc&&hr!==null){mc=!0;var n=0,r=ke;try{var o=hr;for(ke=1;n<o.length;n++){var u=o[n];do u=u(!0);while(u!==null)}hr=null,ml=!1}catch(f){throw hr!==null&&(hr=hr.slice(n+1)),yo(ls,Br),f}finally{ke=r,mc=!1}}return null}var ks=[],Ns=0,gl=null,yl=0,an=[],ln=0,Ni=null,fr=1,dr="";function Vi(n,r){ks[Ns++]=yl,ks[Ns++]=gl,gl=n,yl=r}function Od(n,r,o){an[ln++]=fr,an[ln++]=dr,an[ln++]=Ni,Ni=n;var u=fr;n=dr;var f=32-Xt(u)-1;u&=~(1<<f),o+=1;var d=32-Xt(r)+f;if(30<d){var _=f-f%5;d=(u&(1<<_)-1).toString(32),u>>=_,f-=_,fr=1<<32-Xt(r)+f|o<<f|u,dr=d+n}else fr=1<<d|o<<f|u,dr=n}function gc(n){n.return!==null&&(Vi(n,1),Od(n,1,0))}function yc(n){for(;n===gl;)gl=ks[--Ns],ks[Ns]=null,yl=ks[--Ns],ks[Ns]=null;for(;n===Ni;)Ni=an[--ln],an[ln]=null,dr=an[--ln],an[ln]=null,fr=an[--ln],an[ln]=null}var tn=null,nn=null,Ye=!1,wn=null;function Ld(n,r){var o=fn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=n,r=n.deletions,r===null?(n.deletions=[o],n.flags|=16):r.push(o)}function Md(n,r){switch(n.tag){case 5:var o=n.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,tn=n,nn=Ur(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,tn=n,nn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ni!==null?{id:fr,overflow:dr}:null,n.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=fn(18,null,null,0),o.stateNode=r,o.return=n,n.child=o,tn=n,nn=null,!0):!1;default:return!1}}function _c(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vc(n){if(Ye){var r=nn;if(r){var o=r;if(!Md(n,r)){if(_c(n))throw Error(t(418));r=Ur(o.nextSibling);var u=tn;r&&Md(n,r)?Ld(u,o):(n.flags=n.flags&-4097|2,Ye=!1,tn=n)}}else{if(_c(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ye=!1,tn=n}}}function Fd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;tn=n}function _l(n){if(n!==tn)return!1;if(!Ye)return Fd(n),Ye=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!cc(n.type,n.memoizedProps)),r&&(r=nn)){if(_c(n))throw bd(),Error(t(418));for(;r;)Ld(n,r),r=Ur(r.nextSibling)}if(Fd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(r===0){nn=Ur(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}n=n.nextSibling}nn=null}}else nn=tn?Ur(n.stateNode.nextSibling):null;return!0}function bd(){for(var n=nn;n;)n=Ur(n.nextSibling)}function Vs(){nn=tn=null,Ye=!1}function Ec(n){wn===null?wn=[n]:wn.push(n)}var Tv=xe.ReactCurrentBatchConfig;function Bo(n,r,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var u=o.stateNode}if(!u)throw Error(t(147,n));var f=u,d=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(_){var T=f.refs;_===null?delete T[d]:T[d]=_},r._stringRef=d,r)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function vl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Ud(n){var r=n._init;return r(n._payload)}function jd(n){function r(O,N){if(n){var M=O.deletions;M===null?(O.deletions=[N],O.flags|=16):M.push(N)}}function o(O,N){if(!n)return null;for(;N!==null;)r(O,N),N=N.sibling;return null}function u(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function f(O,N){return O=Xr(O,N),O.index=0,O.sibling=null,O}function d(O,N,M){return O.index=M,n?(M=O.alternate,M!==null?(M=M.index,M<N?(O.flags|=2,N):M):(O.flags|=2,N)):(O.flags|=1048576,N)}function _(O){return n&&O.alternate===null&&(O.flags|=2),O}function T(O,N,M,Y){return N===null||N.tag!==6?(N=hh(M,O.mode,Y),N.return=O,N):(N=f(N,M),N.return=O,N)}function R(O,N,M,Y){var le=M.type;return le===C?G(O,N,M.props.children,Y,M.key):N!==null&&(N.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===kt&&Ud(le)===N.type)?(Y=f(N,M.props),Y.ref=Bo(O,N,M),Y.return=O,Y):(Y=$l(M.type,M.key,M.props,null,O.mode,Y),Y.ref=Bo(O,N,M),Y.return=O,Y)}function F(O,N,M,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==M.containerInfo||N.stateNode.implementation!==M.implementation?(N=fh(M,O.mode,Y),N.return=O,N):(N=f(N,M.children||[]),N.return=O,N)}function G(O,N,M,Y,le){return N===null||N.tag!==7?(N=Ui(M,O.mode,Y,le),N.return=O,N):(N=f(N,M),N.return=O,N)}function Q(O,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return N=hh(""+N,O.mode,M),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case je:return M=$l(N.type,N.key,N.props,null,O.mode,M),M.ref=Bo(O,null,N),M.return=O,M;case B:return N=fh(N,O.mode,M),N.return=O,N;case kt:var Y=N._init;return Q(O,Y(N._payload),M)}if(rt(N)||ce(N))return N=Ui(N,O.mode,M,null),N.return=O,N;vl(O,N)}return null}function W(O,N,M,Y){var le=N!==null?N.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return le!==null?null:T(O,N,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case je:return M.key===le?R(O,N,M,Y):null;case B:return M.key===le?F(O,N,M,Y):null;case kt:return le=M._init,W(O,N,le(M._payload),Y)}if(rt(M)||ce(M))return le!==null?null:G(O,N,M,Y,null);vl(O,M)}return null}function ne(O,N,M,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return O=O.get(M)||null,T(N,O,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case je:return O=O.get(Y.key===null?M:Y.key)||null,R(N,O,Y,le);case B:return O=O.get(Y.key===null?M:Y.key)||null,F(N,O,Y,le);case kt:var he=Y._init;return ne(O,N,M,he(Y._payload),le)}if(rt(Y)||ce(Y))return O=O.get(M)||null,G(N,O,Y,le,null);vl(N,Y)}return null}function oe(O,N,M,Y){for(var le=null,he=null,fe=N,pe=N=0,Et=null;fe!==null&&pe<M.length;pe++){fe.index>pe?(Et=fe,fe=null):Et=fe.sibling;var Oe=W(O,fe,M[pe],Y);if(Oe===null){fe===null&&(fe=Et);break}n&&fe&&Oe.alternate===null&&r(O,fe),N=d(Oe,N,pe),he===null?le=Oe:he.sibling=Oe,he=Oe,fe=Et}if(pe===M.length)return o(O,fe),Ye&&Vi(O,pe),le;if(fe===null){for(;pe<M.length;pe++)fe=Q(O,M[pe],Y),fe!==null&&(N=d(fe,N,pe),he===null?le=fe:he.sibling=fe,he=fe);return Ye&&Vi(O,pe),le}for(fe=u(O,fe);pe<M.length;pe++)Et=ne(fe,O,pe,M[pe],Y),Et!==null&&(n&&Et.alternate!==null&&fe.delete(Et.key===null?pe:Et.key),N=d(Et,N,pe),he===null?le=Et:he.sibling=Et,he=Et);return n&&fe.forEach(function(Yr){return r(O,Yr)}),Ye&&Vi(O,pe),le}function ae(O,N,M,Y){var le=ce(M);if(typeof le!="function")throw Error(t(150));if(M=le.call(M),M==null)throw Error(t(151));for(var he=le=null,fe=N,pe=N=0,Et=null,Oe=M.next();fe!==null&&!Oe.done;pe++,Oe=M.next()){fe.index>pe?(Et=fe,fe=null):Et=fe.sibling;var Yr=W(O,fe,Oe.value,Y);if(Yr===null){fe===null&&(fe=Et);break}n&&fe&&Yr.alternate===null&&r(O,fe),N=d(Yr,N,pe),he===null?le=Yr:he.sibling=Yr,he=Yr,fe=Et}if(Oe.done)return o(O,fe),Ye&&Vi(O,pe),le;if(fe===null){for(;!Oe.done;pe++,Oe=M.next())Oe=Q(O,Oe.value,Y),Oe!==null&&(N=d(Oe,N,pe),he===null?le=Oe:he.sibling=Oe,he=Oe);return Ye&&Vi(O,pe),le}for(fe=u(O,fe);!Oe.done;pe++,Oe=M.next())Oe=ne(fe,O,pe,Oe.value,Y),Oe!==null&&(n&&Oe.alternate!==null&&fe.delete(Oe.key===null?pe:Oe.key),N=d(Oe,N,pe),he===null?le=Oe:he.sibling=Oe,he=Oe);return n&&fe.forEach(function(tE){return r(O,tE)}),Ye&&Vi(O,pe),le}function st(O,N,M,Y){if(typeof M=="object"&&M!==null&&M.type===C&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case je:e:{for(var le=M.key,he=N;he!==null;){if(he.key===le){if(le=M.type,le===C){if(he.tag===7){o(O,he.sibling),N=f(he,M.props.children),N.return=O,O=N;break e}}else if(he.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===kt&&Ud(le)===he.type){o(O,he.sibling),N=f(he,M.props),N.ref=Bo(O,he,M),N.return=O,O=N;break e}o(O,he);break}else r(O,he);he=he.sibling}M.type===C?(N=Ui(M.props.children,O.mode,Y,M.key),N.return=O,O=N):(Y=$l(M.type,M.key,M.props,null,O.mode,Y),Y.ref=Bo(O,N,M),Y.return=O,O=Y)}return _(O);case B:e:{for(he=M.key;N!==null;){if(N.key===he)if(N.tag===4&&N.stateNode.containerInfo===M.containerInfo&&N.stateNode.implementation===M.implementation){o(O,N.sibling),N=f(N,M.children||[]),N.return=O,O=N;break e}else{o(O,N);break}else r(O,N);N=N.sibling}N=fh(M,O.mode,Y),N.return=O,O=N}return _(O);case kt:return he=M._init,st(O,N,he(M._payload),Y)}if(rt(M))return oe(O,N,M,Y);if(ce(M))return ae(O,N,M,Y);vl(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,N!==null&&N.tag===6?(o(O,N.sibling),N=f(N,M),N.return=O,O=N):(o(O,N),N=hh(M,O.mode,Y),N.return=O,O=N),_(O)):o(O,N)}return st}var Ds=jd(!0),zd=jd(!1),El=jr(null),wl=null,xs=null,wc=null;function Tc(){wc=xs=wl=null}function Ic(n){var r=El.current;Ge(El),n._currentValue=r}function Sc(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Os(n,r){wl=n,wc=xs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Bt=!0),n.firstContext=null)}function un(n){var r=n._currentValue;if(wc!==n)if(n={context:n,memoizedValue:r,next:null},xs===null){if(wl===null)throw Error(t(308));xs=n,wl.dependencies={lanes:0,firstContext:n}}else xs=xs.next=n;return r}var Di=null;function Ac(n){Di===null?Di=[n]:Di.push(n)}function Bd(n,r,o,u){var f=r.interleaved;return f===null?(o.next=o,Ac(r)):(o.next=f.next,f.next=o),r.interleaved=o,pr(n,u)}function pr(n,r){n.lanes|=r;var o=n.alternate;for(o!==null&&(o.lanes|=r),o=n,n=n.return;n!==null;)n.childLanes|=r,o=n.alternate,o!==null&&(o.childLanes|=r),o=n,n=n.return;return o.tag===3?o.stateNode:null}var $r=!1;function Cc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $d(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function qr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,pr(n,o)}return f=u.interleaved,f===null?(r.next=r,Ac(u)):(r.next=f.next,f.next=r),u.interleaved=r,pr(n,o)}function Tl(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Io(n,o)}}function qd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};d===null?f=d=_:d=d.next=_,o=o.next}while(o!==null);d===null?f=d=r:d=d.next=r}else f=d=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:u.shared,effects:u.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}function Il(n,r,o,u){var f=n.updateQueue;$r=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var R=T,F=R.next;R.next=null,_===null?d=F:_.next=F,_=R;var G=n.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==_&&(T===null?G.firstBaseUpdate=F:T.next=F,G.lastBaseUpdate=R))}if(d!==null){var Q=f.baseState;_=0,G=F=R=null,T=d;do{var W=T.lane,ne=T.eventTime;if((u&W)===W){G!==null&&(G=G.next={eventTime:ne,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var oe=n,ae=T;switch(W=r,ne=o,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){Q=oe.call(ne,Q,W);break e}Q=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,W=typeof oe=="function"?oe.call(ne,Q,W):oe,W==null)break e;Q=ie({},Q,W);break e;case 2:$r=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=f.effects,W===null?f.effects=[T]:W.push(T))}else ne={eventTime:ne,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(F=G=ne,R=Q):G=G.next=ne,_|=W;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;W=T,T=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);if(G===null&&(R=Q),f.baseState=R,f.firstBaseUpdate=F,f.lastBaseUpdate=G,r=f.shared.interleaved,r!==null){f=r;do _|=f.lane,f=f.next;while(f!==r)}else d===null&&(f.shared.lanes=0);Li|=_,n.lanes=_,n.memoizedState=Q}}function Hd(n,r,o){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var u=n[r],f=u.callback;if(f!==null){if(u.callback=null,u=o,typeof f!="function")throw Error(t(191,f));f.call(u)}}}var $o={},Hn=jr($o),qo=jr($o),Ho=jr($o);function xi(n){if(n===$o)throw Error(t(174));return n}function Rc(n,r){switch(qe(Ho,r),qe(qo,n),qe(Hn,$o),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ns(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ns(r,n)}Ge(Hn),qe(Hn,r)}function Ls(){Ge(Hn),Ge(qo),Ge(Ho)}function Wd(n){xi(Ho.current);var r=xi(Hn.current),o=ns(r,n.type);r!==o&&(qe(qo,n),qe(Hn,o))}function Pc(n){qo.current===n&&(Ge(Hn),Ge(qo))}var Je=jr(0);function Sl(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var kc=[];function Nc(){for(var n=0;n<kc.length;n++)kc[n]._workInProgressVersionPrimary=null;kc.length=0}var Al=xe.ReactCurrentDispatcher,Vc=xe.ReactCurrentBatchConfig,Oi=0,Ze=null,pt=null,_t=null,Cl=!1,Wo=!1,Ko=0,Iv=0;function Dt(){throw Error(t(321))}function Dc(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!En(n[o],r[o]))return!1;return!0}function xc(n,r,o,u,f,d){if(Oi=d,Ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Al.current=n===null||n.memoizedState===null?Rv:Pv,n=o(u,f),Wo){d=0;do{if(Wo=!1,Ko=0,25<=d)throw Error(t(301));d+=1,_t=pt=null,r.updateQueue=null,Al.current=kv,n=o(u,f)}while(Wo)}if(Al.current=kl,r=pt!==null&&pt.next!==null,Oi=0,_t=pt=Ze=null,Cl=!1,r)throw Error(t(300));return n}function Oc(){var n=Ko!==0;return Ko=0,n}function Wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ze.memoizedState=_t=n:_t=_t.next=n,_t}function cn(){if(pt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var r=_t===null?Ze.memoizedState:_t.next;if(r!==null)_t=r,pt=n;else{if(n===null)throw Error(t(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?Ze.memoizedState=_t=n:_t=_t.next=n}return _t}function Go(n,r){return typeof r=="function"?r(n):r}function Lc(n){var r=cn(),o=r.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var u=pt,f=u.baseQueue,d=o.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}u.baseQueue=f=d,o.pending=null}if(f!==null){d=f.next,u=u.baseState;var T=_=null,R=null,F=d;do{var G=F.lane;if((Oi&G)===G)R!==null&&(R=R.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:n(u,F.action);else{var Q={lane:G,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};R===null?(T=R=Q,_=u):R=R.next=Q,Ze.lanes|=G,Li|=G}F=F.next}while(F!==null&&F!==d);R===null?_=u:R.next=T,En(u,r.memoizedState)||(Bt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=R,o.lastRenderedState=u}if(n=o.interleaved,n!==null){f=n;do d=f.lane,Ze.lanes|=d,Li|=d,f=f.next;while(f!==n)}else f===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Mc(n){var r=cn(),o=r.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,d=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);En(d,r.memoizedState)||(Bt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,u]}function Kd(){}function Gd(n,r){var o=Ze,u=cn(),f=r(),d=!En(u.memoizedState,f);if(d&&(u.memoizedState=f,Bt=!0),u=u.queue,Fc(Yd.bind(null,o,u,n),[n]),u.getSnapshot!==r||d||_t!==null&&_t.memoizedState.tag&1){if(o.flags|=2048,Qo(9,Xd.bind(null,o,u,f,r),void 0,null),vt===null)throw Error(t(349));(Oi&30)!==0||Qd(o,r,f)}return f}function Qd(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Xd(n,r,o,u){r.value=o,r.getSnapshot=u,Jd(r)&&Zd(n)}function Yd(n,r,o){return o(function(){Jd(r)&&Zd(n)})}function Jd(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!En(n,o)}catch{return!0}}function Zd(n){var r=pr(n,1);r!==null&&An(r,n,1,-1)}function ep(n){var r=Wn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:n},r.queue=n,n=n.dispatch=Cv.bind(null,Ze,n),[r.memoizedState,n]}function Qo(n,r,o,u){return n={tag:n,create:r,destroy:o,deps:u,next:null},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.lastEffect=n.next=n):(o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n)),n}function tp(){return cn().memoizedState}function Rl(n,r,o,u){var f=Wn();Ze.flags|=n,f.memoizedState=Qo(1|r,o,void 0,u===void 0?null:u)}function Pl(n,r,o,u){var f=cn();u=u===void 0?null:u;var d=void 0;if(pt!==null){var _=pt.memoizedState;if(d=_.destroy,u!==null&&Dc(u,_.deps)){f.memoizedState=Qo(r,o,d,u);return}}Ze.flags|=n,f.memoizedState=Qo(1|r,o,d,u)}function np(n,r){return Rl(8390656,8,n,r)}function Fc(n,r){return Pl(2048,8,n,r)}function rp(n,r){return Pl(4,2,n,r)}function ip(n,r){return Pl(4,4,n,r)}function sp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function op(n,r,o){return o=o!=null?o.concat([n]):null,Pl(4,4,sp.bind(null,r,n),o)}function bc(){}function ap(n,r){var o=cn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Dc(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function lp(n,r){var o=cn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Dc(r,u[1])?u[0]:(n=n(),o.memoizedState=[n,r],n)}function up(n,r,o){return(Oi&21)===0?(n.baseState&&(n.baseState=!1,Bt=!0),n.memoizedState=o):(En(o,r)||(o=wo(),Ze.lanes|=o,Li|=o,n.baseState=!0),r)}function Sv(n,r){var o=ke;ke=o!==0&&4>o?o:4,n(!0);var u=Vc.transition;Vc.transition={};try{n(!1),r()}finally{ke=o,Vc.transition=u}}function cp(){return cn().memoizedState}function Av(n,r,o){var u=Gr(n);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},hp(n))fp(r,o);else if(o=Bd(n,r,o,u),o!==null){var f=Ut();An(o,n,u,f),dp(o,r,u)}}function Cv(n,r,o){var u=Gr(n),f={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(hp(n))fp(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,T=d(_,o);if(f.hasEagerState=!0,f.eagerState=T,En(T,_)){var R=r.interleaved;R===null?(f.next=f,Ac(r)):(f.next=R.next,R.next=f),r.interleaved=f;return}}catch{}finally{}o=Bd(n,r,f,u),o!==null&&(f=Ut(),An(o,n,u,f),dp(o,r,u))}}function hp(n){var r=n.alternate;return n===Ze||r!==null&&r===Ze}function fp(n,r){Wo=Cl=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function dp(n,r,o){if((o&4194240)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Io(n,o)}}var kl={readContext:un,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Rv={readContext:un,useCallback:function(n,r){return Wn().memoizedState=[n,r===void 0?null:r],n},useContext:un,useEffect:np,useImperativeHandle:function(n,r,o){return o=o!=null?o.concat([n]):null,Rl(4194308,4,sp.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Rl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Rl(4,2,n,r)},useMemo:function(n,r){var o=Wn();return r=r===void 0?null:r,n=n(),o.memoizedState=[n,r],n},useReducer:function(n,r,o){var u=Wn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},u.queue=n,n=n.dispatch=Av.bind(null,Ze,n),[u.memoizedState,n]},useRef:function(n){var r=Wn();return n={current:n},r.memoizedState=n},useState:ep,useDebugValue:bc,useDeferredValue:function(n){return Wn().memoizedState=n},useTransition:function(){var n=ep(!1),r=n[0];return n=Sv.bind(null,n[1]),Wn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,o){var u=Ze,f=Wn();if(Ye){if(o===void 0)throw Error(t(407));o=o()}else{if(o=r(),vt===null)throw Error(t(349));(Oi&30)!==0||Qd(u,r,o)}f.memoizedState=o;var d={value:o,getSnapshot:r};return f.queue=d,np(Yd.bind(null,u,d,n),[n]),u.flags|=2048,Qo(9,Xd.bind(null,u,d,o,r),void 0,null),o},useId:function(){var n=Wn(),r=vt.identifierPrefix;if(Ye){var o=dr,u=fr;o=(u&~(1<<32-Xt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Ko++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Iv++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Pv={readContext:un,useCallback:ap,useContext:un,useEffect:Fc,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:ip,useMemo:lp,useReducer:Lc,useRef:tp,useState:function(){return Lc(Go)},useDebugValue:bc,useDeferredValue:function(n){var r=cn();return up(r,pt.memoizedState,n)},useTransition:function(){var n=Lc(Go)[0],r=cn().memoizedState;return[n,r]},useMutableSource:Kd,useSyncExternalStore:Gd,useId:cp,unstable_isNewReconciler:!1},kv={readContext:un,useCallback:ap,useContext:un,useEffect:Fc,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:ip,useMemo:lp,useReducer:Mc,useRef:tp,useState:function(){return Mc(Go)},useDebugValue:bc,useDeferredValue:function(n){var r=cn();return pt===null?r.memoizedState=n:up(r,pt.memoizedState,n)},useTransition:function(){var n=Mc(Go)[0],r=cn().memoizedState;return[n,r]},useMutableSource:Kd,useSyncExternalStore:Gd,useId:cp,unstable_isNewReconciler:!1};function Tn(n,r){if(n&&n.defaultProps){r=ie({},r),n=n.defaultProps;for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}return r}function Uc(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:ie({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Nl={isMounted:function(n){return(n=n._reactInternals)?_n(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Ut(),f=Gr(n),d=mr(u,f);d.payload=r,o!=null&&(d.callback=o),r=qr(n,d,f),r!==null&&(An(r,n,f,u),Tl(r,n,f))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Ut(),f=Gr(n),d=mr(u,f);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=qr(n,d,f),r!==null&&(An(r,n,f,u),Tl(r,n,f))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Ut(),u=Gr(n),f=mr(o,u);f.tag=2,r!=null&&(f.callback=r),r=qr(n,f,u),r!==null&&(An(r,n,u,o),Tl(r,n,u))}};function pp(n,r,o,u,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,d,_):r.prototype&&r.prototype.isPureReactComponent?!Lo(o,u)||!Lo(f,d):!0}function mp(n,r,o){var u=!1,f=zr,d=r.contextType;return typeof d=="object"&&d!==null?d=un(d):(f=zt(r)?ki:Vt.current,u=r.contextTypes,d=(u=u!=null)?Ps(n,f):zr),r=new r(o,d),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Nl,n.stateNode=r,r._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=d),r}function gp(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&Nl.enqueueReplaceState(r,r.state,null)}function jc(n,r,o,u){var f=n.stateNode;f.props=o,f.state=n.memoizedState,f.refs={},Cc(n);var d=r.contextType;typeof d=="object"&&d!==null?f.context=un(d):(d=zt(r)?ki:Vt.current,f.context=Ps(n,d)),f.state=n.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(Uc(n,r,d,o),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&Nl.enqueueReplaceState(f,f.state,null),Il(n,o,f,u),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ms(n,r){try{var o="",u=r;do o+=Se(u),u=u.return;while(u);var f=o}catch(d){f=`
Error generating stack: `+d.message+`
`+d.stack}return{value:n,source:r,stack:f,digest:null}}function zc(n,r,o){return{value:n,source:null,stack:o??null,digest:r??null}}function Bc(n,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Nv=typeof WeakMap=="function"?WeakMap:Map;function yp(n,r,o){o=mr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){Fl||(Fl=!0,rh=u),Bc(n,r)},o}function _p(n,r,o){o=mr(-1,o),o.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var f=r.value;o.payload=function(){return u(f)},o.callback=function(){Bc(n,r)}}var d=n.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(o.callback=function(){Bc(n,r),typeof u!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function vp(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Nv;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(f.add(o),n=qv.bind(null,n,r,o),r.then(n,n))}function Ep(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function wp(n,r,o,u,f){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=mr(-1,1),r.tag=2,qr(o,r,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Vv=xe.ReactCurrentOwner,Bt=!1;function bt(n,r,o,u){r.child=n===null?zd(r,null,o,u):Ds(r,n.child,o,u)}function Tp(n,r,o,u,f){o=o.render;var d=r.ref;return Os(r,f),u=xc(n,r,o,u,d,f),o=Oc(),n!==null&&!Bt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,gr(n,r,f)):(Ye&&o&&gc(r),r.flags|=1,bt(n,r,u,f),r.child)}function Ip(n,r,o,u,f){if(n===null){var d=o.type;return typeof d=="function"&&!ch(d)&&d.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=d,Sp(n,r,d,u,f)):(n=$l(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,(n.lanes&f)===0){var _=d.memoizedProps;if(o=o.compare,o=o!==null?o:Lo,o(_,u)&&n.ref===r.ref)return gr(n,r,f)}return r.flags|=1,n=Xr(d,u),n.ref=r.ref,n.return=r,r.child=n}function Sp(n,r,o,u,f){if(n!==null){var d=n.memoizedProps;if(Lo(d,u)&&n.ref===r.ref)if(Bt=!1,r.pendingProps=u=d,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Bt=!0);else return r.lanes=n.lanes,gr(n,r,f)}return $c(n,r,o,u,f)}function Ap(n,r,o){var u=r.pendingProps,f=u.children,d=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(bs,rn),rn|=o;else{if((o&1073741824)===0)return n=d!==null?d.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,qe(bs,rn),rn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=d!==null?d.baseLanes:o,qe(bs,rn),rn|=u}else d!==null?(u=d.baseLanes|o,r.memoizedState=null):u=o,qe(bs,rn),rn|=u;return bt(n,r,f,o),r.child}function Cp(n,r){var o=r.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function $c(n,r,o,u,f){var d=zt(o)?ki:Vt.current;return d=Ps(r,d),Os(r,f),o=xc(n,r,o,u,d,f),u=Oc(),n!==null&&!Bt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,gr(n,r,f)):(Ye&&u&&gc(r),r.flags|=1,bt(n,r,o,f),r.child)}function Rp(n,r,o,u,f){if(zt(o)){var d=!0;pl(r)}else d=!1;if(Os(r,f),r.stateNode===null)Dl(n,r),mp(r,o,u),jc(r,o,u,f),u=!0;else if(n===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var R=_.context,F=o.contextType;typeof F=="object"&&F!==null?F=un(F):(F=zt(o)?ki:Vt.current,F=Ps(r,F));var G=o.getDerivedStateFromProps,Q=typeof G=="function"||typeof _.getSnapshotBeforeUpdate=="function";Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||R!==F)&&gp(r,_,u,F),$r=!1;var W=r.memoizedState;_.state=W,Il(r,u,_,f),R=r.memoizedState,T!==u||W!==R||jt.current||$r?(typeof G=="function"&&(Uc(r,o,G,u),R=r.memoizedState),(T=$r||pp(r,o,T,u,W,R,F))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),_.props=u,_.state=R,_.context=F,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,$d(n,r),T=r.memoizedProps,F=r.type===r.elementType?T:Tn(r.type,T),_.props=F,Q=r.pendingProps,W=_.context,R=o.contextType,typeof R=="object"&&R!==null?R=un(R):(R=zt(o)?ki:Vt.current,R=Ps(r,R));var ne=o.getDerivedStateFromProps;(G=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==Q||W!==R)&&gp(r,_,u,R),$r=!1,W=r.memoizedState,_.state=W,Il(r,u,_,f);var oe=r.memoizedState;T!==Q||W!==oe||jt.current||$r?(typeof ne=="function"&&(Uc(r,o,ne,u),oe=r.memoizedState),(F=$r||pp(r,o,F,u,W,oe,R)||!1)?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,oe,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,oe,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=oe),_.props=u,_.state=oe,_.context=R,u=F):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),u=!1)}return qc(n,r,o,u,d,f)}function qc(n,r,o,u,f,d){Cp(n,r);var _=(r.flags&128)!==0;if(!u&&!_)return f&&Dd(r,o,!1),gr(n,r,d);u=r.stateNode,Vv.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,n!==null&&_?(r.child=Ds(r,n.child,null,d),r.child=Ds(r,null,T,d)):bt(n,r,T,d),r.memoizedState=u.state,f&&Dd(r,o,!0),r.child}function Pp(n){var r=n.stateNode;r.pendingContext?Nd(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Nd(n,r.context,!1),Rc(n,r.containerInfo)}function kp(n,r,o,u,f){return Vs(),Ec(f),r.flags|=256,bt(n,r,o,u),r.child}var Hc={dehydrated:null,treeContext:null,retryLane:0};function Wc(n){return{baseLanes:n,cachePool:null,transitions:null}}function Np(n,r,o){var u=r.pendingProps,f=Je.current,d=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=n!==null&&n.memoizedState===null?!1:(f&2)!==0),T?(d=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),qe(Je,f&1),n===null)return vc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,n=u.fallback,d?(u=r.mode,d=r.child,_={mode:"hidden",children:_},(u&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=_):d=ql(_,u,0,null),n=Ui(n,u,o,null),d.return=r,n.return=r,d.sibling=n,r.child=d,r.child.memoizedState=Wc(o),r.memoizedState=Hc,n):Kc(r,_));if(f=n.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return Dv(n,r,_,u,T,f,o);if(d){d=u.fallback,_=r.mode,f=n.child,T=f.sibling;var R={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==f?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=Xr(f,R),u.subtreeFlags=f.subtreeFlags&14680064),T!==null?d=Xr(T,d):(d=Ui(d,_,o,null),d.flags|=2),d.return=r,u.return=r,u.sibling=d,r.child=u,u=d,d=r.child,_=n.child.memoizedState,_=_===null?Wc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},d.memoizedState=_,d.childLanes=n.childLanes&~o,r.memoizedState=Hc,u}return d=n.child,n=d.sibling,u=Xr(d,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,n!==null&&(o=r.deletions,o===null?(r.deletions=[n],r.flags|=16):o.push(n)),r.child=u,r.memoizedState=null,u}function Kc(n,r){return r=ql({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Vl(n,r,o,u){return u!==null&&Ec(u),Ds(r,n.child,null,o),n=Kc(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Dv(n,r,o,u,f,d,_){if(o)return r.flags&256?(r.flags&=-257,u=zc(Error(t(422))),Vl(n,r,_,u)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(d=u.fallback,f=r.mode,u=ql({mode:"visible",children:u.children},f,0,null),d=Ui(d,f,_,null),d.flags|=2,u.return=r,d.return=r,u.sibling=d,r.child=u,(r.mode&1)!==0&&Ds(r,n.child,null,_),r.child.memoizedState=Wc(_),r.memoizedState=Hc,d);if((r.mode&1)===0)return Vl(n,r,_,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var T=u.dgst;return u=T,d=Error(t(419)),u=zc(d,u,void 0),Vl(n,r,_,u)}if(T=(_&n.childLanes)!==0,Bt||T){if(u=vt,u!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|_))!==0?0:f,f!==0&&f!==d.retryLane&&(d.retryLane=f,pr(n,f),An(u,n,f,-1))}return uh(),u=zc(Error(t(421))),Vl(n,r,_,u)}return f.data==="$?"?(r.flags|=128,r.child=n.child,r=Hv.bind(null,n),f._reactRetry=r,null):(n=d.treeContext,nn=Ur(f.nextSibling),tn=r,Ye=!0,wn=null,n!==null&&(an[ln++]=fr,an[ln++]=dr,an[ln++]=Ni,fr=n.id,dr=n.overflow,Ni=r),r=Kc(r,u.children),r.flags|=4096,r)}function Vp(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Sc(n.return,r,o)}function Gc(n,r,o,u,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=u,d.tail=o,d.tailMode=f)}function Dp(n,r,o){var u=r.pendingProps,f=u.revealOrder,d=u.tail;if(bt(n,r,u.children,o),u=Je.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vp(n,o,r);else if(n.tag===19)Vp(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(qe(Je,u),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&Sl(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Gc(r,!1,f,o,d);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Sl(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Gc(r,!0,o,null,d);break;case"together":Gc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Dl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function gr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Li|=r.lanes,(o&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,o=Xr(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Xr(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function xv(n,r,o){switch(r.tag){case 3:Pp(r),Vs();break;case 5:Wd(r);break;case 1:zt(r.type)&&pl(r);break;case 4:Rc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,f=r.memoizedProps.value;qe(El,u._currentValue),u._currentValue=f;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Je,Je.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Np(n,r,o):(qe(Je,Je.current&1),n=gr(n,r,o),n!==null?n.sibling:null);qe(Je,Je.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(n.flags&128)!==0){if(u)return Dp(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),qe(Je,Je.current),u)break;return null;case 22:case 23:return r.lanes=0,Ap(n,r,o)}return gr(n,r,o)}var xp,Qc,Op,Lp;xp=function(n,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Qc=function(){},Op=function(n,r,o,u){var f=n.memoizedProps;if(f!==u){n=r.stateNode,xi(Hn.current);var d=null;switch(o){case"input":f=es(n,f),u=es(n,u),d=[];break;case"select":f=ie({},f,{value:void 0}),u=ie({},u,{value:void 0}),d=[];break;case"textarea":f=uo(n,f),u=uo(n,u),d=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=hl)}yn(o,u);var _;o=null;for(F in f)if(!u.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var T=f[F];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(a.hasOwnProperty(F)?d||(d=[]):(d=d||[]).push(F,null));for(F in u){var R=u[F];if(T=f?.[F],u.hasOwnProperty(F)&&R!==T&&(R!=null||T!=null))if(F==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in R)R.hasOwnProperty(_)&&T[_]!==R[_]&&(o||(o={}),o[_]=R[_])}else o||(d||(d=[]),d.push(F,o)),o=R;else F==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(d=d||[]).push(F,R)):F==="children"?typeof R!="string"&&typeof R!="number"||(d=d||[]).push(F,""+R):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(a.hasOwnProperty(F)?(R!=null&&F==="onScroll"&&Ke("scroll",n),d||T===R||(d=[])):(d=d||[]).push(F,R))}o&&(d=d||[]).push("style",o);var F=d;(r.updateQueue=F)&&(r.flags|=4)}},Lp=function(n,r,o,u){o!==u&&(r.flags|=4)};function Xo(n,r){if(!Ye)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function xt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function Ov(n,r,o){var u=r.pendingProps;switch(yc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(r),null;case 1:return zt(r.type)&&dl(),xt(r),null;case 3:return u=r.stateNode,Ls(),Ge(jt),Ge(Vt),Nc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(_l(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wn!==null&&(oh(wn),wn=null))),Qc(n,r),xt(r),null;case 5:Pc(r);var f=xi(Ho.current);if(o=r.type,n!==null&&r.stateNode!=null)Op(n,r,o,u,f),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(t(166));return xt(r),null}if(n=xi(Hn.current),_l(r)){u=r.stateNode,o=r.type;var d=r.memoizedProps;switch(u[qn]=r,u[jo]=d,n=(r.mode&1)!==0,o){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(f=0;f<Fo.length;f++)Ke(Fo[f],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":Ma(u,d),Ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!d.multiple},Ke("invalid",u);break;case"textarea":co(u,d),Ke("invalid",u)}yn(o,d),f=null;for(var _ in d)if(d.hasOwnProperty(_)){var T=d[_];_==="children"?typeof T=="string"?u.textContent!==T&&(d.suppressHydrationWarning!==!0&&cl(u.textContent,T,n),f=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(d.suppressHydrationWarning!==!0&&cl(u.textContent,T,n),f=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&Ke("scroll",u)}switch(o){case"input":Zi(u),lo(u,d,!0);break;case"textarea":Zi(u),Ir(u);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(u.onclick=hl)}u=f,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ho(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=_.createElement(o,{is:u.is}):(n=_.createElement(o),o==="select"&&(_=n,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):n=_.createElementNS(n,o),n[qn]=r,n[jo]=u,xp(n,r,!1,!1),r.stateNode=n;e:{switch(_=is(o,u),o){case"dialog":Ke("cancel",n),Ke("close",n),f=u;break;case"iframe":case"object":case"embed":Ke("load",n),f=u;break;case"video":case"audio":for(f=0;f<Fo.length;f++)Ke(Fo[f],n);f=u;break;case"source":Ke("error",n),f=u;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),f=u;break;case"details":Ke("toggle",n),f=u;break;case"input":Ma(n,u),f=es(n,u),Ke("invalid",n);break;case"option":f=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},f=ie({},u,{value:void 0}),Ke("invalid",n);break;case"textarea":co(n,u),f=uo(n,u),Ke("invalid",n);break;default:f=u}yn(o,f),T=f;for(d in T)if(T.hasOwnProperty(d)){var R=T[d];d==="style"?rs(n,R):d==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ba(n,R)):d==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&pi(n,R):typeof R=="number"&&pi(n,""+R):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(a.hasOwnProperty(d)?R!=null&&d==="onScroll"&&Ke("scroll",n):R!=null&&Te(n,d,R,_))}switch(o){case"input":Zi(n),lo(n,u,!1);break;case"textarea":Zi(n),Ir(n);break;case"option":u.value!=null&&n.setAttribute("value",""+Ve(u.value));break;case"select":n.multiple=!!u.multiple,d=u.value,d!=null?gn(n,!!u.multiple,d,!1):u.defaultValue!=null&&gn(n,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=hl)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return xt(r),null;case 6:if(n&&r.stateNode!=null)Lp(n,r,n.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(t(166));if(o=xi(Ho.current),xi(Hn.current),_l(r)){if(u=r.stateNode,o=r.memoizedProps,u[qn]=r,(d=u.nodeValue!==o)&&(n=tn,n!==null))switch(n.tag){case 3:cl(u.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cl(u.nodeValue,o,(n.mode&1)!==0)}d&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[qn]=r,r.stateNode=u}return xt(r),null;case 13:if(Ge(Je),u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&nn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)bd(),Vs(),r.flags|=98560,d=!1;else if(d=_l(r),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(t(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));d[qn]=r}else Vs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xt(r),d=!1}else wn!==null&&(oh(wn),wn=null),d=!0;if(!d)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Je.current&1)!==0?mt===0&&(mt=3):uh())),r.updateQueue!==null&&(r.flags|=4),xt(r),null);case 4:return Ls(),Qc(n,r),n===null&&bo(r.stateNode.containerInfo),xt(r),null;case 10:return Ic(r.type._context),xt(r),null;case 17:return zt(r.type)&&dl(),xt(r),null;case 19:if(Ge(Je),d=r.memoizedState,d===null)return xt(r),null;if(u=(r.flags&128)!==0,_=d.rendering,_===null)if(u)Xo(d,!1);else{if(mt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(_=Sl(n),_!==null){for(r.flags|=128,Xo(d,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)d=o,n=u,d.flags&=14680066,_=d.alternate,_===null?(d.childLanes=0,d.lanes=n,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=_.childLanes,d.lanes=_.lanes,d.child=_.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=_.memoizedProps,d.memoizedState=_.memoizedState,d.updateQueue=_.updateQueue,d.type=_.type,n=_.dependencies,d.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return qe(Je,Je.current&1|2),r.child}n=n.sibling}d.tail!==null&&We()>Us&&(r.flags|=128,u=!0,Xo(d,!1),r.lanes=4194304)}else{if(!u)if(n=Sl(_),n!==null){if(r.flags|=128,u=!0,o=n.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Xo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!Ye)return xt(r),null}else 2*We()-d.renderingStartTime>Us&&o!==1073741824&&(r.flags|=128,u=!0,Xo(d,!1),r.lanes=4194304);d.isBackwards?(_.sibling=r.child,r.child=_):(o=d.last,o!==null?o.sibling=_:r.child=_,d.last=_)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=We(),r.sibling=null,o=Je.current,qe(Je,u?o&1|2:o&1),r):(xt(r),null);case 22:case 23:return lh(),u=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(rn&1073741824)!==0&&(xt(r),r.subtreeFlags&6&&(r.flags|=8192)):xt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Lv(n,r){switch(yc(r),r.tag){case 1:return zt(r.type)&&dl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ls(),Ge(jt),Ge(Vt),Nc(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Pc(r),null;case 13:if(Ge(Je),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Vs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ge(Je),null;case 4:return Ls(),null;case 10:return Ic(r.type._context),null;case 22:case 23:return lh(),null;case 24:return null;default:return null}}var xl=!1,Ot=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,se=null;function Fs(n,r){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){nt(n,r,u)}else o.current=null}function Xc(n,r,o){try{o()}catch(u){nt(n,r,u)}}var Mp=!1;function Fv(n,r){if(lc=ar,n=pd(),ec(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var _=0,T=-1,R=-1,F=0,G=0,Q=n,W=null;t:for(;;){for(var ne;Q!==o||f!==0&&Q.nodeType!==3||(T=_+f),Q!==d||u!==0&&Q.nodeType!==3||(R=_+u),Q.nodeType===3&&(_+=Q.nodeValue.length),(ne=Q.firstChild)!==null;)W=Q,Q=ne;for(;;){if(Q===n)break t;if(W===o&&++F===f&&(T=_),W===d&&++G===u&&(R=_),(ne=Q.nextSibling)!==null)break;Q=W,W=Q.parentNode}Q=ne}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(uc={focusedElem:n,selectionRange:o},ar=!1,se=r;se!==null;)if(r=se,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,se=n;else for(;se!==null;){r=se;try{var oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,st=oe.memoizedState,O=r.stateNode,N=O.getSnapshotBeforeUpdate(r.elementType===r.type?ae:Tn(r.type,ae),st);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){nt(r,r.return,Y)}if(n=r.sibling,n!==null){n.return=r.return,se=n;break}se=r.return}return oe=Mp,Mp=!1,oe}function Yo(n,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&n)===n){var d=f.destroy;f.destroy=void 0,d!==void 0&&Xc(r,o,d)}f=f.next}while(f!==u)}}function Ol(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Yc(n){var r=n.ref;if(r!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof r=="function"?r(n):r.current=n}}function Fp(n){var r=n.alternate;r!==null&&(n.alternate=null,Fp(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[qn],delete r[jo],delete r[dc],delete r[vv],delete r[Ev])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bp(n){return n.tag===5||n.tag===3||n.tag===4}function Up(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jc(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=hl));else if(u!==4&&(n=n.child,n!==null))for(Jc(n,r,o),n=n.sibling;n!==null;)Jc(n,r,o),n=n.sibling}function Zc(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(Zc(n,r,o),n=n.sibling;n!==null;)Zc(n,r,o),n=n.sibling}var St=null,In=!1;function Hr(n,r,o){for(o=o.child;o!==null;)jp(n,r,o),o=o.sibling}function jp(n,r,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(vi,o)}catch{}switch(o.tag){case 5:Ot||Fs(o,r);case 6:var u=St,f=In;St=null,Hr(n,r,o),St=u,In=f,St!==null&&(In?(n=St,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):St.removeChild(o.stateNode));break;case 18:St!==null&&(In?(n=St,o=o.stateNode,n.nodeType===8?fc(n.parentNode,o):n.nodeType===1&&fc(n,o),Lr(n)):fc(St,o.stateNode));break;case 4:u=St,f=In,St=o.stateNode.containerInfo,In=!0,Hr(n,r,o),St=u,In=f;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var d=f,_=d.destroy;d=d.tag,_!==void 0&&((d&2)!==0||(d&4)!==0)&&Xc(o,r,_),f=f.next}while(f!==u)}Hr(n,r,o);break;case 1:if(!Ot&&(Fs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){nt(o,r,T)}Hr(n,r,o);break;case 21:Hr(n,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,Hr(n,r,o),Ot=u):Hr(n,r,o);break;default:Hr(n,r,o)}}function zp(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new Mv),r.forEach(function(u){var f=Wv.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}}function Sn(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];try{var d=n,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:St=T.stateNode,In=!1;break e;case 3:St=T.stateNode.containerInfo,In=!0;break e;case 4:St=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(St===null)throw Error(t(160));jp(d,_,f),St=null,In=!1;var R=f.alternate;R!==null&&(R.return=null),f.return=null}catch(F){nt(f,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Bp(r,n),r=r.sibling}function Bp(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sn(r,n),Kn(n),u&4){try{Yo(3,n,n.return),Ol(3,n)}catch(ae){nt(n,n.return,ae)}try{Yo(5,n,n.return)}catch(ae){nt(n,n.return,ae)}}break;case 1:Sn(r,n),Kn(n),u&512&&o!==null&&Fs(o,o.return);break;case 5:if(Sn(r,n),Kn(n),u&512&&o!==null&&Fs(o,o.return),n.flags&32){var f=n.stateNode;try{pi(f,"")}catch(ae){nt(n,n.return,ae)}}if(u&4&&(f=n.stateNode,f!=null)){var d=n.memoizedProps,_=o!==null?o.memoizedProps:d,T=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{T==="input"&&d.type==="radio"&&d.name!=null&&ts(f,d),is(T,_);var F=is(T,d);for(_=0;_<R.length;_+=2){var G=R[_],Q=R[_+1];G==="style"?rs(f,Q):G==="dangerouslySetInnerHTML"?ba(f,Q):G==="children"?pi(f,Q):Te(f,G,Q,F)}switch(T){case"input":di(f,d);break;case"textarea":Fa(f,d);break;case"select":var W=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!d.multiple;var ne=d.value;ne!=null?gn(f,!!d.multiple,ne,!1):W!==!!d.multiple&&(d.defaultValue!=null?gn(f,!!d.multiple,d.defaultValue,!0):gn(f,!!d.multiple,d.multiple?[]:"",!1))}f[jo]=d}catch(ae){nt(n,n.return,ae)}}break;case 6:if(Sn(r,n),Kn(n),u&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,d=n.memoizedProps;try{f.nodeValue=d}catch(ae){nt(n,n.return,ae)}}break;case 3:if(Sn(r,n),Kn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Lr(r.containerInfo)}catch(ae){nt(n,n.return,ae)}break;case 4:Sn(r,n),Kn(n);break;case 13:Sn(r,n),Kn(n),f=n.child,f.flags&8192&&(d=f.memoizedState!==null,f.stateNode.isHidden=d,!d||f.alternate!==null&&f.alternate.memoizedState!==null||(nh=We())),u&4&&zp(n);break;case 22:if(G=o!==null&&o.memoizedState!==null,n.mode&1?(Ot=(F=Ot)||G,Sn(r,n),Ot=F):Sn(r,n),Kn(n),u&8192){if(F=n.memoizedState!==null,(n.stateNode.isHidden=F)&&!G&&(n.mode&1)!==0)for(se=n,G=n.child;G!==null;){for(Q=se=G;se!==null;){switch(W=se,ne=W.child,W.tag){case 0:case 11:case 14:case 15:Yo(4,W,W.return);break;case 1:Fs(W,W.return);var oe=W.stateNode;if(typeof oe.componentWillUnmount=="function"){u=W,o=W.return;try{r=u,oe.props=r.memoizedProps,oe.state=r.memoizedState,oe.componentWillUnmount()}catch(ae){nt(u,o,ae)}}break;case 5:Fs(W,W.return);break;case 22:if(W.memoizedState!==null){Hp(Q);continue}}ne!==null?(ne.return=W,se=ne):Hp(Q)}G=G.sibling}e:for(G=null,Q=n;;){if(Q.tag===5){if(G===null){G=Q;try{f=Q.stateNode,F?(d=f.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(T=Q.stateNode,R=Q.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=Cr("display",_))}catch(ae){nt(n,n.return,ae)}}}else if(Q.tag===6){if(G===null)try{Q.stateNode.nodeValue=F?"":Q.memoizedProps}catch(ae){nt(n,n.return,ae)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===n)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===n)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===n)break e;G===Q&&(G=null),Q=Q.return}G===Q&&(G=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Sn(r,n),Kn(n),u&4&&zp(n);break;case 21:break;default:Sn(r,n),Kn(n)}}function Kn(n){var r=n.flags;if(r&2){try{e:{for(var o=n.return;o!==null;){if(bp(o)){var u=o;break e}o=o.return}throw Error(t(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(pi(f,""),u.flags&=-33);var d=Up(n);Zc(n,d,f);break;case 3:case 4:var _=u.stateNode.containerInfo,T=Up(n);Jc(n,T,_);break;default:throw Error(t(161))}}catch(R){nt(n,n.return,R)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function bv(n,r,o){se=n,$p(n)}function $p(n,r,o){for(var u=(n.mode&1)!==0;se!==null;){var f=se,d=f.child;if(f.tag===22&&u){var _=f.memoizedState!==null||xl;if(!_){var T=f.alternate,R=T!==null&&T.memoizedState!==null||Ot;T=xl;var F=Ot;if(xl=_,(Ot=R)&&!F)for(se=f;se!==null;)_=se,R=_.child,_.tag===22&&_.memoizedState!==null?Wp(f):R!==null?(R.return=_,se=R):Wp(f);for(;d!==null;)se=d,$p(d),d=d.sibling;se=f,xl=T,Ot=F}qp(n)}else(f.subtreeFlags&8772)!==0&&d!==null?(d.return=f,se=d):qp(n)}}function qp(n){for(;se!==null;){var r=se;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Ol(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var f=r.elementType===r.type?o.memoizedProps:Tn(r.type,o.memoizedProps);u.componentDidUpdate(f,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&Hd(r,d,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Hd(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var G=F.memoizedState;if(G!==null){var Q=G.dehydrated;Q!==null&&Lr(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||r.flags&512&&Yc(r)}catch(W){nt(r,r.return,W)}}if(r===n){se=null;break}if(o=r.sibling,o!==null){o.return=r.return,se=o;break}se=r.return}}function Hp(n){for(;se!==null;){var r=se;if(r===n){se=null;break}var o=r.sibling;if(o!==null){o.return=r.return,se=o;break}se=r.return}}function Wp(n){for(;se!==null;){var r=se;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Ol(4,r)}catch(R){nt(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var f=r.return;try{u.componentDidMount()}catch(R){nt(r,f,R)}}var d=r.return;try{Yc(r)}catch(R){nt(r,d,R)}break;case 5:var _=r.return;try{Yc(r)}catch(R){nt(r,_,R)}}}catch(R){nt(r,r.return,R)}if(r===n){se=null;break}var T=r.sibling;if(T!==null){T.return=r.return,se=T;break}se=r.return}}var Uv=Math.ceil,Ll=xe.ReactCurrentDispatcher,eh=xe.ReactCurrentOwner,hn=xe.ReactCurrentBatchConfig,De=0,vt=null,ut=null,At=0,rn=0,bs=jr(0),mt=0,Jo=null,Li=0,Ml=0,th=0,Zo=null,$t=null,nh=0,Us=1/0,yr=null,Fl=!1,rh=null,Wr=null,bl=!1,Kr=null,Ul=0,ea=0,ih=null,jl=-1,zl=0;function Ut(){return(De&6)!==0?We():jl!==-1?jl:jl=We()}function Gr(n){return(n.mode&1)===0?1:(De&2)!==0&&At!==0?At&-At:Tv.transition!==null?(zl===0&&(zl=wo()),zl):(n=ke,n!==0||(n=window.event,n=n===void 0?16:ps(n.type)),n)}function An(n,r,o,u){if(50<ea)throw ea=0,ih=null,Error(t(185));Ii(n,o,u),((De&2)===0||n!==vt)&&(n===vt&&((De&2)===0&&(Ml|=o),mt===4&&Qr(n,At)),qt(n,u),o===1&&De===0&&(r.mode&1)===0&&(Us=We()+500,ml&&Br()))}function qt(n,r){var o=n.callbackNode;Ti(n,r);var u=ir(n,n===vt?At:0);if(u===0)o!==null&&as(o),n.callbackNode=null,n.callbackPriority=0;else if(r=u&-u,n.callbackPriority!==r){if(o!=null&&as(o),r===1)n.tag===0?wv(Gp.bind(null,n)):xd(Gp.bind(null,n)),yv(function(){(De&6)===0&&Br()}),o=null;else{switch(On(u)){case 1:o=ls;break;case 4:o=_o;break;case 16:o=_i;break;case 536870912:o=us;break;default:o=_i}o=nm(o,Kp.bind(null,n))}n.callbackPriority=r,n.callbackNode=o}}function Kp(n,r){if(jl=-1,zl=0,(De&6)!==0)throw Error(t(327));var o=n.callbackNode;if(js()&&n.callbackNode!==o)return null;var u=ir(n,n===vt?At:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||r)r=Bl(n,u);else{r=u;var f=De;De|=2;var d=Xp();(vt!==n||At!==r)&&(yr=null,Us=We()+500,Fi(n,r));do try{Bv();break}catch(T){Qp(n,T)}while(!0);Tc(),Ll.current=d,De=f,ut!==null?r=0:(vt=null,At=0,r=mt)}if(r!==0){if(r===2&&(f=Eo(n),f!==0&&(u=f,r=sh(n,f))),r===1)throw o=Jo,Fi(n,0),Qr(n,u),qt(n,We()),o;if(r===6)Qr(n,u);else{if(f=n.current.alternate,(u&30)===0&&!jv(f)&&(r=Bl(n,u),r===2&&(d=Eo(n),d!==0&&(u=d,r=sh(n,d))),r===1))throw o=Jo,Fi(n,0),Qr(n,u),qt(n,We()),o;switch(n.finishedWork=f,n.finishedLanes=u,r){case 0:case 1:throw Error(t(345));case 2:bi(n,$t,yr);break;case 3:if(Qr(n,u),(u&130023424)===u&&(r=nh+500-We(),10<r)){if(ir(n,0)!==0)break;if(f=n.suspendedLanes,(f&u)!==u){Ut(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=hc(bi.bind(null,n,$t,yr),r);break}bi(n,$t,yr);break;case 4:if(Qr(n,u),(u&4194240)===u)break;for(r=n.eventTimes,f=-1;0<u;){var _=31-Xt(u);d=1<<_,_=r[_],_>f&&(f=_),u&=~d}if(u=f,u=We()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Uv(u/1960))-u,10<u){n.timeoutHandle=hc(bi.bind(null,n,$t,yr),u);break}bi(n,$t,yr);break;case 5:bi(n,$t,yr);break;default:throw Error(t(329))}}}return qt(n,We()),n.callbackNode===o?Kp.bind(null,n):null}function sh(n,r){var o=Zo;return n.current.memoizedState.isDehydrated&&(Fi(n,r).flags|=256),n=Bl(n,r),n!==2&&(r=$t,$t=o,r!==null&&oh(r)),n}function oh(n){$t===null?$t=n:$t.push.apply($t,n)}function jv(n){for(var r=n;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var f=o[u],d=f.getSnapshot;f=f.value;try{if(!En(d(),f))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(n,r){for(r&=~th,r&=~Ml,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var o=31-Xt(r),u=1<<o;n[o]=-1,r&=~u}}function Gp(n){if((De&6)!==0)throw Error(t(327));js();var r=ir(n,0);if((r&1)===0)return qt(n,We()),null;var o=Bl(n,r);if(n.tag!==0&&o===2){var u=Eo(n);u!==0&&(r=u,o=sh(n,u))}if(o===1)throw o=Jo,Fi(n,0),Qr(n,r),qt(n,We()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,bi(n,$t,yr),qt(n,We()),null}function ah(n,r){var o=De;De|=1;try{return n(r)}finally{De=o,De===0&&(Us=We()+500,ml&&Br())}}function Mi(n){Kr!==null&&Kr.tag===0&&(De&6)===0&&js();var r=De;De|=1;var o=hn.transition,u=ke;try{if(hn.transition=null,ke=1,n)return n()}finally{ke=u,hn.transition=o,De=r,(De&6)===0&&Br()}}function lh(){rn=bs.current,Ge(bs)}function Fi(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,gv(o)),ut!==null)for(o=ut.return;o!==null;){var u=o;switch(yc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&dl();break;case 3:Ls(),Ge(jt),Ge(Vt),Nc();break;case 5:Pc(u);break;case 4:Ls();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:Ic(u.type._context);break;case 22:case 23:lh()}o=o.return}if(vt=n,ut=n=Xr(n.current,null),At=rn=r,mt=0,Jo=null,th=Ml=Li=0,$t=Zo=null,Di!==null){for(r=0;r<Di.length;r++)if(o=Di[r],u=o.interleaved,u!==null){o.interleaved=null;var f=u.next,d=o.pending;if(d!==null){var _=d.next;d.next=f,u.next=_}o.pending=u}Di=null}return n}function Qp(n,r){do{var o=ut;try{if(Tc(),Al.current=kl,Cl){for(var u=Ze.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Cl=!1}if(Oi=0,_t=pt=Ze=null,Wo=!1,Ko=0,eh.current=null,o===null||o.return===null){mt=1,Jo=r,ut=null;break}e:{var d=n,_=o.return,T=o,R=r;if(r=At,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var F=R,G=T,Q=G.tag;if((G.mode&1)===0&&(Q===0||Q===11||Q===15)){var W=G.alternate;W?(G.updateQueue=W.updateQueue,G.memoizedState=W.memoizedState,G.lanes=W.lanes):(G.updateQueue=null,G.memoizedState=null)}var ne=Ep(_);if(ne!==null){ne.flags&=-257,wp(ne,_,T,d,r),ne.mode&1&&vp(d,F,r),r=ne,R=F;var oe=r.updateQueue;if(oe===null){var ae=new Set;ae.add(R),r.updateQueue=ae}else oe.add(R);break e}else{if((r&1)===0){vp(d,F,r),uh();break e}R=Error(t(426))}}else if(Ye&&T.mode&1){var st=Ep(_);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),wp(st,_,T,d,r),Ec(Ms(R,T));break e}}d=R=Ms(R,T),mt!==4&&(mt=2),Zo===null?Zo=[d]:Zo.push(d),d=_;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var O=yp(d,R,r);qd(d,O);break e;case 1:T=R;var N=d.type,M=d.stateNode;if((d.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Wr===null||!Wr.has(M)))){d.flags|=65536,r&=-r,d.lanes|=r;var Y=_p(d,T,r);qd(d,Y);break e}}d=d.return}while(d!==null)}Jp(o)}catch(le){r=le,ut===o&&o!==null&&(ut=o=o.return);continue}break}while(!0)}function Xp(){var n=Ll.current;return Ll.current=kl,n===null?kl:n}function uh(){(mt===0||mt===3||mt===2)&&(mt=4),vt===null||(Li&268435455)===0&&(Ml&268435455)===0||Qr(vt,At)}function Bl(n,r){var o=De;De|=2;var u=Xp();(vt!==n||At!==r)&&(yr=null,Fi(n,r));do try{zv();break}catch(f){Qp(n,f)}while(!0);if(Tc(),De=o,Ll.current=u,ut!==null)throw Error(t(261));return vt=null,At=0,mt}function zv(){for(;ut!==null;)Yp(ut)}function Bv(){for(;ut!==null&&!yi();)Yp(ut)}function Yp(n){var r=tm(n.alternate,n,rn);n.memoizedProps=n.pendingProps,r===null?Jp(n):ut=r,eh.current=null}function Jp(n){var r=n;do{var o=r.alternate;if(n=r.return,(r.flags&32768)===0){if(o=Ov(o,r,rn),o!==null){ut=o;return}}else{if(o=Lv(o,r),o!==null){o.flags&=32767,ut=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,ut=null;return}}if(r=r.sibling,r!==null){ut=r;return}ut=r=n}while(r!==null);mt===0&&(mt=5)}function bi(n,r,o){var u=ke,f=hn.transition;try{hn.transition=null,ke=1,$v(n,r,o,u)}finally{hn.transition=f,ke=u}return null}function $v(n,r,o,u){do js();while(Kr!==null);if((De&6)!==0)throw Error(t(327));o=n.finishedWork;var f=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var d=o.lanes|o.childLanes;if(Qu(n,d),n===vt&&(ut=vt=null,At=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||bl||(bl=!0,nm(_i,function(){return js(),null})),d=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||d){d=hn.transition,hn.transition=null;var _=ke;ke=1;var T=De;De|=4,eh.current=null,Fv(n,o),Bp(o,n),uv(uc),ar=!!lc,uc=lc=null,n.current=o,bv(o),rr(),De=T,ke=_,hn.transition=d}else n.current=o;if(bl&&(bl=!1,Kr=n,Ul=f),d=n.pendingLanes,d===0&&(Wr=null),Qa(o.stateNode),qt(n,We()),r!==null)for(u=n.onRecoverableError,o=0;o<r.length;o++)f=r[o],u(f.value,{componentStack:f.stack,digest:f.digest});if(Fl)throw Fl=!1,n=rh,rh=null,n;return(Ul&1)!==0&&n.tag!==0&&js(),d=n.pendingLanes,(d&1)!==0?n===ih?ea++:(ea=0,ih=n):ea=0,Br(),null}function js(){if(Kr!==null){var n=On(Ul),r=hn.transition,o=ke;try{if(hn.transition=null,ke=16>n?16:n,Kr===null)var u=!1;else{if(n=Kr,Kr=null,Ul=0,(De&6)!==0)throw Error(t(331));var f=De;for(De|=4,se=n.current;se!==null;){var d=se,_=d.child;if((se.flags&16)!==0){var T=d.deletions;if(T!==null){for(var R=0;R<T.length;R++){var F=T[R];for(se=F;se!==null;){var G=se;switch(G.tag){case 0:case 11:case 15:Yo(8,G,d)}var Q=G.child;if(Q!==null)Q.return=G,se=Q;else for(;se!==null;){G=se;var W=G.sibling,ne=G.return;if(Fp(G),G===F){se=null;break}if(W!==null){W.return=ne,se=W;break}se=ne}}}var oe=d.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var st=ae.sibling;ae.sibling=null,ae=st}while(ae!==null)}}se=d}}if((d.subtreeFlags&2064)!==0&&_!==null)_.return=d,se=_;else e:for(;se!==null;){if(d=se,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:Yo(9,d,d.return)}var O=d.sibling;if(O!==null){O.return=d.return,se=O;break e}se=d.return}}var N=n.current;for(se=N;se!==null;){_=se;var M=_.child;if((_.subtreeFlags&2064)!==0&&M!==null)M.return=_,se=M;else e:for(_=N;se!==null;){if(T=se,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Ol(9,T)}}catch(le){nt(T,T.return,le)}if(T===_){se=null;break e}var Y=T.sibling;if(Y!==null){Y.return=T.return,se=Y;break e}se=T.return}}if(De=f,Br(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(vi,n)}catch{}u=!0}return u}finally{ke=o,hn.transition=r}}return!1}function Zp(n,r,o){r=Ms(o,r),r=yp(n,r,1),n=qr(n,r,1),r=Ut(),n!==null&&(Ii(n,1,r),qt(n,r))}function nt(n,r,o){if(n.tag===3)Zp(n,n,o);else for(;r!==null;){if(r.tag===3){Zp(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wr===null||!Wr.has(u))){n=Ms(o,n),n=_p(r,n,1),r=qr(r,n,1),n=Ut(),r!==null&&(Ii(r,1,n),qt(r,n));break}}r=r.return}}function qv(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),r=Ut(),n.pingedLanes|=n.suspendedLanes&o,vt===n&&(At&o)===o&&(mt===4||mt===3&&(At&130023424)===At&&500>We()-nh?Fi(n,0):th|=o),qt(n,r)}function em(n,r){r===0&&((n.mode&1)===0?r=1:(r=Dr,Dr<<=1,(Dr&130023424)===0&&(Dr=4194304)));var o=Ut();n=pr(n,r),n!==null&&(Ii(n,r,o),qt(n,o))}function Hv(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),em(n,o)}function Wv(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(r),em(n,o)}var tm;tm=function(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps||jt.current)Bt=!0;else{if((n.lanes&o)===0&&(r.flags&128)===0)return Bt=!1,xv(n,r,o);Bt=(n.flags&131072)!==0}else Bt=!1,Ye&&(r.flags&1048576)!==0&&Od(r,yl,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Dl(n,r),n=r.pendingProps;var f=Ps(r,Vt.current);Os(r,o),f=xc(null,r,u,n,f,o);var d=Oc();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,zt(u)?(d=!0,pl(r)):d=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Cc(r),f.updater=Nl,r.stateNode=f,f._reactInternals=r,jc(r,u,n,o),r=qc(null,r,u,!0,d,o)):(r.tag=0,Ye&&d&&gc(r),bt(null,r,f,o),r=r.child),r;case 16:u=r.elementType;e:{switch(Dl(n,r),n=r.pendingProps,f=u._init,u=f(u._payload),r.type=u,f=r.tag=Gv(u),n=Tn(u,n),f){case 0:r=$c(null,r,u,n,o);break e;case 1:r=Rp(null,r,u,n,o);break e;case 11:r=Tp(null,r,u,n,o);break e;case 14:r=Ip(null,r,u,Tn(u.type,n),o);break e}throw Error(t(306,u,""))}return r;case 0:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Tn(u,f),$c(n,r,u,f,o);case 1:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Tn(u,f),Rp(n,r,u,f,o);case 3:e:{if(Pp(r),n===null)throw Error(t(387));u=r.pendingProps,d=r.memoizedState,f=d.element,$d(n,r),Il(r,u,null,o);var _=r.memoizedState;if(u=_.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){f=Ms(Error(t(423)),r),r=kp(n,r,u,o,f);break e}else if(u!==f){f=Ms(Error(t(424)),r),r=kp(n,r,u,o,f);break e}else for(nn=Ur(r.stateNode.containerInfo.firstChild),tn=r,Ye=!0,wn=null,o=zd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Vs(),u===f){r=gr(n,r,o);break e}bt(n,r,u,o)}r=r.child}return r;case 5:return Wd(r),n===null&&vc(r),u=r.type,f=r.pendingProps,d=n!==null?n.memoizedProps:null,_=f.children,cc(u,f)?_=null:d!==null&&cc(u,d)&&(r.flags|=32),Cp(n,r),bt(n,r,_,o),r.child;case 6:return n===null&&vc(r),null;case 13:return Np(n,r,o);case 4:return Rc(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=Ds(r,null,u,o):bt(n,r,u,o),r.child;case 11:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Tn(u,f),Tp(n,r,u,f,o);case 7:return bt(n,r,r.pendingProps,o),r.child;case 8:return bt(n,r,r.pendingProps.children,o),r.child;case 12:return bt(n,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,f=r.pendingProps,d=r.memoizedProps,_=f.value,qe(El,u._currentValue),u._currentValue=_,d!==null)if(En(d.value,_)){if(d.children===f.children&&!jt.current){r=gr(n,r,o);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var T=d.dependencies;if(T!==null){_=d.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(d.tag===1){R=mr(-1,o&-o),R.tag=2;var F=d.updateQueue;if(F!==null){F=F.shared;var G=F.pending;G===null?R.next=R:(R.next=G.next,G.next=R),F.pending=R}}d.lanes|=o,R=d.alternate,R!==null&&(R.lanes|=o),Sc(d.return,o,r),T.lanes|=o;break}R=R.next}}else if(d.tag===10)_=d.type===r.type?null:d.child;else if(d.tag===18){if(_=d.return,_===null)throw Error(t(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),Sc(_,o,r),_=d.sibling}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===r){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}bt(n,r,f.children,o),r=r.child}return r;case 9:return f=r.type,u=r.pendingProps.children,Os(r,o),f=un(f),u=u(f),r.flags|=1,bt(n,r,u,o),r.child;case 14:return u=r.type,f=Tn(u,r.pendingProps),f=Tn(u.type,f),Ip(n,r,u,f,o);case 15:return Sp(n,r,r.type,r.pendingProps,o);case 17:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Tn(u,f),Dl(n,r),r.tag=1,zt(u)?(n=!0,pl(r)):n=!1,Os(r,o),mp(r,u,f),jc(r,u,f,o),qc(null,r,u,!0,n,o);case 19:return Dp(n,r,o);case 22:return Ap(n,r,o)}throw Error(t(156,r.tag))};function nm(n,r){return yo(n,r)}function Kv(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(n,r,o,u){return new Kv(n,r,o,u)}function ch(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gv(n){if(typeof n=="function")return ch(n)?1:0;if(n!=null){if(n=n.$$typeof,n===x)return 11;if(n===yt)return 14}return 2}function Xr(n,r){var o=n.alternate;return o===null?(o=fn(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function $l(n,r,o,u,f,d){var _=2;if(u=n,typeof n=="function")ch(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case C:return Ui(o.children,f,d,r);case w:_=8,f|=8;break;case A:return n=fn(12,o,r,f|2),n.elementType=A,n.lanes=d,n;case S:return n=fn(13,o,r,f),n.elementType=S,n.lanes=d,n;case $e:return n=fn(19,o,r,f),n.elementType=$e,n.lanes=d,n;case Xe:return ql(o,f,d,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case V:_=10;break e;case k:_=9;break e;case x:_=11;break e;case yt:_=14;break e;case kt:_=16,u=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=fn(_,o,r,f),r.elementType=n,r.type=u,r.lanes=d,r}function Ui(n,r,o,u){return n=fn(7,n,u,r),n.lanes=o,n}function ql(n,r,o,u){return n=fn(22,n,u,r),n.elementType=Xe,n.lanes=o,n.stateNode={isHidden:!1},n}function hh(n,r,o){return n=fn(6,n,null,r),n.lanes=o,n}function fh(n,r,o){return r=fn(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Qv(n,r,o,u,f){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=To(0),this.expirationTimes=To(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=To(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function dh(n,r,o,u,f,d,_,T,R){return n=new Qv(n,r,o,T,R),r===1?(r=1,d===!0&&(r|=8)):r=0,d=fn(3,null,null,r),n.current=d,d.stateNode=n,d.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cc(d),n}function Xv(n,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:u==null?null:""+u,children:n,containerInfo:r,implementation:o}}function rm(n){if(!n)return zr;n=n._reactInternals;e:{if(_n(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(zt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(zt(o))return Vd(n,o,r)}return r}function im(n,r,o,u,f,d,_,T,R){return n=dh(o,u,!0,n,f,d,_,T,R),n.context=rm(null),o=n.current,u=Ut(),f=Gr(o),d=mr(u,f),d.callback=r??null,qr(o,d,f),n.current.lanes=f,Ii(n,f,u),qt(n,u),n}function Hl(n,r,o,u){var f=r.current,d=Ut(),_=Gr(f);return o=rm(o),r.context===null?r.context=o:r.pendingContext=o,r=mr(d,_),r.payload={element:n},u=u===void 0?null:u,u!==null&&(r.callback=u),n=qr(f,r,_),n!==null&&(An(n,f,_,d),Tl(n,f,_)),_}function Wl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function sm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function ph(n,r){sm(n,r),(n=n.alternate)&&sm(n,r)}function Yv(){return null}var om=typeof reportError=="function"?reportError:function(n){console.error(n)};function mh(n){this._internalRoot=n}Kl.prototype.render=mh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Hl(n,r,null,null)},Kl.prototype.unmount=mh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Mi(function(){Hl(null,n,null,null)}),r[cr]=null}};function Kl(n){this._internalRoot=n}Kl.prototype.unstable_scheduleHydration=function(n){if(n){var r=Co();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Yt.length&&r!==0&&r<Yt[o].priority;o++);Yt.splice(o,0,n),o===0&&fs(n)}};function gh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function am(){}function Jv(n,r,o,u,f){if(f){if(typeof u=="function"){var d=u;u=function(){var F=Wl(_);d.call(F)}}var _=im(r,u,n,0,null,!1,!1,"",am);return n._reactRootContainer=_,n[cr]=_.current,bo(n.nodeType===8?n.parentNode:n),Mi(),_}for(;f=n.lastChild;)n.removeChild(f);if(typeof u=="function"){var T=u;u=function(){var F=Wl(R);T.call(F)}}var R=dh(n,0,!1,null,null,!1,!1,"",am);return n._reactRootContainer=R,n[cr]=R.current,bo(n.nodeType===8?n.parentNode:n),Mi(function(){Hl(r,R,o,u)}),R}function Ql(n,r,o,u,f){var d=o._reactRootContainer;if(d){var _=d;if(typeof f=="function"){var T=f;f=function(){var R=Wl(_);T.call(R)}}Hl(r,_,n,f)}else _=Jv(o,r,n,f,u);return Wl(_)}So=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var o=Le(r.pendingLanes);o!==0&&(Io(r,o|1),qt(r,We()),(De&6)===0&&(Us=We()+500,Br()))}break;case 13:Mi(function(){var u=pr(n,1);if(u!==null){var f=Ut();An(u,n,1,f)}}),ph(n,1)}},cs=function(n){if(n.tag===13){var r=pr(n,134217728);if(r!==null){var o=Ut();An(r,n,134217728,o)}ph(n,134217728)}},Ao=function(n){if(n.tag===13){var r=Gr(n),o=pr(n,r);if(o!==null){var u=Ut();An(o,n,r,u)}ph(n,r)}},Co=function(){return ke},Ro=function(n,r){var o=ke;try{return ke=n,r()}finally{ke=o}},er=function(n,r,o){switch(r){case"input":if(di(n,o),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=fl(u);if(!f)throw Error(t(90));ao(u),di(u,f)}}}break;case"textarea":Fa(n,o);break;case"select":r=o.value,r!=null&&gn(n,!!o.multiple,r,!1)}},ja=ah,za=Mi;var Zv={usingClientEntryPoint:!1,Events:[zo,Cs,fl,Pr,kr,ah]},ta={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eE={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ga(n),n===null?null:n.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||Yv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{vi=Xl.inject(eE),Qt=Xl}catch{}}return Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zv,Ht.createPortal=function(n,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gh(r))throw Error(t(200));return Xv(n,r,null,o)},Ht.createRoot=function(n,r){if(!gh(n))throw Error(t(299));var o=!1,u="",f=om;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=dh(n,1,!1,null,null,o,!1,u,f),n[cr]=r.current,bo(n.nodeType===8?n.parentNode:n),new mh(r)},Ht.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ga(r),n=n===null?null:n.stateNode,n},Ht.flushSync=function(n){return Mi(n)},Ht.hydrate=function(n,r,o){if(!Gl(r))throw Error(t(200));return Ql(null,n,r,!0,o)},Ht.hydrateRoot=function(n,r,o){if(!gh(n))throw Error(t(405));var u=o!=null&&o.hydratedSources||null,f=!1,d="",_=om;if(o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=im(r,null,n,1,o??null,f,!1,d,_),n[cr]=r.current,bo(n),u)for(n=0;n<u.length;n++)o=u[n],f=o._getVersion,f=f(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,f]:r.mutableSourceEagerHydrationData.push(o,f);return new Kl(r)},Ht.render=function(n,r,o){if(!Gl(r))throw Error(t(200));return Ql(null,n,r,!1,o)},Ht.unmountComponentAtNode=function(n){if(!Gl(n))throw Error(t(40));return n._reactRootContainer?(Mi(function(){Ql(null,null,n,!1,function(){n._reactRootContainer=null,n[cr]=null})}),!0):!1},Ht.unstable_batchedUpdates=ah,Ht.unstable_renderSubtreeIntoContainer=function(n,r,o,u){if(!Gl(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ql(n,r,o,!1,u)},Ht.version="18.3.1-next-f1338f8080-20240426",Ht}var bg;function yA(){if(bg)return Vh.exports;bg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vh.exports=gA(),Vh.exports}var Ug;function _A(){if(Ug)return ru;Ug=1;var i=yA();return ru.createRoot=i.createRoot,ru.hydrateRoot=i.hydrateRoot,ru}var vA=_A();const EA=jg(vA),Oh="inv.joyeria.items.v1",Lh="inv.joyeria.movs.v1",Mh=[{id:"p-001",sku:"ARO-PLATA-001",nombre:"Anillo plata .925",categoria:"Anillos",precio:850,stock:12},{id:"p-002",sku:"CAD-ORO-002",nombre:"Cadena oro 14k",categoria:"Cadenas",precio:5200,stock:3},{id:"p-003",sku:"ARE-ACERO-003",nombre:"Aretes acero",categoria:"Aretes",precio:250,stock:22}],wA=i=>i.charAt(0).toUpperCase()+i.slice(1),TA=["catalogo","movimientos","reportes","config"];function IA(){const[i,e]=Cn.useState("catalogo"),[t,s]=Cn.useState(""),[a,c]=Cn.useState(()=>{try{const B=localStorage.getItem(Oh),C=B?JSON.parse(B):null;return C?.length?C:Mh}catch{return Mh}});Cn.useEffect(()=>{try{localStorage.setItem(Oh,JSON.stringify(a))}catch{}},[a]);const[h,g]=Cn.useState({id:"",sku:"",nombre:"",categoria:"",precio:0,stock:0}),y=Cn.useMemo(()=>{const B=t.trim().toLowerCase();return B?a.filter(C=>C.nombre.toLowerCase().includes(B)||C.sku.toLowerCase().includes(B)||C.categoria.toLowerCase().includes(B)):a},[t,a]);function v(){g({id:"",sku:"",nombre:"",categoria:"",precio:0,stock:0})}function I(B){g(B),e("catalogo")}function P(B){confirm("Eliminar producto?")&&(c(C=>C.filter(w=>w.id!==B)),ee(C=>C.filter(w=>w.productoId!==B)))}function U(B){if(B.preventDefault(),!h.nombre||!h.sku)return;const C=h.id||`p-${Math.random().toString(36).slice(2,7)}`;c(w=>h.id?w.map(A=>A.id===h.id?{...h,id:C}:A):[{...h,id:C},...w]),v()}const[q,ee]=Cn.useState(()=>{try{const B=localStorage.getItem(Lh);return B?JSON.parse(B):[]}catch{return[]}});Cn.useEffect(()=>{try{localStorage.setItem(Lh,JSON.stringify(q))}catch{}},[q]);const[X,K]=Cn.useState({id:"",productoId:"",tipo:"entrada",cantidad:1,fecha:new Date().toISOString(),nota:""});function ge(B){if(B.preventDefault(),!X.productoId||X.cantidad<=0)return;const C=a.find(V=>V.id===X.productoId);if(!C)return;const w=X.tipo==="entrada"?1:-1,A=C.stock+w*X.cantidad;if(A<0){alert("Stock insuficiente para salida");return}c(V=>V.map(k=>k.id===C.id?{...k,stock:A}:k)),ee(V=>[{...X,id:`m-${Math.random().toString(36).slice(2,9)}`,fecha:new Date().toISOString()},...V]),K({id:"",productoId:"",tipo:"entrada",cantidad:1,fecha:new Date().toISOString(),nota:""})}const ve=5,Te=Cn.useMemo(()=>a.filter(B=>B.stock<=ve).sort((B,C)=>B.stock-C.stock),[a]),xe=B=>`$${B.toLocaleString()}`;function je(){confirm("Borrar TODO (catlogo y movimientos)?")&&(c(Mh),ee([]),localStorage.removeItem(Oh),localStorage.removeItem(Lh))}return j.jsxs("div",{className:"app",children:[j.jsx("h1",{children:"Inventario de Joyera  PWA (offline)"}),j.jsx("div",{className:"nav",children:TA.map(B=>j.jsx("button",{className:"tab "+(i===B?"active":""),onClick:()=>e(B),children:wA(B)},B))}),i==="catalogo"&&j.jsxs("section",{className:"card",children:[j.jsx("h2",{children:"Catlogo"}),j.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr 1fr",alignItems:"end"},children:[j.jsxs("div",{children:[j.jsx("label",{children:"Buscar"}),j.jsx("input",{placeholder:"Nombre, SKU o categora",value:t,onChange:B=>s(B.target.value)}),j.jsx("div",{className:"footer",children:j.jsx("small",{children:"Datos guardados localmente (offline)."})})]}),j.jsx("div",{style:{textAlign:"right"},children:j.jsx("button",{className:"tab",onClick:v,children:"Nuevo producto"})})]}),j.jsx("hr",{}),j.jsxs("form",{onSubmit:U,style:{display:"grid",gap:12,gridTemplateColumns:"repeat(6, 1fr)"},children:[j.jsxs("div",{style:{gridColumn:"span 2"},children:[j.jsx("label",{children:"Nombre"}),j.jsx("input",{value:h.nombre,onChange:B=>g({...h,nombre:B.target.value}),placeholder:"Ej: Anillo plata .925",required:!0})]}),j.jsxs("div",{children:[j.jsx("label",{children:"SKU"}),j.jsx("input",{value:h.sku,onChange:B=>g({...h,sku:B.target.value}),placeholder:"Ej: ARO-PLATA-001",required:!0})]}),j.jsxs("div",{children:[j.jsx("label",{children:"Categora"}),j.jsx("input",{value:h.categoria,onChange:B=>g({...h,categoria:B.target.value}),placeholder:"Ej: Anillos"})]}),j.jsxs("div",{children:[j.jsx("label",{children:"Precio"}),j.jsx("input",{type:"number",step:"0.01",value:h.precio,onChange:B=>g({...h,precio:Number(B.target.value)})})]}),j.jsxs("div",{children:[j.jsx("label",{children:"Stock"}),j.jsx("input",{type:"number",value:h.stock,onChange:B=>g({...h,stock:Number(B.target.value)})})]}),j.jsxs("div",{style:{display:"flex",gap:8,alignItems:"end"},children:[j.jsx("button",{className:"tab",type:"submit",children:h.id?"Guardar cambios":"Agregar"}),h.id&&j.jsx("button",{className:"tab",type:"button",onClick:v,children:"Cancelar"})]})]}),j.jsx("hr",{}),j.jsxs("table",{children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Nombre"}),j.jsx("th",{children:"SKU"}),j.jsx("th",{children:"Categora"}),j.jsx("th",{children:"Precio"}),j.jsx("th",{children:"Stock"}),j.jsx("th",{})]})}),j.jsxs("tbody",{children:[y.map(B=>j.jsxs("tr",{children:[j.jsx("td",{children:B.nombre}),j.jsx("td",{children:B.sku}),j.jsx("td",{children:B.categoria}),j.jsx("td",{children:xe(B.precio)}),j.jsx("td",{children:B.stock}),j.jsxs("td",{style:{display:"flex",gap:8},children:[j.jsx("button",{className:"tab",onClick:()=>I(B),children:"Editar"}),j.jsx("button",{className:"tab",onClick:()=>P(B.id),children:"Borrar"})]})]},B.id)),y.length===0&&j.jsx("tr",{children:j.jsx("td",{colSpan:6,children:"Sin resultados."})})]})]})]}),i==="movimientos"&&j.jsxs("section",{className:"card",children:[j.jsx("h2",{children:"Movimientos"}),j.jsxs("form",{onSubmit:ge,style:{display:"grid",gap:12,gridTemplateColumns:"repeat(6, 1fr)"},children:[j.jsxs("div",{style:{gridColumn:"span 2"},children:[j.jsx("label",{children:"Producto"}),j.jsxs("select",{value:X.productoId,onChange:B=>K({...X,productoId:B.target.value}),required:!0,children:[j.jsx("option",{value:"",children:" Selecciona "}),a.map(B=>j.jsxs("option",{value:B.id,children:[B.nombre,"  ",B.sku," (stock ",B.stock,")"]},B.id))]})]}),j.jsxs("div",{children:[j.jsx("label",{children:"Tipo"}),j.jsxs("select",{value:X.tipo,onChange:B=>K({...X,tipo:B.target.value}),children:[j.jsx("option",{value:"entrada",children:"Entrada"}),j.jsx("option",{value:"salida",children:"Salida"})]})]}),j.jsxs("div",{children:[j.jsx("label",{children:"Cantidad"}),j.jsx("input",{type:"number",min:1,value:X.cantidad,onChange:B=>K({...X,cantidad:Number(B.target.value)}),required:!0})]}),j.jsxs("div",{style:{gridColumn:"span 2"},children:[j.jsx("label",{children:"Nota (opcional)"}),j.jsx("input",{value:X.nota||"",onChange:B=>K({...X,nota:B.target.value}),placeholder:"Cliente, compra, reparacin, etc."})]}),j.jsx("div",{style:{display:"flex",alignItems:"end"},children:j.jsx("button",{className:"tab",type:"submit",children:"Aplicar"})})]}),j.jsx("hr",{}),j.jsxs("table",{children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Fecha"}),j.jsx("th",{children:"Producto"}),j.jsx("th",{children:"Tipo"}),j.jsx("th",{children:"Cantidad"}),j.jsx("th",{children:"Nota"})]})}),j.jsxs("tbody",{children:[q.map(B=>{const C=a.find(w=>w.id===B.productoId);return j.jsxs("tr",{children:[j.jsx("td",{children:new Date(B.fecha).toLocaleString()}),j.jsx("td",{children:C?`${C.nombre} (${C.sku})`:B.productoId}),j.jsx("td",{children:B.tipo}),j.jsx("td",{children:B.cantidad}),j.jsx("td",{children:B.nota||""})]},B.id)}),q.length===0&&j.jsx("tr",{children:j.jsx("td",{colSpan:5,children:"An no hay movimientos."})})]})]})]}),i==="reportes"&&j.jsxs("section",{className:"card",children:[j.jsx("h2",{children:"Reportes"}),j.jsxs("h3",{style:{marginTop:0},children:["Stock bajo ( ",ve,")"]}),j.jsxs("table",{children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("th",{children:"Producto"}),j.jsx("th",{children:"SKU"}),j.jsx("th",{children:"Stock"})]})}),j.jsxs("tbody",{children:[Te.map(B=>j.jsxs("tr",{children:[j.jsx("td",{children:B.nombre}),j.jsx("td",{children:B.sku}),j.jsx("td",{children:B.stock})]},B.id)),Te.length===0&&j.jsx("tr",{children:j.jsx("td",{colSpan:3,children:"Todo en orden."})})]})]})]}),i==="config"&&j.jsxs("section",{className:"card",children:[j.jsx("h2",{children:"Configuracin"}),j.jsxs("ul",{children:[j.jsx("li",{children:"Nombre de la tienda, moneda, etc."}),j.jsx("li",{children:"PWA lista: instalable en compu y celular; funciona offline."}),j.jsx("li",{children:"Botn de desarrollo:"})]}),j.jsx("button",{className:"tab",onClick:je,children:"Borrar TODO (dev)"})]}),j.jsx("div",{className:"footer",children:j.jsx("small",{children:"Offline-first  datos en este dispositivo  listo para sincronizar luego."})})]})}EA.createRoot(document.getElementById("root")).render(j.jsx(dA.StrictMode,{children:j.jsx(IA,{})}));
